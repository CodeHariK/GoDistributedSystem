=== RUN   TestElectionBasic
23:26:32.482184 [0] listening at [::]:55631
23:26:32.482577 [1] listening at [::]:55632
23:26:32.482869 [2] listening at [::]:55633
23:26:32.483327 [1] election timer started (294ms), term=0
23:26:32.483313 [0] election timer started (215ms), term=0
23:26:32.483316 [2] election timer started (267ms), term=0
23:26:32.704661 [0] becomes Candidate (currentTerm=1); log=[]
23:26:32.704982 [0] election timer started (174ms), term=1
23:26:32.704997 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:32.705005 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:32.710196 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:32.710194 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:32.710293 [2] ... term out of date in RequestVote
23:26:32.710311 [1] ... term out of date in RequestVote
23:26:32.710313 [2] becomes Follower with term=1; log=[]
23:26:32.710331 [1] becomes Follower with term=1; log=[]
23:26:32.711091 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:32.711170 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:32.711446 [1] election timer started (286ms), term=1
23:26:32.711502 [2] election timer started (222ms), term=1
23:26:32.714952 [2] in election timer term changed from 0 to 1, bailing out
23:26:32.715201 [1] in election timer term changed from 0 to 1, bailing out
23:26:32.715161 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:32 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:32.715284 [0] wins election with 2 votes
23:26:32.715315 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:32.715838 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:32 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:32.715953 [0] while waiting for reply, state = LEADER
23:26:32.716005 [0] in election timer state=LEADER, bailing out
23:26:32.716039 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.715423 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.716772 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.716777 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.716974 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.716974 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.719203 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:32.719344 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:32.765888 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.765892 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.766806 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.766885 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.767025 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.767089 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.768589 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:32.768712 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:32.783559 [0] CM.Stop called
23:26:32.783581 [0] becomes Dead
23:26:32.783601 [0] commitChanSender done
23:26:32.783640 [0] Received quit signal. Shutting down...
23:26:32.783757 [0] CraftServer terminated!
23:26:32.783790 [1] CM.Stop called
23:26:32.783807 [1] becomes Dead
23:26:32.783826 [1] commitChanSender done
23:26:32.783848 [1] Received quit signal. Shutting down...
23:26:32.783895 [1] CraftServer terminated!
23:26:32.783933 [2] CM.Stop called
23:26:32.783950 [2] becomes Dead
23:26:32.783978 [2] commitChanSender done
23:26:32.784001 [2] Received quit signal. Shutting down...
23:26:32.784057 [2] CraftServer terminated!
--- PASS: TestElectionBasic (0.30s)
=== RUN   TestElectionLeaderDisconnect
23:26:32.784535 [0] listening at [::]:55636
23:26:32.784755 [1] listening at [::]:55637
23:26:32.784958 [2] listening at [::]:55638
23:26:32.785109 [0] election timer started (186ms), term=0
23:26:32.785117 [2] election timer started (178ms), term=0
23:26:32.785106 [1] election timer started (298ms), term=0
23:26:32.792547 [1] in election timer state=DEAD, bailing out
23:26:32.792578 [2] in election timer state=DEAD, bailing out
23:26:32.966378 [2] becomes Candidate (currentTerm=1); log=[]
23:26:32.966579 [2] election timer started (160ms), term=1
23:26:32.966547 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:32.966556 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:32.968741 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:32.968829 [1] ... term out of date in RequestVote
23:26:32.968741 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:32.968848 [1] becomes Follower with term=1; log=[]
23:26:32.968860 [0] ... term out of date in RequestVote
23:26:32.968884 [0] becomes Follower with term=1; log=[]
23:26:32.969144 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:32.969144 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:32.969231 [1] election timer started (268ms), term=1
23:26:32.969253 [0] election timer started (173ms), term=1
23:26:32.972678 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:32 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:32.972925 [2] wins election with 2 votes
23:26:32.972963 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:32.973071 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.974562 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:32 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:32.974690 [2] while waiting for reply, state = LEADER
23:26:32.974874 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.976214 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.976378 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:32.976467 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.977227 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:32.977978 [0] in election timer term changed from 0 to 1, bailing out
23:26:32.978254 [1] in election timer term changed from 0 to 1, bailing out
23:26:32.979760 [2] in election timer state=LEADER, bailing out
23:26:32.980786 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:32.980880 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.023581 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.023564 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.024598 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.024598 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.024858 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.024864 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.028048 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.028299 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.074061 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.074064 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.075089 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.075089 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.075415 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.075416 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.076415 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.076943 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.087140 [TEST] Disconnect 2
23:26:33.124488 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.124497 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.175069 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.175069 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.225747 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.225747 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.250423 [0] becomes Candidate (currentTerm=2); log=[]
23:26:33.250623 [0] election timer started (159ms), term=2
23:26:33.250591 [0] sending RequestVote to 1: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:33.250582 [0] sending RequestVote to 2: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:33.252870 [1] RequestVote: Term:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:33.252949 [1] ... term out of date in RequestVote
23:26:33.252972 [1] becomes Follower with term=2; log=[]
23:26:33.253209 [1] ... RequestVote reply: Term:2  VoteGranted:true
23:26:33.253322 [1] election timer started (179ms), term=2
23:26:33.255041 [0] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:33 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:33.255166 [0] wins election with 2 votes
23:26:33.255192 [0] becomes Leader; term=2, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:33.255288 [0] sending AppendEntries to 2: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.255381 [0] sending AppendEntries to 1: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.256954 [1] AppendEntries: Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.257262 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:33.258917 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:33.259458 [1] in election timer term changed from 1 to 2, bailing out
23:26:33.260955 [0] in election timer state=LEADER, bailing out
23:26:33.275991 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.275991 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.305603 [0] sending AppendEntries to 2: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.305511 [0] sending AppendEntries to 1: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.306734 [1] AppendEntries: Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.306996 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:33.309435 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:33.326273 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.326269 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.355677 [0] sending AppendEntries to 1: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.355724 [0] sending AppendEntries to 2: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.356814 [1] AppendEntries: Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.357272 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:33.359255 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:33.376616 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.376799 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.405888 [0] sending AppendEntries to 1: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.406088 [0] sending AppendEntries to 2: ni=0, args=Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.407111 [1] AppendEntries: Term:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.407358 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:33.408789 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:33.426906 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.426896 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.437948 [0] CM.Stop called
23:26:33.437986 [0] becomes Dead
23:26:33.438024 [0] commitChanSender done
23:26:33.438068 [0] Received quit signal. Shutting down...
23:26:33.438187 [0] CraftServer terminated!
23:26:33.438226 [1] CM.Stop called
23:26:33.438243 [1] becomes Dead
23:26:33.438271 [1] commitChanSender done
23:26:33.438319 [1] Received quit signal. Shutting down...
23:26:33.438379 [1] CraftServer terminated!
23:26:33.438411 [2] CM.Stop called
23:26:33.438436 [2] becomes Dead
23:26:33.438467 [2] commitChanSender done
23:26:33.438513 [2] Received quit signal. Shutting down...
23:26:33.438574 [2] CraftServer terminated!
--- PASS: TestElectionLeaderDisconnect (0.65s)
=== RUN   TestElectionLeaderAndAnotherDisconnect
23:26:33.439574 [0] listening at [::]:55642
23:26:33.439966 [1] listening at [::]:55643
23:26:33.440304 [2] listening at [::]:55644
23:26:33.440547 [2] election timer started (225ms), term=0
23:26:33.440568 [0] election timer started (242ms), term=0
23:26:33.440554 [1] election timer started (234ms), term=0
23:26:33.444208 [1] in election timer state=DEAD, bailing out
23:26:33.671707 [2] becomes Candidate (currentTerm=1); log=[]
23:26:33.671943 [2] election timer started (216ms), term=1
23:26:33.671892 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:33.671886 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:33.674212 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:33.674213 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:33.674309 [0] ... term out of date in RequestVote
23:26:33.674324 [1] ... term out of date in RequestVote
23:26:33.674333 [0] becomes Follower with term=1; log=[]
23:26:33.674346 [1] becomes Follower with term=1; log=[]
23:26:33.674584 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:33.674582 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:33.674689 [0] election timer started (252ms), term=1
23:26:33.674720 [1] election timer started (189ms), term=1
23:26:33.677460 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:33 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:33.677579 [2] wins election with 2 votes
23:26:33.677610 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:33.677681 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:33 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:33.677825 [2] while waiting for reply, state = LEADER
23:26:33.677879 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.677934 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.678602 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.678615 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.678817 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.678816 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.680339 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.680413 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.680735 [1] in election timer term changed from 0 to 1, bailing out
23:26:33.680750 [0] in election timer term changed from 0 to 1, bailing out
23:26:33.682439 [2] in election timer state=LEADER, bailing out
23:26:33.728271 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.728271 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.729611 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.729610 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.729996 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.730077 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:33.731218 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.732937 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:33.742050 [TEST] Disconnect 2
23:26:33.742396 [TEST] Disconnect 0
23:26:33.778633 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.778633 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.829035 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.829041 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.879469 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.879469 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.925927 [1] becomes Candidate (currentTerm=2); log=[]
23:26:33.926129 [1] election timer started (217ms), term=2
23:26:33.926119 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:33.926142 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:33.929946 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.929952 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.980478 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.980498 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:33.985394 [0] becomes Candidate (currentTerm=2); log=[]
23:26:33.985511 [0] election timer started (295ms), term=2
23:26:33.985496 [0] sending RequestVote to 1: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:33.985540 [0] sending RequestVote to 2: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.031012 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.031011 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.081705 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.081705 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.132395 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.132393 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.146633 [1] becomes Candidate (currentTerm=3); log=[]
23:26:34.146768 [1] election timer started (212ms), term=3
23:26:34.146785 [1] sending RequestVote to 2: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.146765 [1] sending RequestVote to 0: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.183115 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.183115 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.193225 [TEST] Reconnect 0
23:26:34.233437 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.233763 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.236439 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.236714 [0] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:34.238389 [2] term out of date in heartbeat reply
23:26:34.238415 [2] becomes Follower with term=2; log=[]
23:26:34.238493 [2] election timer started (242ms), term=2
23:26:34.285675 [0] becomes Candidate (currentTerm=3); log=[]
23:26:34.285850 [0] election timer started (251ms), term=3
23:26:34.285836 [0] sending RequestVote to 1: Term:3  LastLogIndex:-1  LastLogTerm:-1
23:26:34.285853 [0] sending RequestVote to 2: Term:3  LastLogIndex:-1  LastLogTerm:-1
23:26:34.287675 [1] RequestVote: Term:3  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=3, votedFor=1, log index/term=(-1, -1)]
23:26:34.287675 [2] RequestVote: Term:3  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=2, votedFor=-1, log index/term=(-1, -1)]
23:26:34.287824 [2] ... term out of date in RequestVote
23:26:34.287852 [2] becomes Follower with term=3; log=[]
23:26:34.288003 [1] ... RequestVote reply: Term:3
23:26:34.288120 [2] ... RequestVote reply: Term:3  VoteGranted:true
23:26:34.288317 [2] election timer started (230ms), term=3
23:26:34.289449 [2] in election timer term changed from 2 to 3, bailing out
23:26:34.291811 [0] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:34 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:34.292009 [0] wins election with 2 votes
23:26:34.292041 [0] becomes Leader; term=3, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:34.292112 [0] received RequestVoteReply &{Msg:Term:3 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:34 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:34.292218 [0] while waiting for reply, state = LEADER
23:26:34.292275 [0] sending AppendEntries to 2: ni=0, args=Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.292273 [0] sending AppendEntries to 1: ni=0, args=Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.293046 [1] AppendEntries: Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.293049 [2] AppendEntries: Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.293128 [1] becomes Follower with term=3; log=[]
23:26:34.293303 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.293326 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.294454 [1] election timer started (261ms), term=3
23:26:34.296003 [0] in election timer state=LEADER, bailing out
23:26:34.296163 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:34.296228 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:34.342800 [0] sending AppendEntries to 2: ni=0, args=Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.342817 [0] sending AppendEntries to 1: ni=0, args=Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.343871 [0] CM.Stop called
23:26:34.343903 [0] becomes Dead
23:26:34.343927 [0] commitChanSender done
23:26:34.343949 [1] AppendEntries: Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.344005 [0] Received quit signal. Shutting down...
23:26:34.343952 [2] AppendEntries: Term:3  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.344245 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.344372 [0] CraftServer terminated!
23:26:34.344407 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.344479 [1] CM.Stop called
23:26:34.344504 [1] becomes Dead
23:26:34.344533 [1] commitChanSender done
23:26:34.344623 [1] Received quit signal. Shutting down...
23:26:34.344721 [1] in election timer state=DEAD, bailing out
23:26:34.346907 [1] in election timer state=DEAD, bailing out
23:26:34.348143 [1] CraftServer terminated!
23:26:34.348190 [2] CM.Stop called
23:26:34.348210 [2] becomes Dead
23:26:34.348233 [2] commitChanSender done
23:26:34.348269 [2] Received quit signal. Shutting down...
23:26:34.348353 [2] CraftServer terminated!
23:26:34.348414 [2] in election timer state=DEAD, bailing out
--- PASS: TestElectionLeaderAndAnotherDisconnect (0.91s)
=== RUN   TestDisconnectAllThenRestore
23:26:34.349588 [0] listening at [::]:55650
23:26:34.350099 [1] listening at [::]:55651
23:26:34.350445 [2] listening at [::]:55652
23:26:34.350683 [2] election timer started (270ms), term=0
23:26:34.350670 [1] election timer started (224ms), term=0
23:26:34.350676 [0] election timer started (220ms), term=0
23:26:34.451807 [TEST] Disconnect 0
23:26:34.452179 [TEST] Disconnect 1
23:26:34.452318 [TEST] Disconnect 2
23:26:34.571886 [0] becomes Candidate (currentTerm=1); log=[]
23:26:34.572063 [0] election timer started (211ms), term=1
23:26:34.572185 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.572132 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.581086 [1] becomes Candidate (currentTerm=1); log=[]
23:26:34.581299 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.581511 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.581654 [1] election timer started (188ms), term=1
23:26:34.621842 [2] becomes Candidate (currentTerm=1); log=[]
23:26:34.622004 [2] election timer started (181ms), term=1
23:26:34.622009 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.622030 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.772799 [1] becomes Candidate (currentTerm=2); log=[]
23:26:34.772968 [1] election timer started (167ms), term=2
23:26:34.772985 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.772994 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.783230 [0] becomes Candidate (currentTerm=2); log=[]
23:26:34.783307 [0] election timer started (181ms), term=2
23:26:34.783300 [0] sending RequestVote to 2: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.783340 [0] sending RequestVote to 1: Term:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.803157 [2] becomes Candidate (currentTerm=2); log=[]
23:26:34.803231 [2] election timer started (179ms), term=2
23:26:34.803240 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.803233 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:34.903516 [TEST] Reconnect 0
23:26:34.903942 [TEST] Reconnect 1
23:26:34.904131 [TEST] Reconnect 2
23:26:34.944052 [1] becomes Candidate (currentTerm=3); log=[]
23:26:34.944190 [1] election timer started (168ms), term=3
23:26:34.944240 [1] sending RequestVote to 2: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.944162 [1] sending RequestVote to 0: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:34.945962 [0] RequestVote: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
23:26:34.945975 [2] RequestVote: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
23:26:34.946056 [0] ... term out of date in RequestVote
23:26:34.946072 [2] ... term out of date in RequestVote
23:26:34.946077 [0] becomes Follower with term=3; log=[]
23:26:34.946101 [2] becomes Follower with term=3; log=[]
23:26:34.946326 [2] ... RequestVote reply: Term:3  VoteGranted:true
23:26:34.946331 [0] ... RequestVote reply: Term:3  VoteGranted:true
23:26:34.946438 [2] election timer started (205ms), term=3
23:26:34.946496 [0] election timer started (177ms), term=3
23:26:34.949352 [1] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:34 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:34.949899 [1] wins election with 2 votes
23:26:34.949953 [1] becomes Leader; term=3, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:34.950062 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.950219 [1] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:34 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:34.950339 [1] while waiting for reply, state = LEADER
23:26:34.950376 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.950995 [2] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.951155 [0] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:34.951234 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.951990 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:34.953977 [0] in election timer term changed from 2 to 3, bailing out
23:26:34.954044 [2] in election timer term changed from 2 to 3, bailing out
23:26:34.954281 [1] in election timer state=LEADER, bailing out
23:26:34.954849 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:34.955506 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.000831 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.000907 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.001968 [2] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.001975 [0] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.002245 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:35.002244 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:35.003322 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.003873 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.051355 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.051356 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.052448 [0] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.052448 [2] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.052756 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:35.052777 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:35.054877 [0] CM.Stop called
23:26:35.054920 [0] becomes Dead
23:26:35.054962 [0] commitChanSender done
23:26:35.055022 [0] Received quit signal. Shutting down...
23:26:35.055195 [0] CraftServer terminated!
23:26:35.055242 [1] CM.Stop called
23:26:35.055238 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.055846 [1] becomes Dead
23:26:35.055892 [1] commitChanSender done
23:26:35.055933 [1] Received quit signal. Shutting down...
23:26:35.056013 [1] CraftServer terminated!
23:26:35.056051 [2] CM.Stop called
23:26:35.056072 [2] becomes Dead
23:26:35.056101 [2] commitChanSender done
23:26:35.056146 [2] Received quit signal. Shutting down...
23:26:35.056196 [2] CraftServer terminated!
--- PASS: TestDisconnectAllThenRestore (0.71s)
=== RUN   TestElectionLeaderDisconnectThenReconnect
23:26:35.056702 [0] in election timer state=DEAD, bailing out
23:26:35.056900 [2] in election timer state=DEAD, bailing out
23:26:35.057078 [0] listening at [::]:55655
23:26:35.057486 [1] listening at [::]:55656
23:26:35.057849 [2] listening at [::]:55657
23:26:35.058119 [1] election timer started (189ms), term=0
23:26:35.058131 [0] election timer started (219ms), term=0
23:26:35.058117 [2] election timer started (152ms), term=0
23:26:35.219318 [2] becomes Candidate (currentTerm=1); log=[]
23:26:35.219456 [2] election timer started (286ms), term=1
23:26:35.219437 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:35.219440 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:35.221297 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:35.221387 [0] ... term out of date in RequestVote
23:26:35.221297 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:35.221411 [0] becomes Follower with term=1; log=[]
23:26:35.221446 [1] ... term out of date in RequestVote
23:26:35.221471 [1] becomes Follower with term=1; log=[]
23:26:35.221652 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:35.221649 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:35.221742 [0] election timer started (269ms), term=1
23:26:35.221844 [1] election timer started (157ms), term=1
23:26:35.223404 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:35 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:35.223513 [2] wins election with 2 votes
23:26:35.223536 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:35.223596 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:35 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:35.223674 [2] while waiting for reply, state = LEADER
23:26:35.223738 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.223729 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.224281 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.224296 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.224461 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.224475 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.227055 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.227120 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.228415 [1] in election timer term changed from 0 to 1, bailing out
23:26:35.228443 [0] in election timer term changed from 0 to 1, bailing out
23:26:35.229737 [2] in election timer state=LEADER, bailing out
23:26:35.273947 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.273944 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.275047 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.275047 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.275364 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.275363 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.277086 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.277160 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.324163 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.324157 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.325712 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.325712 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.326121 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.326132 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:35.327972 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.328044 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:35.360222 [TEST] Disconnect 2
23:26:35.374347 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.374329 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.424589 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.424593 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.474836 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.474836 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.492900 [1] becomes Candidate (currentTerm=2); log=[]
23:26:35.493002 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:35.493018 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:35.493101 [1] election timer started (282ms), term=2
23:26:35.494682 [0] RequestVote: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:35.494765 [0] ... term out of date in RequestVote
23:26:35.494782 [0] becomes Follower with term=2; log=[]
23:26:35.494997 [0] ... RequestVote reply: Term:2  VoteGranted:true
23:26:35.495087 [0] election timer started (244ms), term=2
23:26:35.497914 [1] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:35 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:35.498079 [1] wins election with 2 votes
23:26:35.498112 [1] becomes Leader; term=2, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:35.498220 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.498235 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.498954 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.499173 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.500554 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.502049 [0] in election timer term changed from 1 to 2, bailing out
23:26:35.503373 [1] in election timer state=LEADER, bailing out
23:26:35.525894 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.525908 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.548604 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.548604 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.549557 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.549849 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.551453 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.576273 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.576252 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.598923 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.598929 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.599753 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.600014 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.600778 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.626466 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.626668 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.649336 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.649324 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.650377 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.650618 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.651438 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.676411 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.676419 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.699824 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.699825 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.700363 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.700477 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.701127 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.711298 [TEST] Reconnect 2
23:26:35.726468 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.726477 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.727252 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.727253 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.727359 [0] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:35.727374 [1] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:35.727754 [2] term out of date in heartbeat reply
23:26:35.727771 [2] becomes Follower with term=2; log=[]
23:26:35.727797 [2] election timer started (237ms), term=2
23:26:35.750070 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.750078 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.750516 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.750636 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.751117 [2] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.751666 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.751981 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.752581 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.800334 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.800349 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.800817 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.800843 [2] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.800976 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.801013 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.801556 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.801934 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.850730 [1] sending AppendEntries to 2: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.850724 [1] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.851540 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.851539 [2] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:35.851784 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.851784 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:35.852585 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.854040 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:35.862249 [0] CM.Stop called
23:26:35.862291 [0] becomes Dead
23:26:35.862330 [0] commitChanSender done
23:26:35.862394 [0] Received quit signal. Shutting down...
23:26:35.862529 [0] CraftServer terminated!
23:26:35.862569 [1] CM.Stop called
23:26:35.862599 [1] becomes Dead
23:26:35.862634 [1] commitChanSender done
23:26:35.862679 [1] Received quit signal. Shutting down...
23:26:35.862763 [1] CraftServer terminated!
23:26:35.862805 [2] CM.Stop called
23:26:35.862838 [2] becomes Dead
23:26:35.862873 [2] commitChanSender done
23:26:35.862931 [2] Received quit signal. Shutting down...
23:26:35.862996 [2] CraftServer terminated!
--- PASS: TestElectionLeaderDisconnectThenReconnect (0.81s)
=== RUN   TestElectionLeaderDisconnectThenReconnect5
23:26:35.864361 [0] listening at [::]:55664
23:26:35.864749 [1] listening at [::]:55665
23:26:35.865048 [2] listening at [::]:55666
23:26:35.865336 [3] listening at [::]:55667
23:26:35.865413 [0] in election timer state=DEAD, bailing out
23:26:35.865670 [4] listening at [::]:55668
23:26:35.866219 [0] election timer started (240ms), term=0
23:26:35.866232 [3] election timer started (270ms), term=0
23:26:35.866242 [4] election timer started (249ms), term=0
23:26:35.866244 [2] election timer started (160ms), term=0
23:26:35.866276 [1] election timer started (159ms), term=0
23:26:35.868147 [2] in election timer state=DEAD, bailing out
23:26:36.027406 [2] becomes Candidate (currentTerm=1); log=[]
23:26:36.027429 [1] becomes Candidate (currentTerm=1); log=[]
23:26:36.027633 [2] sending RequestVote to 3: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.027857 [2] sending RequestVote to 4: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.028056 [2] election timer started (210ms), term=1
23:26:36.028163 [1] sending RequestVote to 4: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.028139 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.028552 [1] election timer started (150ms), term=1
23:26:36.028655 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.028986 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.029270 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.027693 [1] sending RequestVote to 3: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.030153 [4] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:36.030229 [4] ... term out of date in RequestVote
23:26:36.030250 [4] becomes Follower with term=1; log=[]
23:26:36.030466 [4] ... RequestVote reply: Term:1  VoteGranted:true
23:26:36.030781 [3] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:36.031047 [3] ... term out of date in RequestVote
23:26:36.031256 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:36.032106 [2] ... RequestVote reply: Term:1
23:26:36.031067 [3] becomes Follower with term=1; log=[]
23:26:36.032248 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:36.032327 [0] ... term out of date in RequestVote
23:26:36.032345 [0] becomes Follower with term=1; log=[]
23:26:36.032413 [3] ... RequestVote reply: Term:1  VoteGranted:true
23:26:36.032459 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.032504 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:36.032672 [1] ... RequestVote reply: Term:1
23:26:36.036306 [4] in election timer term changed from 0 to 1, bailing out
23:26:36.036354 [0] election timer started (209ms), term=1
23:26:36.036418 [4] election timer started (219ms), term=1
23:26:36.036473 [3] election timer started (298ms), term=1
23:26:36.036720 [3] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.036935 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.037034 [3] ... RequestVote reply: Term:1
23:26:36.037116 [0] ... RequestVote reply: Term:1
23:26:36.037854 [0] in election timer term changed from 0 to 1, bailing out
23:26:36.038244 [3] in election timer term changed from 0 to 1, bailing out
23:26:36.038724 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.038971 [4] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.039821 [4] ... RequestVote reply: Term:1
23:26:36.039286 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.040808 [1] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.040821 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.041314 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.041636 [1] wins election with 3 votes
23:26:36.041374 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.041669 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0 3:0 4:0], matchIndex=map[0:-1 2:-1 3:-1 4:-1]; log=[]
23:26:36.042283 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.042270 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.042392 [1] while waiting for reply, state = LEADER
23:26:36.042458 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.042470 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.042491 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.042568 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.043098 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.043142 [3] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.043188 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.043279 [2] becomes Follower with term=1; log=[]
23:26:36.043318 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.043334 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.043368 [4] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.043528 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.043607 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.043666 [2] election timer started (150ms), term=1
23:26:36.044801 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.044886 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.045008 [1] AppendEntries reply from 4 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.045088 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.048695 [1] in election timer state=LEADER, bailing out
23:26:36.093144 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.093135 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.093138 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.094210 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.094235 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.094155 [3] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.094506 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.095132 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.095612 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.093135 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.097757 [4] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.098018 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.097910 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.098327 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.098478 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.099416 [1] AppendEntries reply from 4 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.143780 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.143909 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.143780 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.143794 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.145108 [3] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.145370 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.145933 [4] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.146096 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.146270 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.146379 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.146519 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.147449 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.148095 [1] AppendEntries reply from 4 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.148182 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.148867 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.148946 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.167557 [TEST] Disconnect 1
23:26:36.194852 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.194769 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.194963 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.194983 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.244673 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.244673 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.244692 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.244715 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.294748 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.294751 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.294783 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.294796 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.304436 [2] becomes Candidate (currentTerm=2); log=[]
23:26:36.304474 [2] sending RequestVote to 4: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.304483 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.304525 [2] sending RequestVote to 3: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.304556 [2] election timer started (177ms), term=2
23:26:36.304476 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:36.304953 [4] RequestVote: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.305001 [4] ... term out of date in RequestVote
23:26:36.305013 [4] becomes Follower with term=2; log=[]
23:26:36.305079 [3] RequestVote: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.305084 [0] RequestVote: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
23:26:36.305125 [3] ... term out of date in RequestVote
23:26:36.305130 [0] ... term out of date in RequestVote
23:26:36.305140 [3] becomes Follower with term=2; log=[]
23:26:36.305129 [4] ... RequestVote reply: Term:2  VoteGranted:true
23:26:36.305166 [0] becomes Follower with term=2; log=[]
23:26:36.305260 [3] ... RequestVote reply: Term:2  VoteGranted:true
23:26:36.305304 [3] election timer started (238ms), term=2
23:26:36.305299 [0] ... RequestVote reply: Term:2  VoteGranted:true
23:26:36.305325 [4] election timer started (179ms), term=2
23:26:36.305767 [0] election timer started (177ms), term=2
23:26:36.306683 [0] in election timer term changed from 1 to 2, bailing out
23:26:36.306716 [4] in election timer term changed from 1 to 2, bailing out
23:26:36.306733 [3] in election timer term changed from 1 to 2, bailing out
23:26:36.306921 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.306999 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.307050 [2] wins election with 3 votes
23:26:36.307067 [2] becomes Leader; term=2, nextIndex=map[0:0 1:0 3:0 4:0], matchIndex=map[0:-1 1:-1 3:-1 4:-1]; log=[]
23:26:36.307134 [2] sending AppendEntries to 4: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307155 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.307251 [2] while waiting for reply, state = LEADER
23:26:36.307278 [2] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307297 [2] sending AppendEntries to 1: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307327 [2] sending AppendEntries to 3: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307479 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307592 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.307590 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307707 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.307699 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.307816 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.308492 [2] in election timer state=LEADER, bailing out
23:26:36.309123 [2] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.309173 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.309217 [2] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.315366 [2] in election timer state=LEADER, bailing out
23:26:36.318135 [TEST] Reconnect 1
23:26:36.345836 [1] sending AppendEntries to 4: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.345844 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.345853 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.345879 [1] sending AppendEntries to 3: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.346701 [4] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.346701 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.346771 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.346843 [4] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:36.346862 [3] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.346907 [0] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:36.346930 [2] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:36.347011 [3] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:36.347383 [1] term out of date in heartbeat reply
23:26:36.347402 [1] becomes Follower with term=2; log=[]
23:26:36.347434 [1] election timer started (186ms), term=2
23:26:36.357313 [2] sending AppendEntries to 1: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357327 [2] sending AppendEntries to 3: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357347 [2] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357372 [2] sending AppendEntries to 4: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357731 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357742 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357762 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.357869 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.357875 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.357893 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.358427 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.358773 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.359881 [2] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.360118 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.360378 [2] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.360640 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.407499 [2] sending AppendEntries to 4: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.407508 [2] sending AppendEntries to 1: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.407538 [2] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.407563 [2] sending AppendEntries to 3: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.408084 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.408104 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.408089 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.408126 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.408290 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.408350 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.408364 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.408292 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.409076 [2] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.409512 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.409602 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.409681 [2] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.457746 [2] sending AppendEntries to 4: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.457730 [2] sending AppendEntries to 0: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.457711 [2] sending AppendEntries to 1: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.457711 [2] sending AppendEntries to 3: ni=0, args=Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.458528 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.458549 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.458556 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.458610 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.458746 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.458746 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.458748 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.458779 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:36.460781 [2] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.461280 [2] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.461360 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.461448 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 3:0 4:0], matchIndex := map[0:-1 1:-1 3:-1 4:-1]; commitIndex := -1
23:26:36.469258 [0] CM.Stop called
23:26:36.469287 [0] becomes Dead
23:26:36.469308 [0] commitChanSender done
23:26:36.469359 [0] Received quit signal. Shutting down...
23:26:36.469436 [0] CraftServer terminated!
23:26:36.469474 [1] CM.Stop called
23:26:36.469491 [1] becomes Dead
23:26:36.469514 [1] commitChanSender done
23:26:36.469552 [1] Received quit signal. Shutting down...
23:26:36.469619 [1] CraftServer terminated!
23:26:36.469648 [2] CM.Stop called
23:26:36.469663 [2] becomes Dead
23:26:36.469688 [2] commitChanSender done
23:26:36.469740 [2] Received quit signal. Shutting down...
23:26:36.469794 [2] CraftServer terminated!
23:26:36.469818 [3] CM.Stop called
23:26:36.469839 [3] becomes Dead
23:26:36.469860 [3] commitChanSender done
23:26:36.469898 [3] Received quit signal. Shutting down...
23:26:36.469944 [3] CraftServer terminated!
23:26:36.469973 [4] CM.Stop called
23:26:36.469990 [4] becomes Dead
23:26:36.470018 [4] commitChanSender done
23:26:36.470089 [4] Received quit signal. Shutting down...
23:26:36.470192 [4] CraftServer terminated!
23:26:36.476199 [4] in election timer state=DEAD, bailing out
23:26:36.476212 [3] in election timer state=DEAD, bailing out
23:26:36.476225 [0] in election timer state=DEAD, bailing out
23:26:36.477663 [1] in election timer state=DEAD, bailing out
--- PASS: TestElectionLeaderDisconnectThenReconnect5 (0.66s)
=== RUN   TestElectionFollowerComesBack
23:26:36.524014 [0] listening at [::]:55682
23:26:36.524705 [1] listening at [::]:55683
23:26:36.525094 [2] listening at [::]:55684
23:26:36.525359 [2] election timer started (173ms), term=0
23:26:36.525353 [1] election timer started (207ms), term=0
23:26:36.525358 [0] election timer started (164ms), term=0
23:26:36.696569 [0] becomes Candidate (currentTerm=1); log=[]
23:26:36.696723 [0] election timer started (211ms), term=1
23:26:36.696748 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.696735 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:36.699181 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:36.699180 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:36.699333 [2] ... term out of date in RequestVote
23:26:36.699378 [1] ... term out of date in RequestVote
23:26:36.699405 [2] becomes Follower with term=1; log=[]
23:26:36.699423 [1] becomes Follower with term=1; log=[]
23:26:36.699788 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:36.699789 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:36.699924 [1] election timer started (199ms), term=1
23:26:36.700000 [2] election timer started (196ms), term=1
23:26:36.701657 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.701780 [0] wins election with 2 votes
23:26:36.701810 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:36.701885 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:36 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:36.701975 [0] while waiting for reply, state = LEADER
23:26:36.702075 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.702029 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.702940 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.702937 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.703178 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.703185 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.705513 [1] in election timer term changed from 0 to 1, bailing out
23:26:36.705604 [2] in election timer term changed from 0 to 1, bailing out
23:26:36.706234 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.706312 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.706995 [0] in election timer state=LEADER, bailing out
23:26:36.752300 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.752318 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.753698 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.753698 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.754121 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.754160 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.756914 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.757300 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.802532 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.802512 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.803984 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.804096 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.804507 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.804719 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.805931 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.806695 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.826489 [TEST] Disconnect 1
23:26:36.852744 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.852757 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.854090 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.854541 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.857397 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.903013 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.903605 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.904716 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.905082 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.905929 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:36.953430 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.955108 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.955801 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:36.956051 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:36.956721 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.003712 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.003711 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.005272 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.005667 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.006717 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.010128 [1] becomes Candidate (currentTerm=2); log=[]
23:26:37.010217 [1] election timer started (228ms), term=2
23:26:37.010229 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.010257 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.054046 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.054039 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.054836 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.055244 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.058949 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.104530 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.104530 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.106256 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.106907 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.108519 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.154883 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.154889 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.155946 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.156191 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.158008 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.205937 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.205937 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.207104 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.207323 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.208046 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.241029 [1] becomes Candidate (currentTerm=3); log=[]
23:26:37.241248 [1] election timer started (223ms), term=3
23:26:37.241233 [1] sending RequestVote to 0: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.241265 [1] sending RequestVote to 2: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.256358 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.256358 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.257474 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.257758 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.258645 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.307068 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.307068 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.308776 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.309185 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.311025 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.357147 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.357147 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.358585 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.359060 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.361863 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.407843 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.407853 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.409328 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.409615 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.411662 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.458771 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.458777 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.460469 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.460921 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.463068 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.471490 [1] becomes Candidate (currentTerm=4); log=[]
23:26:37.471762 [1] election timer started (291ms), term=4
23:26:37.471621 [1] sending RequestVote to 0: Term:4  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.471626 [1] sending RequestVote to 2: Term:4  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:37.477760 [TEST] Reconnect 1
23:26:37.509744 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.509740 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.511413 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.511781 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:37.511932 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.512238 [1] AppendEntries reply: Term:4 Success:%!d(bool=false)
23:26:37.515960 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.516154 [0] term out of date in heartbeat reply
23:26:37.516175 [0] becomes Follower with term=4; log=[]
23:26:37.516218 [0] election timer started (220ms), term=4
23:26:37.710586 [2] becomes Candidate (currentTerm=2); log=[]
23:26:37.710846 [2] election timer started (236ms), term=2
23:26:37.710873 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:37.710850 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:37.713212 [1] RequestVote: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=4, votedFor=1, log index/term=(-1, -1)]
23:26:37.713215 [0] RequestVote: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=4, votedFor=-1, log index/term=(-1, -1)]
23:26:37.713821 [0] ... RequestVote reply: Term:4
23:26:37.713859 [1] ... RequestVote reply: Term:4
23:26:37.716146 [2] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:37 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:37.716258 [2] term out of date in RequestVoteReply
23:26:37.716279 [2] becomes Follower with term=4; log=[]
23:26:37.716320 [2] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:37 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:37.716404 [2] while waiting for reply, state = FOLLOWER
23:26:37.716518 [2] election timer started (227ms), term=4
23:26:37.721607 [2] in election timer term changed from 2 to 4, bailing out
23:26:37.736906 [0] becomes Candidate (currentTerm=5); log=[]
23:26:37.737088 [0] election timer started (216ms), term=5
23:26:37.737142 [0] sending RequestVote to 1: Term:5  LastLogIndex:-1  LastLogTerm:-1
23:26:37.737188 [0] sending RequestVote to 2: Term:5  LastLogIndex:-1  LastLogTerm:-1
23:26:37.741395 [1] RequestVote: Term:5  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=4, votedFor=1, log index/term=(-1, -1)]
23:26:37.741504 [1] ... term out of date in RequestVote
23:26:37.741531 [1] becomes Follower with term=5; log=[]
23:26:37.741535 [2] RequestVote: Term:5  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=4, votedFor=-1, log index/term=(-1, -1)]
23:26:37.741610 [2] ... term out of date in RequestVote
23:26:37.741630 [2] becomes Follower with term=5; log=[]
23:26:37.741731 [1] ... RequestVote reply: Term:5  VoteGranted:true
23:26:37.741784 [2] ... RequestVote reply: Term:5  VoteGranted:true
23:26:37.741853 [1] election timer started (255ms), term=5
23:26:37.741957 [1] in election timer term changed from 4 to 5, bailing out
23:26:37.742098 [2] election timer started (296ms), term=5
23:26:37.745191 [0] received RequestVoteReply &{Msg:Term:5  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:37 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:37.745762 [0] wins election with 2 votes
23:26:37.745787 [0] becomes Leader; term=5, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:37.745858 [0] received RequestVoteReply &{Msg:Term:5  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:37 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:37.745970 [0] while waiting for reply, state = LEADER
23:26:37.746057 [0] sending AppendEntries to 1: ni=0, args=Term:5  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.746042 [0] sending AppendEntries to 2: ni=0, args=Term:5  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.746636 [2] in election timer term changed from 4 to 5, bailing out
23:26:37.746727 [1] AppendEntries: Term:5  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.746744 [2] AppendEntries: Term:5  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:37.746941 [1] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:37.746955 [2] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:37.748011 [0] in election timer state=LEADER, bailing out
23:26:37.749356 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.749624 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:37.780101 [0] CM.Stop called
23:26:37.780173 [0] becomes Dead
23:26:37.780250 [0] commitChanSender done
23:26:37.780331 [0] Received quit signal. Shutting down...
23:26:37.780531 [0] CraftServer terminated!
23:26:37.780602 [1] CM.Stop called
23:26:37.780642 [1] becomes Dead
23:26:37.780694 [1] commitChanSender done
23:26:37.780773 [1] Received quit signal. Shutting down...
23:26:37.780902 [1] CraftServer terminated!
23:26:37.780981 [2] CM.Stop called
23:26:37.781027 [2] becomes Dead
23:26:37.781086 [2] commitChanSender done
23:26:37.781148 [2] Received quit signal. Shutting down...
23:26:37.781259 [2] CraftServer terminated!
23:26:37.782035 [1] in election timer state=DEAD, bailing out
23:26:37.782195 [2] in election timer state=DEAD, bailing out
--- PASS: TestElectionFollowerComesBack (1.31s)
=== RUN   TestElectionDisconnectLoop
23:26:37.836559 [0] listening at [::]:55692
23:26:37.836941 [1] listening at [::]:55693
23:26:37.837309 [2] listening at [::]:55694
23:26:37.837598 [1] election timer started (237ms), term=0
23:26:37.837589 [0] election timer started (168ms), term=0
23:26:37.837589 [2] election timer started (186ms), term=0
23:26:38.008857 [0] becomes Candidate (currentTerm=1); log=[]
23:26:38.009002 [0] election timer started (205ms), term=1
23:26:38.009004 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.008995 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.011160 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:38.011262 [2] ... term out of date in RequestVote
23:26:38.011164 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:38.011282 [2] becomes Follower with term=1; log=[]
23:26:38.011302 [1] ... term out of date in RequestVote
23:26:38.011327 [1] becomes Follower with term=1; log=[]
23:26:38.011503 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:38.011504 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:38.011597 [1] election timer started (158ms), term=1
23:26:38.011637 [2] election timer started (274ms), term=1
23:26:38.015495 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.015917 [0] wins election with 2 votes
23:26:38.015938 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:38.016152 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.016186 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.017485 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.017587 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.017691 [0] while waiting for reply, state = LEADER
23:26:38.017802 [1] in election timer term changed from 0 to 1, bailing out
23:26:38.017981 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.018008 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.018096 [2] in election timer term changed from 0 to 1, bailing out
23:26:38.018175 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.019233 [0] in election timer state=LEADER, bailing out
23:26:38.020145 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.020452 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.066829 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.066831 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.067795 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.067795 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.068011 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.068010 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.069594 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.069739 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.117512 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.117460 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.119063 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.119128 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.119399 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.119430 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:38.121221 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.121640 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:38.139662 [TEST] Disconnect 0
23:26:38.140368 [TEST] Disconnect 1
23:26:38.168073 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.168073 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.218839 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.218839 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.269665 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.269665 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.282887 [1] becomes Candidate (currentTerm=2); log=[]
23:26:38.283134 [1] election timer started (262ms), term=2
23:26:38.283135 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.283206 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.320531 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.320548 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.371492 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.371492 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.402821 [2] becomes Candidate (currentTerm=2); log=[]
23:26:38.403127 [2] election timer started (153ms), term=2
23:26:38.403029 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.403006 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.422260 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.422245 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.451404 [TEST] Reconnect 1
23:26:38.451855 [TEST] Reconnect 0
23:26:38.472808 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.472562 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.474802 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.474802 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.475031 [2] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:38.475028 [1] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:38.475768 [0] term out of date in heartbeat reply
23:26:38.475792 [0] becomes Follower with term=2; log=[]
23:26:38.475835 [0] election timer started (163ms), term=2
23:26:38.554171 [1] becomes Candidate (currentTerm=3); log=[]
23:26:38.554284 [1] election timer started (288ms), term=3
23:26:38.554268 [1] sending RequestVote to 0: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.554279 [1] sending RequestVote to 2: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:38.556003 [0] RequestVote: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=2, votedFor=-1, log index/term=(-1, -1)]
23:26:38.556003 [2] RequestVote: Term:3  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
23:26:38.556146 [0] ... term out of date in RequestVote
23:26:38.556178 [2] ... term out of date in RequestVote
23:26:38.556215 [2] becomes Follower with term=3; log=[]
23:26:38.556212 [0] becomes Follower with term=3; log=[]
23:26:38.556504 [0] ... RequestVote reply: Term:3  VoteGranted:true
23:26:38.556495 [2] ... RequestVote reply: Term:3  VoteGranted:true
23:26:38.556595 [0] election timer started (297ms), term=3
23:26:38.556666 [2] election timer started (201ms), term=3
23:26:38.558226 [1] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.558396 [1] wins election with 2 votes
23:26:38.559070 [1] becomes Leader; term=3, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:38.559181 [1] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.559326 [1] while waiting for reply, state = LEADER
23:26:38.559387 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.559507 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.560169 [2] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.560169 [0] AppendEntries: Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.560405 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:38.560428 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:38.563272 [2] in election timer term changed from 2 to 3, bailing out
23:26:38.563263 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:38.563339 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:38.564505 [1] in election timer state=LEADER, bailing out
23:26:38.566144 [0] in election timer term changed from 2 to 3, bailing out
23:26:38.602727 [TEST] Disconnect 1
23:26:38.603719 [TEST] Disconnect 2
23:26:38.610458 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.610491 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.660905 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.660905 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.711350 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.711350 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.761901 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.761901 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.767365 [2] becomes Candidate (currentTerm=4); log=[]
23:26:38.767557 [2] election timer started (178ms), term=4
23:26:38.767550 [2] sending RequestVote to 0: Term:4  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.767603 [2] sending RequestVote to 1: Term:4  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.812547 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.813041 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.857762 [0] becomes Candidate (currentTerm=4); log=[]
23:26:38.857972 [0] election timer started (203ms), term=4
23:26:38.857953 [0] sending RequestVote to 2: Term:4  LastLogIndex:-1  LastLogTerm:-1
23:26:38.857972 [0] sending RequestVote to 1: Term:4  LastLogIndex:-1  LastLogTerm:-1
23:26:38.863252 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.863192 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.913704 [1] sending AppendEntries to 0: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.913899 [1] sending AppendEntries to 2: ni=0, args=Term:3  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.913984 [TEST] Reconnect 2
23:26:38.914426 [TEST] Reconnect 1
23:26:38.948786 [2] becomes Candidate (currentTerm=5); log=[]
23:26:38.948957 [2] election timer started (286ms), term=5
23:26:38.948977 [2] sending RequestVote to 1: Term:5  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.948957 [2] sending RequestVote to 0: Term:5  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:38.951164 [1] RequestVote: Term:5  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=3, votedFor=1, log index/term=(-1, -1)]
23:26:38.951163 [0] RequestVote: Term:5  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=4, votedFor=0, log index/term=(-1, -1)]
23:26:38.951310 [1] ... term out of date in RequestVote
23:26:38.951359 [0] ... term out of date in RequestVote
23:26:38.951424 [1] becomes Follower with term=5; log=[]
23:26:38.951456 [0] becomes Follower with term=5; log=[]
23:26:38.951771 [0] ... RequestVote reply: Term:5  VoteGranted:true
23:26:38.951772 [1] ... RequestVote reply: Term:5  VoteGranted:true
23:26:38.951923 [0] election timer started (243ms), term=5
23:26:38.952018 [1] election timer started (215ms), term=5
23:26:38.954443 [2] received RequestVoteReply &{Msg:Term:5  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.954559 [2] wins election with 2 votes
23:26:38.954589 [2] becomes Leader; term=5, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:38.954657 [2] received RequestVoteReply &{Msg:Term:5  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:38 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:38.954744 [2] while waiting for reply, state = LEADER
23:26:38.954819 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.954805 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.955588 [1] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.955662 [0] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:38.955805 [1] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:38.955867 [0] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:38.956621 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:38.957036 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:38.958297 [0] in election timer term changed from 4 to 5, bailing out
23:26:38.959201 [2] in election timer state=LEADER, bailing out
23:26:39.005271 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.005223 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.006439 [1] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.006433 [0] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.006680 [0] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:39.006682 [1] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:39.009025 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:39.009572 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:39.055620 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.055629 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.056653 [1] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.056653 [0] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.056886 [1] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:39.056892 [0] AppendEntries reply: Term:5 Success:%!d(bool=true)
23:26:39.058257 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:39.058822 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:39.064956 [TEST] Disconnect 2
23:26:39.065475 [TEST] Disconnect 0
23:26:39.106036 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.106035 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.156237 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.156237 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.206801 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.206784 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.257256 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.257257 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.273216 [1] becomes Candidate (currentTerm=6); log=[]
23:26:39.273377 [1] election timer started (266ms), term=6
23:26:39.273378 [1] sending RequestVote to 0: Term:6  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:39.273451 [1] sending RequestVote to 2: Term:6  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:39.302865 [0] becomes Candidate (currentTerm=6); log=[]
23:26:39.303541 [0] election timer started (225ms), term=6
23:26:39.303442 [0] sending RequestVote to 2: Term:6  LastLogIndex:-1  LastLogTerm:-1
23:26:39.303387 [0] sending RequestVote to 1: Term:6  LastLogIndex:-1  LastLogTerm:-1
23:26:39.307893 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.307892 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.357971 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.357971 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.375882 [TEST] Reconnect 0
23:26:39.376103 [TEST] Reconnect 2
23:26:39.408374 [2] sending AppendEntries to 1: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.408374 [2] sending AppendEntries to 0: ni=0, args=Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.409675 [1] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.409675 [0] AppendEntries: Term:5  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.410056 [1] AppendEntries reply: Term:6 Success:%!d(bool=false)
23:26:39.410062 [0] AppendEntries reply: Term:6 Success:%!d(bool=false)
23:26:39.411167 [2] term out of date in heartbeat reply
23:26:39.411190 [2] becomes Follower with term=6; log=[]
23:26:39.411235 [2] election timer started (182ms), term=6
23:26:39.533745 [0] becomes Candidate (currentTerm=7); log=[]
23:26:39.533872 [0] sending RequestVote to 1: Term:7  LastLogIndex:-1  LastLogTerm:-1
23:26:39.534047 [0] sending RequestVote to 2: Term:7  LastLogIndex:-1  LastLogTerm:-1
23:26:39.534474 [0] election timer started (169ms), term=7
23:26:39.536004 [2] RequestVote: Term:7  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=6, votedFor=-1, log index/term=(-1, -1)]
23:26:39.536065 [2] ... term out of date in RequestVote
23:26:39.536032 [1] RequestVote: Term:7  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=6, votedFor=1, log index/term=(-1, -1)]
23:26:39.536081 [2] becomes Follower with term=7; log=[]
23:26:39.536087 [1] ... term out of date in RequestVote
23:26:39.536119 [1] becomes Follower with term=7; log=[]
23:26:39.536249 [1] ... RequestVote reply: Term:7  VoteGranted:true
23:26:39.536248 [2] ... RequestVote reply: Term:7  VoteGranted:true
23:26:39.536347 [2] election timer started (156ms), term=7
23:26:39.536473 [1] election timer started (207ms), term=7
23:26:39.536968 [0] received RequestVoteReply &{Msg:Term:7  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:39 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:39.537060 [0] wins election with 2 votes
23:26:39.537085 [0] becomes Leader; term=7, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:39.537160 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.537162 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.537631 [0] received RequestVoteReply &{Msg:Term:7  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:39 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:39.537737 [0] while waiting for reply, state = LEADER
23:26:39.537854 [1] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.537979 [2] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.538331 [1] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.538403 [2] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.540990 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.541366 [2] in election timer term changed from 6 to 7, bailing out
23:26:39.541359 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.543788 [1] in election timer term changed from 6 to 7, bailing out
23:26:39.544751 [0] in election timer state=LEADER, bailing out
23:26:39.587583 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.587620 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.588521 [1] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.588532 [2] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.588917 [2] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.588941 [1] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.590018 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.590624 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.637784 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.637830 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.638845 [2] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.638854 [1] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.639300 [2] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.639405 [1] AppendEntries reply: Term:7 Success:%!d(bool=true)
23:26:39.641631 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.642211 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:39.677598 [TEST] Disconnect 0
23:26:39.678376 [TEST] Disconnect 1
23:26:39.687762 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.687769 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.737854 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.737899 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.787943 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.787937 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.797513 [2] becomes Candidate (currentTerm=8); log=[]
23:26:39.797631 [2] election timer started (221ms), term=8
23:26:39.797690 [2] sending RequestVote to 1: Term:8  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:39.797632 [2] sending RequestVote to 0: Term:8  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:39.838060 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.838060 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.847615 [1] becomes Candidate (currentTerm=8); log=[]
23:26:39.847765 [1] sending RequestVote to 0: Term:8  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:39.847834 [1] election timer started (267ms), term=8
23:26:39.847756 [1] sending RequestVote to 2: Term:8  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:39.888887 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.888887 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.938993 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.938973 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.988864 [TEST] Reconnect 1
23:26:39.988977 [0] sending AppendEntries to 1: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.988977 [0] sending AppendEntries to 2: ni=0, args=Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.989307 [TEST] Reconnect 0
23:26:39.991417 [1] AppendEntries: Term:7  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:39.991714 [1] AppendEntries reply: Term:8 Success:%!d(bool=false)
23:26:39.993286 [0] term out of date in heartbeat reply
23:26:39.993307 [0] becomes Follower with term=8; log=[]
23:26:39.993347 [0] election timer started (164ms), term=8
23:26:40.028194 [2] becomes Candidate (currentTerm=9); log=[]
23:26:40.028301 [2] election timer started (163ms), term=9
23:26:40.028286 [2] sending RequestVote to 1: Term:9  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:40.028295 [2] sending RequestVote to 0: Term:9  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:40.030226 [0] RequestVote: Term:9  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=8, votedFor=-1, log index/term=(-1, -1)]
23:26:40.030226 [1] RequestVote: Term:9  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=8, votedFor=1, log index/term=(-1, -1)]
23:26:40.030388 [1] ... term out of date in RequestVote
23:26:40.030409 [0] ... term out of date in RequestVote
23:26:40.030481 [0] becomes Follower with term=9; log=[]
23:26:40.030424 [1] becomes Follower with term=9; log=[]
23:26:40.030842 [1] ... RequestVote reply: Term:9  VoteGranted:true
23:26:40.030913 [0] ... RequestVote reply: Term:9  VoteGranted:true
23:26:40.031068 [0] election timer started (266ms), term=9
23:26:40.031183 [1] election timer started (216ms), term=9
23:26:40.033408 [0] in election timer term changed from 8 to 9, bailing out
23:26:40.033633 [2] received RequestVoteReply &{Msg:Term:9  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:40 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:40.033758 [2] wins election with 2 votes
23:26:40.033788 [2] becomes Leader; term=9, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:40.033847 [2] received RequestVoteReply &{Msg:Term:9  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:40 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:40.033919 [2] while waiting for reply, state = LEADER
23:26:40.033971 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.033973 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.034820 [0] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.034820 [1] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.035048 [1] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.035063 [0] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.037260 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.037338 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.038117 [1] in election timer term changed from 8 to 9, bailing out
23:26:40.038411 [2] in election timer state=LEADER, bailing out
23:26:40.084339 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.084318 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.086280 [1] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.086282 [0] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.086693 [1] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.086708 [0] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.088711 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.088783 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.134626 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.134620 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.136388 [1] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.136388 [0] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.137325 [1] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.137331 [0] AppendEntries reply: Term:9 Success:%!d(bool=true)
23:26:40.138474 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.138999 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.139590 [TEST] Disconnect 2
23:26:40.139838 [TEST] Disconnect 0
23:26:40.185026 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.185026 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.235366 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.235366 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.285918 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.285924 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.336387 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.336387 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.362332 [1] becomes Candidate (currentTerm=10); log=[]
23:26:40.362612 [1] election timer started (299ms), term=10
23:26:40.362605 [1] sending RequestVote to 2: Term:10  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:40.362631 [1] sending RequestVote to 0: Term:10  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:40.387043 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.387045 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.412283 [0] becomes Candidate (currentTerm=10); log=[]
23:26:40.412509 [0] election timer started (289ms), term=10
23:26:40.412526 [0] sending RequestVote to 2: Term:10  LastLogIndex:-1  LastLogTerm:-1
23:26:40.412502 [0] sending RequestVote to 1: Term:10  LastLogIndex:-1  LastLogTerm:-1
23:26:40.437458 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.437458 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.451105 [TEST] Reconnect 0
23:26:40.451558 [TEST] Reconnect 2
23:26:40.488086 [2] sending AppendEntries to 1: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.488086 [2] sending AppendEntries to 0: ni=0, args=Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.490099 [0] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.490100 [1] AppendEntries: Term:9  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.490341 [1] AppendEntries reply: Term:10 Success:%!d(bool=false)
23:26:40.490389 [0] AppendEntries reply: Term:10 Success:%!d(bool=false)
23:26:40.497236 [2] term out of date in heartbeat reply
23:26:40.497270 [2] becomes Follower with term=10; log=[]
23:26:40.497317 [2] election timer started (262ms), term=10
23:26:40.602962 [0] CM.Stop called
23:26:40.603043 [0] becomes Dead
23:26:40.603111 [0] commitChanSender done
23:26:40.603211 [0] Received quit signal. Shutting down...
23:26:40.603382 [0] CraftServer terminated!
23:26:40.603457 [1] CM.Stop called
23:26:40.603496 [1] becomes Dead
23:26:40.603546 [1] commitChanSender done
23:26:40.603622 [1] Received quit signal. Shutting down...
23:26:40.603724 [1] CraftServer terminated!
23:26:40.603778 [2] CM.Stop called
23:26:40.603823 [2] becomes Dead
23:26:40.603883 [2] commitChanSender done
23:26:40.603965 [2] Received quit signal. Shutting down...
23:26:40.604051 [2] CraftServer terminated!
23:26:40.608052 [2] in election timer state=DEAD, bailing out
23:26:40.613205 [0] in election timer state=DEAD, bailing out
23:26:40.613231 [1] in election timer state=DEAD, bailing out
--- PASS: TestElectionDisconnectLoop (2.82s)
=== RUN   TestCommitOneCommand
23:26:40.658660 [0] listening at [::]:55714
23:26:40.659020 [1] listening at [::]:55715
23:26:40.659335 [2] listening at [::]:55716
23:26:40.659570 [2] election timer started (196ms), term=0
23:26:40.659611 [0] election timer started (287ms), term=0
23:26:40.659572 [1] election timer started (259ms), term=0
23:26:40.860405 [2] becomes Candidate (currentTerm=1); log=[]
23:26:40.860629 [2] election timer started (215ms), term=1
23:26:40.860644 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:40.860616 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:40.863173 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:40.863273 [0] ... term out of date in RequestVote
23:26:40.863173 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:40.863298 [0] becomes Follower with term=1; log=[]
23:26:40.863319 [1] ... term out of date in RequestVote
23:26:40.863346 [1] becomes Follower with term=1; log=[]
23:26:40.863566 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:40.863565 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:40.863681 [0] election timer started (288ms), term=1
23:26:40.863682 [1] election timer started (213ms), term=1
23:26:40.866681 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:40 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:40.866845 [2] wins election with 2 votes
23:26:40.866874 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:40.866954 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:40 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:40.867058 [2] while waiting for reply, state = LEADER
23:26:40.867120 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.867131 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.867763 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.867768 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.868001 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.868001 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.869745 [1] in election timer term changed from 0 to 1, bailing out
23:26:40.869803 [0] in election timer term changed from 0 to 1, bailing out
23:26:40.870712 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.870784 [2] in election timer state=LEADER, bailing out
23:26:40.871154 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.917591 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.917602 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.919191 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.919191 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:40.919685 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.919669 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.921834 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.921904 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:40.961493 [TEST] submitting 42 to 2
23:26:40.961637 [2] Submit received by LEADER: 42
23:26:40.962103 [2] ... log=[{42 1}]
23:26:40.962282 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:40.962303 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:40.964220 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:40.964221 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:40.964444 [1] ... inserting entries [Command:42  Term:1] from index 0
23:26:40.964553 [1] ... log is now: [{42 1}]
23:26:40.964455 [0] ... inserting entries [Command:42  Term:1] from index 0
23:26:40.964653 [0] ... log is now: [{42 1}]
23:26:40.964879 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.964921 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.968756 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:0], matchIndex := map[0:0 1:-1]; commitIndex := 0
23:26:40.968834 [2] leader sets commitIndex := 0
23:26:40.968892 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:40.968984 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:40.969019 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:40.969082 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:40.969132 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
23:26:40.969538 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:40.969591 [0] ... setting commitIndex=0
23:26:40.969537 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:40.969632 [1] ... setting commitIndex=0
23:26:40.969750 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.969777 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:40.969791 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:40.969859 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
23:26:40.969889 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:40.969950 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
23:26:40.971190 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:40.971263 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.019406 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.019406 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.020405 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.020405 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.020676 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.020675 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.021585 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.022173 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.070008 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.070014 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.071099 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.071116 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.071476 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.071505 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.073992 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.074525 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.120787 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.120787 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.122466 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.122452 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.122970 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.122971 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.124331 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.124847 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.171670 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.171681 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.173236 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.173472 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:41.173661 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.173662 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.175482 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.175547 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:41.213721 [0] CM.Stop called
23:26:41.213787 [0] becomes Dead
23:26:41.213809 [0] commitChanSender done
23:26:41.213879 [0] Received quit signal. Shutting down...
23:26:41.214018 [0] CraftServer terminated!
23:26:41.214053 [1] CM.Stop called
23:26:41.214071 [1] becomes Dead
23:26:41.214097 [1] commitChanSender done
23:26:41.214124 [1] Received quit signal. Shutting down...
23:26:41.214184 [1] CraftServer terminated!
23:26:41.214209 [2] CM.Stop called
23:26:41.214226 [2] becomes Dead
23:26:41.214247 [2] commitChanSender done
23:26:41.214284 [2] Received quit signal. Shutting down...
23:26:41.214328 [2] CraftServer terminated!
23:26:41.223985 [0] in election timer state=DEAD, bailing out
23:26:41.223985 [1] in election timer state=DEAD, bailing out
--- PASS: TestCommitOneCommand (0.61s)
=== RUN   TestCommitAfterCallDrops
23:26:41.268545 [0] listening at [::]:55719
23:26:41.268919 [1] listening at [::]:55720
23:26:41.269227 [2] listening at [::]:55721
23:26:41.269448 [1] election timer started (160ms), term=0
23:26:41.269456 [0] election timer started (231ms), term=0
23:26:41.269457 [2] election timer started (218ms), term=0
23:26:41.430686 [1] becomes Candidate (currentTerm=1); log=[]
23:26:41.430961 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:41.430973 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:41.431307 [1] election timer started (175ms), term=1
23:26:41.432687 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:41.432689 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:41.432770 [0] ... term out of date in RequestVote
23:26:41.432789 [2] ... term out of date in RequestVote
23:26:41.432795 [0] becomes Follower with term=1; log=[]
23:26:41.432812 [2] becomes Follower with term=1; log=[]
23:26:41.432995 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:41.432993 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:41.433121 [0] election timer started (201ms), term=1
23:26:41.433864 [2] election timer started (173ms), term=1
23:26:41.436200 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:41 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:41.436312 [1] wins election with 2 votes
23:26:41.436331 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:41.436398 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.436403 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.436455 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:41 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:41.436529 [1] while waiting for reply, state = LEADER
23:26:41.437367 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.437423 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.437593 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.437595 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.439816 [2] in election timer term changed from 0 to 1, bailing out
23:26:41.439862 [0] in election timer term changed from 0 to 1, bailing out
23:26:41.440203 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.440275 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.441574 [1] in election timer state=LEADER, bailing out
23:26:41.486781 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.486781 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.488604 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.488607 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.488927 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.488939 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.489729 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.490188 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.537022 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.537021 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.538560 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.538675 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.539055 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.539091 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.540637 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.541221 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.571530 [TEST] peer 1 drop calls after 2
23:26:41.571672 [1] Submit received by LEADER: 99
23:26:41.572156 [1] ... log=[{99 1}]
23:26:41.572358 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}  LeaderCommit:-1
23:26:41.572402 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}  LeaderCommit:-1
23:26:41.573578 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}  LeaderCommit:-1
23:26:41.573581 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}  LeaderCommit:-1
23:26:41.573685 [0] ... inserting entries [Command:99  Term:1] from index 0
23:26:41.573723 [0] ... log is now: [{99 1}]
23:26:41.573700 [2] ... inserting entries [Command:99  Term:1] from index 0
23:26:41.573775 [2] ... log is now: [{99 1}]
23:26:41.573934 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.573934 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.575789 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:1], matchIndex := map[0:-1 2:0]; commitIndex := 0
23:26:41.575847 [1] leader sets commitIndex := 0
23:26:41.575878 [1] commitChanSender entries=[{99 1}], savedLastApplied=-1
23:26:41.575986 [TEST] collectCommits(1) got {Command:99 Index:0 Term:1}
23:26:41.576047 [1] sending AppendEntries to 2: ni=1, args=Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.576031 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}
23:26:41.576557 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
23:26:41.576562 [2] AppendEntries: Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.576621 [2] ... setting commitIndex=0
23:26:41.576748 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:99  Term:1}
23:26:41.576924 [0] ... setting commitIndex=0
23:26:41.577144 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.576844 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.577789 [2] commitChanSender entries=[{99 1}], savedLastApplied=-1
23:26:41.577854 [TEST] collectCommits(2) got {Command:99 Index:0 Term:1}
23:26:41.577883 [0] commitChanSender entries=[{99 1}], savedLastApplied=-1
23:26:41.577945 [TEST] collectCommits(0) got {Command:99 Index:0 Term:1}
23:26:41.578914 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
23:26:41.578987 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
23:26:41.603234 [TEST] peer %!d(MISSING) don't drop calls
23:26:41.626357 [1] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.626394 [1] sending AppendEntries to 2: ni=1, args=Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.627812 [2] AppendEntries: Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.627811 [0] AppendEntries: Term:1  LeaderId:1  PrevLogTerm:1
23:26:41.628168 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.628182 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.628923 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
23:26:41.629320 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
23:26:41.665288 [0] CM.Stop called
23:26:41.665367 [0] becomes Dead
23:26:41.665420 [0] commitChanSender done
23:26:41.665486 [0] Received quit signal. Shutting down...
23:26:41.665669 [0] CraftServer terminated!
23:26:41.665759 [1] CM.Stop called
23:26:41.665818 [1] becomes Dead
23:26:41.665868 [1] commitChanSender done
23:26:41.665957 [1] Received quit signal. Shutting down...
23:26:41.666098 [1] CraftServer terminated!
23:26:41.666160 [2] CM.Stop called
23:26:41.666212 [2] becomes Dead
23:26:41.666268 [2] commitChanSender done
23:26:41.666349 [2] Received quit signal. Shutting down...
23:26:41.666471 [2] CraftServer terminated!
23:26:41.675324 [0] in election timer state=DEAD, bailing out
23:26:41.675219 [2] in election timer state=DEAD, bailing out
--- PASS: TestCommitAfterCallDrops (0.45s)
=== RUN   TestSubmitNonLeaderFails
23:26:41.721024 [0] listening at [::]:55725
23:26:41.721719 [1] listening at [::]:55726
23:26:41.722193 [2] listening at [::]:55727
23:26:41.722494 [2] election timer started (240ms), term=0
23:26:41.722515 [1] election timer started (163ms), term=0
23:26:41.722574 [0] election timer started (268ms), term=0
23:26:41.893730 [1] becomes Candidate (currentTerm=1); log=[]
23:26:41.893892 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:41.894400 [1] election timer started (220ms), term=1
23:26:41.894515 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:41.897682 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:41.897802 [2] ... term out of date in RequestVote
23:26:41.897820 [2] becomes Follower with term=1; log=[]
23:26:41.897820 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:41.897881 [0] ... term out of date in RequestVote
23:26:41.897895 [0] becomes Follower with term=1; log=[]
23:26:41.898138 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:41.898190 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:41.898720 [2] election timer started (173ms), term=1
23:26:41.898746 [0] election timer started (238ms), term=1
23:26:41.900598 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:41 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:41.900763 [1] wins election with 2 votes
23:26:41.900805 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:41.900897 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.900986 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:41 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:41.901087 [1] while waiting for reply, state = LEADER
23:26:41.901202 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.901531 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.901756 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.901765 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.901965 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.903246 [0] in election timer term changed from 0 to 1, bailing out
23:26:41.903394 [2] in election timer term changed from 0 to 1, bailing out
23:26:41.903983 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.904650 [1] in election timer state=LEADER, bailing out
23:26:41.905091 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.951238 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.951207 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.952945 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.952928 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:41.953372 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.953416 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:41.955273 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:41.955356 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:42.001376 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.001390 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.003218 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.004691 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.003831 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.004942 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.005985 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:42.006327 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:42.023138 [TEST] submitting 42 to 2
23:26:42.023233 [2] Submit received by FOLLOWER: 42
23:26:42.034426 [0] CM.Stop called
23:26:42.034471 [0] becomes Dead
23:26:42.034504 [0] commitChanSender done
23:26:42.034565 [0] Received quit signal. Shutting down...
23:26:42.034708 [0] CraftServer terminated!
23:26:42.034747 [1] CM.Stop called
23:26:42.034766 [1] becomes Dead
23:26:42.034792 [1] commitChanSender done
23:26:42.034897 [1] Received quit signal. Shutting down...
23:26:42.035031 [1] CraftServer terminated!
23:26:42.035064 [2] CM.Stop called
23:26:42.035083 [2] becomes Dead
23:26:42.035109 [2] commitChanSender done
23:26:42.035145 [2] Received quit signal. Shutting down...
23:26:42.035205 [2] CraftServer terminated!
--- PASS: TestSubmitNonLeaderFails (0.31s)
=== RUN   TestCommitMultipleCommands
23:26:42.037175 [0] listening at [::]:55730
23:26:42.037708 [1] listening at [::]:55731
23:26:42.038157 [2] listening at [::]:55732
23:26:42.038448 [1] election timer started (220ms), term=0
23:26:42.038429 [0] election timer started (280ms), term=0
23:26:42.038446 [2] election timer started (183ms), term=0
23:26:42.039565 [2] in election timer state=DEAD, bailing out
23:26:42.039623 [0] in election timer state=DEAD, bailing out
23:26:42.229686 [2] becomes Candidate (currentTerm=1); log=[]
23:26:42.229911 [2] election timer started (288ms), term=1
23:26:42.229901 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:42.229922 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:42.232308 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:42.232436 [0] ... term out of date in RequestVote
23:26:42.232462 [0] becomes Follower with term=1; log=[]
23:26:42.232291 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:42.232504 [1] ... term out of date in RequestVote
23:26:42.232652 [1] becomes Follower with term=1; log=[]
23:26:42.232749 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:42.232914 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:42.232956 [0] election timer started (174ms), term=1
23:26:42.233462 [1] election timer started (152ms), term=1
23:26:42.234745 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:42 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:42.234861 [2] wins election with 2 votes
23:26:42.234886 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:42.234999 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:42 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:42.235083 [2] while waiting for reply, state = LEADER
23:26:42.235144 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.235151 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.236003 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.236098 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.236214 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.236294 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.238539 [0] in election timer term changed from 0 to 1, bailing out
23:26:42.238548 [1] in election timer term changed from 0 to 1, bailing out
23:26:42.238831 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.239245 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.240254 [2] in election timer state=LEADER, bailing out
23:26:42.285469 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.285469 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.287557 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.287594 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.287828 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.287829 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.289349 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.289438 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.335718 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.335718 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.336871 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.337044 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:42.337156 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.337249 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.338740 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.339619 [TEST] submitting 42 to 2
23:26:42.339652 [2] Submit received by LEADER: 42
23:26:42.339843 [2] ... log=[{42 1}]
23:26:42.340037 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:42.339944 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:42.340008 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:42.340602 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:42.340610 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:42  Term:1}  LeaderCommit:-1
23:26:42.340719 [0] ... inserting entries [Command:42  Term:1] from index 0
23:26:42.340729 [1] ... inserting entries [Command:42  Term:1] from index 0
23:26:42.340775 [0] ... log is now: [{42 1}]
23:26:42.340793 [1] ... log is now: [{42 1}]
23:26:42.340932 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.340946 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.342377 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:0], matchIndex := map[0:0 1:-1]; commitIndex := 0
23:26:42.342501 [2] leader sets commitIndex := 0
23:26:42.342580 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:42.342668 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:42.342642 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.342712 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.342833 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
23:26:42.343478 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.343478 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.343546 [1] ... setting commitIndex=0
23:26:42.343577 [0] ... setting commitIndex=0
23:26:42.343706 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.343762 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.343784 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:42.343840 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
23:26:42.344008 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
23:26:42.344058 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
23:26:42.345820 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:42.345919 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:42.393153 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.393153 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.395678 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.395704 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:42.395983 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.396056 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.397700 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:42.397793 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:42.439970 [TEST] submitting 55 to 2
23:26:42.440131 [2] Submit received by LEADER: 55
23:26:42.440512 [2] ... log=[{42 1} {55 1}]
23:26:42.440721 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1  Entries:{Command:55  Term:1}
23:26:42.440676 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1  Entries:{Command:55  Term:1}
23:26:42.442186 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1  Entries:{Command:55  Term:1}
23:26:42.442191 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1  Entries:{Command:55  Term:1}
23:26:42.442356 [1] ... inserting entries [Command:55  Term:1] from index 1
23:26:42.442385 [0] ... inserting entries [Command:55  Term:1] from index 1
23:26:42.442475 [1] ... log is now: [{42 1} {55 1}]
23:26:42.442503 [0] ... log is now: [{42 1} {55 1}]
23:26:42.442756 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.442802 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.446251 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:2], matchIndex := map[0:0 1:1]; commitIndex := 1
23:26:42.446330 [2] leader sets commitIndex := 1
23:26:42.446369 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:42.446426 [2] commitChanSender entries=[{55 1}], savedLastApplied=0
23:26:42.446466 [TEST] collectCommits(2) got {Command:55 Index:1 Term:1}
23:26:42.446517 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.446485 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.448249 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.448249 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.448334 [0] ... setting commitIndex=1
23:26:42.448363 [1] ... setting commitIndex=1
23:26:42.448542 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.448542 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.448593 [1] commitChanSender entries=[{55 1}], savedLastApplied=0
23:26:42.448641 [TEST] collectCommits(1) got {Command:55 Index:1 Term:1}
23:26:42.448666 [0] commitChanSender entries=[{55 1}], savedLastApplied=0
23:26:42.448720 [TEST] collectCommits(0) got {Command:55 Index:1 Term:1}
23:26:42.451312 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:42.451614 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:42.496988 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.496872 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.499119 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.499104 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:42.499397 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.499542 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.506136 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:42.506572 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:42.541579 [TEST] submitting 81 to 2
23:26:42.541739 [2] Submit received by LEADER: 81
23:26:42.541932 [2] ... log=[{42 1} {55 1} {81 1}]
23:26:42.542089 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:1
23:26:42.542058 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:1
23:26:42.542755 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:1
23:26:42.543093 [0] ... inserting entries [Command:81  Term:1] from index 2
23:26:42.543172 [0] ... log is now: [{42 1} {55 1} {81 1}]
23:26:42.543048 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:1
23:26:42.543400 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.543390 [1] ... inserting entries [Command:81  Term:1] from index 2
23:26:42.543438 [1] ... log is now: [{42 1} {55 1} {81 1}]
23:26:42.543591 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.544406 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:2], matchIndex := map[0:2 1:1]; commitIndex := 2
23:26:42.544473 [2] leader sets commitIndex := 2
23:26:42.544510 [2] commitChanSender entries=[{81 1}], savedLastApplied=1
23:26:42.544547 [TEST] collectCommits(2) got {Command:81 Index:2 Term:1}
23:26:42.544588 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.544558 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:2
23:26:42.545479 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.545761 [0] ... setting commitIndex=2
23:26:42.546004 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.546192 [0] commitChanSender entries=[{81 1}], savedLastApplied=1
23:26:42.546232 [TEST] collectCommits(0) got {Command:81 Index:2 Term:1}
23:26:42.546228 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:81  Term:1}  LeaderCommit:2
23:26:42.546335 [1] ... setting commitIndex=2
23:26:42.546460 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.545629 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.547082 [1] commitChanSender entries=[{81 1}], savedLastApplied=1
23:26:42.547118 [TEST] collectCommits(1) got {Command:81 Index:2 Term:1}
23:26:42.547948 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.548004 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.594729 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.594729 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.596549 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.596574 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.596744 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.596751 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.597279 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.597894 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.645021 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.645021 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.646252 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.646255 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.646701 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.646703 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.648684 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.648779 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.695225 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.695186 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.696405 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.696446 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.696817 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.696843 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.699451 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.699524 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.745458 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.745418 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.746868 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.746897 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.747341 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.747372 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.748859 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.748953 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.795616 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.795639 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.796731 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.796731 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.797143 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.797164 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.798060 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.798558 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.845863 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.845864 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.847213 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.847253 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.847653 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.847661 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:42.850074 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.850173 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:42.895495 [0] CM.Stop called
23:26:42.895530 [0] becomes Dead
23:26:42.895555 [0] commitChanSender done
23:26:42.895641 [0] Received quit signal. Shutting down...
23:26:42.895733 [0] CraftServer terminated!
23:26:42.895868 [1] CM.Stop called
23:26:42.895985 [1] becomes Dead
23:26:42.896052 [1] commitChanSender done
23:26:42.896168 [1] Received quit signal. Shutting down...
23:26:42.896213 [1] CraftServer terminated!
23:26:42.896239 [2] CM.Stop called
23:26:42.896146 [2] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.896252 [2] becomes Dead
23:26:42.896326 [2] commitChanSender done
23:26:42.896286 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:42.896380 [2] Received quit signal. Shutting down...
23:26:42.896475 [2] CraftServer terminated!
23:26:42.903964 [0] in election timer state=DEAD, bailing out
23:26:42.903987 [1] in election timer state=DEAD, bailing out
--- PASS: TestCommitMultipleCommands (0.91s)
=== RUN   TestCommitWithDisconnectionAndRecover
23:26:42.950564 [0] listening at [::]:55737
23:26:42.951287 [1] listening at [::]:55738
23:26:42.951658 [2] listening at [::]:55739
23:26:42.951910 [1] election timer started (287ms), term=0
23:26:42.951903 [2] election timer started (211ms), term=0
23:26:42.951932 [0] election timer started (216ms), term=0
23:26:43.163050 [2] becomes Candidate (currentTerm=1); log=[]
23:26:43.163108 [2] election timer started (175ms), term=1
23:26:43.163104 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:43.163115 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:43.163838 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:43.163870 [1] ... term out of date in RequestVote
23:26:43.163837 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:43.163879 [1] becomes Follower with term=1; log=[]
23:26:43.163886 [0] ... term out of date in RequestVote
23:26:43.163895 [0] becomes Follower with term=1; log=[]
23:26:43.163969 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:43.163966 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:43.164000 [1] election timer started (202ms), term=1
23:26:43.164038 [0] election timer started (216ms), term=1
23:26:43.165074 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:43 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:43.165123 [2] wins election with 2 votes
23:26:43.165134 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:43.165176 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.165171 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.165207 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:43 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:43.165248 [2] while waiting for reply, state = LEADER
23:26:43.165436 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.165452 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.165533 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.165573 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.167152 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:43.167191 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:43.172168 [0] in election timer term changed from 0 to 1, bailing out
23:26:43.172196 [1] in election timer term changed from 0 to 1, bailing out
23:26:43.173326 [2] in election timer state=LEADER, bailing out
23:26:43.215228 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.215226 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.215806 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.215934 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:43.215970 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.216078 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.216696 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:43.216776 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:43.254738 [2] Submit received by LEADER: 5
23:26:43.254846 [2] ... log=[{5 1}]
23:26:43.254870 [2] Submit received by LEADER: 6
23:26:43.254940 [2] ... log=[{5 1} {6 1}]
23:26:43.254998 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.254998 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.255027 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.255050 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.255580 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.255734 [0] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:43.255968 [0] ... log is now: [{5 1} {6 1}]
23:26:43.255748 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.256474 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.256064 [1] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:43.256533 [1] ... log is now: [{5 1} {6 1}]
23:26:43.256708 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.256740 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.256875 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.256767 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:43.257141 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.258147 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]; commitIndex := 1
23:26:43.258212 [2] leader sets commitIndex := 1
23:26:43.258247 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:43.258304 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:43.258359 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:43.258330 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.258364 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:43.258616 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]; commitIndex := 1
23:26:43.258675 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.258763 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.258915 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.258989 [0] ... setting commitIndex=1
23:26:43.259043 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:43.259150 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.259176 [1] ... setting commitIndex=1
23:26:43.259228 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:43.259314 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:43.259340 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.259364 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:43.259445 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:43.260321 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:43.260409 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:43.260974 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.261100 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.308792 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.308781 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.309379 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.309387 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.309616 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.309617 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.310914 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.310988 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.359331 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.359366 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.360183 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.360183 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.360369 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.360376 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.361458 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.361516 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.409941 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.409938 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.411607 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.411902 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.411961 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.412280 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.413678 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.414014 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.460579 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.460579 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.461730 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.461729 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.462138 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.462145 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.464072 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.464164 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.505084 [TEST] Disconnect 0
23:26:43.511491 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.511649 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.512301 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.512484 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.513796 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.562356 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.562355 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.563557 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.563952 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.566985 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.613326 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.613326 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.614237 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.614432 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.616224 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.664372 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.664386 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.665391 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.665711 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.666322 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.685168 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
23:26:43.685293 [0] sending RequestVote to 2: Term:2  LastLogIndex:1  LastLogTerm:1
23:26:43.685429 [0] sending RequestVote to 1: Term:2  LastLogIndex:1  LastLogTerm:1
23:26:43.685440 [0] election timer started (227ms), term=2
23:26:43.715192 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.715201 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.716369 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:43.716793 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.718775 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:43.755531 [2] Submit received by LEADER: 7
23:26:43.755913 [2] ... log=[{5 1} {6 1} {7 1}]
23:26:43.756066 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:43.756083 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:43.757182 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:43.757277 [1] ... inserting entries [Command:7  Term:1] from index 2
23:26:43.757314 [1] ... log is now: [{5 1} {6 1} {7 1}]
23:26:43.757457 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.759279 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:43.759345 [2] leader sets commitIndex := 2
23:26:43.759398 [2] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:43.759443 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:43.759426 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.759394 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:43.759938 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.760004 [1] ... setting commitIndex=2
23:26:43.760166 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.760214 [1] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:43.760254 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
23:26:43.760772 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:43.809943 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.809935 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:43.810970 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.811382 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.813712 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:43.860559 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.860558 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:43.861833 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.862250 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.863769 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:43.911221 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.911240 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:43.912166 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.912349 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.912897 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:43.915792 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
23:26:43.915962 [0] election timer started (293ms), term=3
23:26:43.915921 [0] sending RequestVote to 1: Term:3  LastLogIndex:1  LastLogTerm:1
23:26:43.915931 [0] sending RequestVote to 2: Term:3  LastLogIndex:1  LastLogTerm:1
23:26:43.961885 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.961919 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:43.963221 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:43.963645 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:43.964192 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:44.006244 [TEST] Reconnect 0
23:26:44.012600 [2] sending AppendEntries to 1: ni=3, args=Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.012629 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:44.013575 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.013767 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.013832 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:44.014084 [0] AppendEntries reply: Term:3 Success:%!d(bool=false)
23:26:44.015012 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]; commitIndex := 2
23:26:44.016214 [2] term out of date in heartbeat reply
23:26:44.016236 [2] becomes Follower with term=3; log=[{5 1} {6 1} {7 1}]
23:26:44.016296 [2] election timer started (196ms), term=3
23:26:44.216300 [0] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
23:26:44.216427 [2] becomes Candidate (currentTerm=4); log=[{5 1} {6 1} {7 1}]
23:26:44.216527 [0] election timer started (229ms), term=4
23:26:44.216534 [0] sending RequestVote to 1: Term:4  LastLogIndex:1  LastLogTerm:1
23:26:44.216636 [2] sending RequestVote to 0: Term:4  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:44.216740 [2] election timer started (196ms), term=4
23:26:44.216583 [2] sending RequestVote to 1: Term:4  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:44.216642 [0] sending RequestVote to 2: Term:4  LastLogIndex:1  LastLogTerm:1
23:26:44.218146 [0] RequestVote: Term:4  CandidateId:2  LastLogIndex:2  LastLogTerm:1 [currentTerm=4, votedFor=0, log index/term=(1, 1)]
23:26:44.218534 [0] ... RequestVote reply: Term:4
23:26:44.218730 [1] RequestVote: Term:4  CandidateId:2  LastLogIndex:2  LastLogTerm:1 [currentTerm=1, votedFor=2, log index/term=(2, 1)]
23:26:44.219056 [1] ... term out of date in RequestVote
23:26:44.219384 [1] becomes Follower with term=4; log=[{5 1} {6 1} {7 1}]
23:26:44.219351 [2] RequestVote: Term:4  LastLogIndex:1  LastLogTerm:1 [currentTerm=4, votedFor=2, log index/term=(2, 1)]
23:26:44.219602 [1] ... RequestVote reply: Term:4  VoteGranted:true
23:26:44.219741 [2] ... RequestVote reply: Term:4
23:26:44.219781 [1] RequestVote: Term:4  LastLogIndex:1  LastLogTerm:1 [currentTerm=4, votedFor=2, log index/term=(2, 1)]
23:26:44.220069 [1] ... RequestVote reply: Term:4
23:26:44.220696 [1] election timer started (152ms), term=4
23:26:44.221376 [2] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.221475 [2] received RequestVoteReply &{Msg:Term:4  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.221556 [2] wins election with 2 votes
23:26:44.221582 [2] becomes Leader; term=4, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
23:26:44.221673 [2] sending AppendEntries to 1: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.222648 [2] sending AppendEntries to 0: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.223029 [1] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.223367 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.222103 [0] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.223640 [0] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.223705 [0] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.223759 [0] becomes Follower with term=4; log=[{5 1} {6 1}]
23:26:44.223896 [0] AppendEntries reply: Term:4 Success:%!d(bool=false)
23:26:44.224874 [0] election timer started (233ms), term=4
23:26:44.224888 [1] in election timer term changed from 1 to 4, bailing out
23:26:44.225248 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
23:26:44.225720 [2] AppendEntries reply from 0 !success: nextIndex := 2
23:26:44.226854 [2] in election timer state=LEADER, bailing out
23:26:44.271821 [2] sending AppendEntries to 1: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.271814 [2] sending AppendEntries to 0: ni=2, args=Term:4  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:44.272482 [1] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.272482 [0] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:44.272572 [0] ... inserting entries [Command:7  Term:1] from index 2
23:26:44.272629 [0] ... log is now: [{5 1} {6 1} {7 1}]
23:26:44.272697 [0] ... setting commitIndex=2
23:26:44.272723 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.272916 [0] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.273001 [0] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:44.273064 [TEST] collectCommits(0) got {Command:7 Index:2 Term:4}
23:26:44.273705 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.274003 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.322010 [2] sending AppendEntries to 1: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.322022 [2] sending AppendEntries to 0: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.323507 [1] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.323524 [0] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.323959 [0] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.323956 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.326030 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.326137 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.372145 [2] sending AppendEntries to 1: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.372147 [2] sending AppendEntries to 0: ni=3, args=Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.373591 [0] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.373591 [1] AppendEntries: Term:4  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:44.373864 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.373865 [0] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:44.376217 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.376575 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:44.407883 [0] CM.Stop called
23:26:44.407928 [0] becomes Dead
23:26:44.407955 [0] commitChanSender done
23:26:44.407986 [0] Received quit signal. Shutting down...
23:26:44.408127 [0] CraftServer terminated!
23:26:44.408163 [1] CM.Stop called
23:26:44.408180 [1] becomes Dead
23:26:44.408203 [1] commitChanSender done
23:26:44.408252 [1] Received quit signal. Shutting down...
23:26:44.408301 [1] CraftServer terminated!
23:26:44.408332 [2] CM.Stop called
23:26:44.408350 [2] becomes Dead
23:26:44.408378 [2] commitChanSender done
23:26:44.408431 [2] Received quit signal. Shutting down...
23:26:44.408480 [2] CraftServer terminated!
23:26:44.411169 [1] in election timer state=DEAD, bailing out
23:26:44.415425 [0] in election timer state=DEAD, bailing out
23:26:44.416794 [0] in election timer state=DEAD, bailing out
--- PASS: TestCommitWithDisconnectionAndRecover (1.51s)
=== RUN   TestNoCommitWithNoQuorum
23:26:44.463438 [0] listening at [::]:55752
23:26:44.464134 [1] listening at [::]:55753
23:26:44.464546 [2] listening at [::]:55754
23:26:44.464829 [2] election timer started (263ms), term=0
23:26:44.464894 [0] election timer started (217ms), term=0
23:26:44.464831 [1] election timer started (175ms), term=0
23:26:44.646127 [1] becomes Candidate (currentTerm=1); log=[]
23:26:44.646319 [1] election timer started (271ms), term=1
23:26:44.646324 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:44.646460 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:44.649055 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:44.649050 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:44.649181 [0] ... term out of date in RequestVote
23:26:44.649221 [2] ... term out of date in RequestVote
23:26:44.649237 [0] becomes Follower with term=1; log=[]
23:26:44.649249 [2] becomes Follower with term=1; log=[]
23:26:44.649508 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:44.649540 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:44.649847 [0] election timer started (233ms), term=1
23:26:44.650265 [2] election timer started (281ms), term=1
23:26:44.652224 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.652347 [1] wins election with 2 votes
23:26:44.652379 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:44.652507 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.652735 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:44 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:44.652860 [1] while waiting for reply, state = LEADER
23:26:44.652907 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.653854 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.654310 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.654976 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.655027 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.655150 [2] in election timer term changed from 0 to 1, bailing out
23:26:44.655273 [0] in election timer term changed from 0 to 1, bailing out
23:26:44.656944 [1] in election timer state=LEADER, bailing out
23:26:44.657313 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.657638 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.702862 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.702862 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.704714 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.704780 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.705020 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.705786 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.706507 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.707402 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.753168 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.753178 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.754941 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.755203 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:44.755957 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.755973 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.758200 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.758356 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:44.766488 [1] Submit received by LEADER: 5
23:26:44.766741 [1] ... log=[{5 1}]
23:26:44.766792 [1] Submit received by LEADER: 6
23:26:44.767236 [1] ... log=[{5 1} {6 1}]
23:26:44.767398 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.767439 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.767656 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.767399 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.768428 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.768458 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.768567 [0] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:44.768643 [0] ... log is now: [{5 1} {6 1}]
23:26:44.768816 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.768609 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:44.768868 [2] ... log is now: [{5 1} {6 1}]
23:26:44.769052 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.769117 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.769891 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:44.771150 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.770293 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.772095 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:0], matchIndex := map[0:1 2:-1]; commitIndex := 1
23:26:44.772254 [1] leader sets commitIndex := 1
23:26:44.773181 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:44.773523 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:44.773580 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:44.773633 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.773767 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:44.773900 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.774166 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.774230 [0] ... setting commitIndex=1
23:26:44.774209 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.774454 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.774501 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.774445 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:44.774533 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:44.774572 [2] ... setting commitIndex=1
23:26:44.774636 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:44.774685 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:44.774749 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.775108 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:44.775182 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:44.775219 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:44.776253 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.776663 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.823564 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.823712 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.825315 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.825315 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.825772 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.825776 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.827122 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.827818 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.873890 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.873894 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.875127 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.875130 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.875545 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.875545 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.876841 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.876975 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.924357 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.924377 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.925975 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.925973 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.926467 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.926464 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.928553 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.928643 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.974812 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.974801 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.976264 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.976265 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:44.976720 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.976781 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:44.978106 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:44.978207 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
23:26:45.018256 [TEST] Disconnect 2
23:26:45.018812 [TEST] Disconnect 0
23:26:45.025380 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.025386 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.076030 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.076045 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.126476 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.126476 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.177184 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.177184 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.211094 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
23:26:45.211350 [0] election timer started (232ms), term=2
23:26:45.211311 [0] sending RequestVote to 2: Term:2  LastLogIndex:1  LastLogTerm:1
23:26:45.211312 [0] sending RequestVote to 1: Term:2  LastLogIndex:1  LastLogTerm:1
23:26:45.227902 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.227901 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.260858 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
23:26:45.261046 [2] election timer started (284ms), term=2
23:26:45.261002 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:45.261020 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:45.269660 [1] Submit received by LEADER: 8
23:26:45.270040 [1] ... log=[{5 1} {6 1} {8 1}]
23:26:45.270188 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.270233 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.321547 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.321537 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.372326 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.372340 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.422425 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.422426 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.452313 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
23:26:45.452530 [0] election timer started (160ms), term=3
23:26:45.452533 [0] sending RequestVote to 1: Term:3  LastLogIndex:1  LastLogTerm:1
23:26:45.452552 [0] sending RequestVote to 2: Term:3  LastLogIndex:1  LastLogTerm:1
23:26:45.472563 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.472510 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.521126 [TEST] Reconnect 2
23:26:45.521304 [TEST] Reconnect 0
23:26:45.522735 [1] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.522752 [1] sending AppendEntries to 2: ni=2, args=Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.524165 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.524166 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:1}  LeaderCommit:1
23:26:45.524375 [0] AppendEntries reply: Term:3 Success:%!d(bool=false)
23:26:45.524433 [2] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:45.525694 [1] term out of date in heartbeat reply
23:26:45.525724 [1] becomes Follower with term=3; log=[{5 1} {6 1} {8 1}]
23:26:45.525807 [1] election timer started (288ms), term=3
23:26:45.551848 [2] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
23:26:45.552022 [2] election timer started (283ms), term=3
23:26:45.552020 [2] sending RequestVote to 0: Term:3  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:45.552044 [2] sending RequestVote to 1: Term:3  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:45.553762 [1] RequestVote: Term:3  CandidateId:2  LastLogIndex:1  LastLogTerm:1 [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
23:26:45.553763 [0] RequestVote: Term:3  CandidateId:2  LastLogIndex:1  LastLogTerm:1 [currentTerm=3, votedFor=0, log index/term=(1, 1)]
23:26:45.553964 [0] ... RequestVote reply: Term:3
23:26:45.554007 [1] ... RequestVote reply: Term:3
23:26:45.555356 [2] received RequestVoteReply &{Msg:Term:3 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:45 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:45.555665 [2] received RequestVoteReply &{Msg:Term:3 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:45 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:45.612924 [0] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
23:26:45.613093 [0] election timer started (220ms), term=4
23:26:45.613119 [0] sending RequestVote to 2: Term:4  LastLogIndex:1  LastLogTerm:1
23:26:45.613138 [0] sending RequestVote to 1: Term:4  LastLogIndex:1  LastLogTerm:1
23:26:45.614467 [2] RequestVote: Term:4  LastLogIndex:1  LastLogTerm:1 [currentTerm=3, votedFor=2, log index/term=(1, 1)]
23:26:45.614480 [1] RequestVote: Term:4  LastLogIndex:1  LastLogTerm:1 [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
23:26:45.614601 [2] ... term out of date in RequestVote
23:26:45.614636 [1] ... term out of date in RequestVote
23:26:45.614645 [2] becomes Follower with term=4; log=[{5 1} {6 1}]
23:26:45.614678 [1] becomes Follower with term=4; log=[{5 1} {6 1} {8 1}]
23:26:45.615071 [1] ... RequestVote reply: Term:4
23:26:45.615199 [1] election timer started (286ms), term=4
23:26:45.615164 [2] ... RequestVote reply: Term:4  VoteGranted:true
23:26:45.615318 [2] election timer started (281ms), term=4
23:26:45.616087 [1] in election timer term changed from 3 to 4, bailing out
23:26:45.617600 [0] received RequestVoteReply &{Msg:Term:4 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:45 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:45.617693 [0] received RequestVoteReply &{Msg:Term:4  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:45 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:45.617762 [0] wins election with 2 votes
23:26:45.617784 [0] becomes Leader; term=4, nextIndex=map[1:2 2:2], matchIndex=map[1:-1 2:-1]; log=[{5 1} {6 1}]
23:26:45.617867 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.617882 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.618557 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.618587 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.618728 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.618733 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.620762 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:-1]; commitIndex := 1
23:26:45.620821 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.622333 [2] in election timer term changed from 3 to 4, bailing out
23:26:45.623313 [0] in election timer state=LEADER, bailing out
23:26:45.668181 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.668173 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.668767 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.668863 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.669015 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.669189 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.669834 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.670114 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.718460 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.718502 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.719214 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.719254 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.719497 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.719513 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.721428 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.721477 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.768729 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.768732 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.769082 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.769083 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.769173 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.769176 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.769476 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.769508 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.820125 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.820117 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.820691 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.820691 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.820873 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.820874 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.821440 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.821780 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.870633 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.870649 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.872036 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.872036 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.872266 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.872350 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.873876 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.874384 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.920926 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.920942 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.921653 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.921665 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.922040 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.922050 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.922849 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.923375 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.971600 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.971613 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.972786 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.972767 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:45.973195 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.973214 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:45.974107 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:45.974574 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.022326 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.022320 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.024657 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.024654 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.025065 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.025130 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.026980 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.027222 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.073096 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.073096 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.074220 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.074322 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.074455 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.074498 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.076652 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.077030 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.122132 [0] Submit received by LEADER: 9
23:26:46.122739 [0] ... log=[{5 1} {6 1} {9 4}]
23:26:46.122858 [0] Submit received by LEADER: 10
23:26:46.123247 [0] ... log=[{5 1} {6 1} {9 4} {10 4}]
23:26:46.123356 [0] Submit received by LEADER: 11
23:26:46.123669 [0] ... log=[{5 1} {6 1} {9 4} {10 4} {11 4}]
23:26:46.123849 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.123851 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.123992 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.124614 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.124666 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.124797 [0] sending AppendEntries to 1: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.125629 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.125817 [1] ... inserting entries [Command:9  Term:4 Command:10  Term:4 Command:11  Term:4] from index 2
23:26:46.125701 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.125914 [1] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
23:26:46.125925 [2] ... inserting entries [Command:9  Term:4 Command:10  Term:4 Command:11  Term:4] from index 2
23:26:46.126100 [2] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
23:26:46.126146 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.126311 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.126271 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.126342 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.126639 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.126706 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.129316 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:2], matchIndex := map[1:4 2:1]; commitIndex := 4
23:26:46.129369 [0] leader sets commitIndex := 4
23:26:46.129570 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.129541 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.129545 [0] sending AppendEntries to 2: ni=2, args=Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:4
23:26:46.129807 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.129791 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.129846 [0] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
23:26:46.129898 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.130198 [TEST] collectCommits(0) got {Command:9 Index:2 Term:4}
23:26:46.130231 [TEST] collectCommits(0) got {Command:10 Index:3 Term:4}
23:26:46.130261 [TEST] collectCommits(0) got {Command:11 Index:4 Term:4}
23:26:46.130205 [2] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:4
23:26:46.130341 [2] ... setting commitIndex=4
23:26:46.130523 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.130639 [1] ... setting commitIndex=4
23:26:46.130701 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.130802 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.131231 [1] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
23:26:46.131272 [TEST] collectCommits(1) got {Command:9 Index:2 Term:4}
23:26:46.131294 [TEST] collectCommits(1) got {Command:10 Index:3 Term:4}
23:26:46.131316 [TEST] collectCommits(1) got {Command:11 Index:4 Term:4}
23:26:46.131503 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.131548 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.131520 [1] AppendEntries: Term:4  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:9  Term:4}  Entries:{Command:10  Term:4}  Entries:{Command:11  Term:4}  LeaderCommit:1
23:26:46.131660 [2] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
23:26:46.131669 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.131693 [TEST] collectCommits(2) got {Command:9 Index:2 Term:4}
23:26:46.131715 [TEST] collectCommits(2) got {Command:10 Index:3 Term:4}
23:26:46.131733 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.131750 [TEST] collectCommits(2) got {Command:11 Index:4 Term:4}
23:26:46.132319 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.132385 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.180075 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.180075 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.181187 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.181198 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.181596 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.181600 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.182552 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.183131 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.230528 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.230528 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.232201 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.232201 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.232850 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.232885 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.234150 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.234205 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.281205 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.281201 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.282306 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.282305 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.282622 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.282621 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.283333 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.283852 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.331485 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.331479 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.332733 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.332734 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.333198 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.333223 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.334159 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.334219 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.382165 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.382167 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.382900 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.382926 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.383109 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.383118 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.385358 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.385419 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.432973 [0] sending AppendEntries to 2: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.433011 [0] sending AppendEntries to 1: ni=5, args=Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.433801 [1] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.433802 [2] AppendEntries: Term:4  PrevLogIndex:4  PrevLogTerm:4  LeaderCommit:4
23:26:46.433984 [1] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.433983 [2] AppendEntries reply: Term:4 Success:%!d(bool=true)
23:26:46.435509 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.435578 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:46.474856 [0] CM.Stop called
23:26:46.474875 [0] becomes Dead
23:26:46.474888 [0] commitChanSender done
23:26:46.474911 [0] Received quit signal. Shutting down...
23:26:46.474960 [0] CraftServer terminated!
23:26:46.474973 [1] CM.Stop called
23:26:46.474981 [1] becomes Dead
23:26:46.474992 [1] commitChanSender done
23:26:46.475015 [1] Received quit signal. Shutting down...
23:26:46.475037 [1] CraftServer terminated!
23:26:46.475050 [2] CM.Stop called
23:26:46.475061 [2] becomes Dead
23:26:46.475070 [2] commitChanSender done
23:26:46.475089 [2] Received quit signal. Shutting down...
23:26:46.475126 [2] CraftServer terminated!
23:26:46.475958 [1] in election timer state=DEAD, bailing out
23:26:46.475959 [2] in election timer state=DEAD, bailing out
--- PASS: TestNoCommitWithNoQuorum (2.07s)
=== RUN   TestDisconnectLeaderBriefly
23:26:46.528881 [0] listening at [::]:55773
23:26:46.529382 [1] listening at [::]:55774
23:26:46.529784 [2] listening at [::]:55775
23:26:46.530088 [0] election timer started (161ms), term=0
23:26:46.530095 [1] election timer started (197ms), term=0
23:26:46.530092 [2] election timer started (276ms), term=0
23:26:46.701306 [0] becomes Candidate (currentTerm=1); log=[]
23:26:46.701568 [0] election timer started (264ms), term=1
23:26:46.701525 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:46.701520 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:46.704069 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:46.704069 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:46.704156 [2] ... term out of date in RequestVote
23:26:46.704176 [1] ... term out of date in RequestVote
23:26:46.704190 [2] becomes Follower with term=1; log=[]
23:26:46.704201 [1] becomes Follower with term=1; log=[]
23:26:46.704428 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:46.704514 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:46.704535 [1] election timer started (282ms), term=1
23:26:46.704638 [2] election timer started (164ms), term=1
23:26:46.706220 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:46 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:46.706340 [0] wins election with 2 votes
23:26:46.706367 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:46.706431 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:46 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:46.706519 [0] while waiting for reply, state = LEADER
23:26:46.706582 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.706585 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.707375 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.707472 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.707640 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.707673 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.710220 [2] in election timer term changed from 0 to 1, bailing out
23:26:46.710267 [1] in election timer term changed from 0 to 1, bailing out
23:26:46.710321 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.710400 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.711883 [0] in election timer state=LEADER, bailing out
23:26:46.756909 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.756908 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.758490 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.758491 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.759014 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.759031 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.761098 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.761184 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.807044 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.807044 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.808570 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.808577 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:46.809039 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.809038 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.812408 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.812503 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:46.831413 [0] Submit received by LEADER: 5
23:26:46.831811 [0] ... log=[{5 1}]
23:26:46.831900 [0] Submit received by LEADER: 6
23:26:46.832200 [0] ... log=[{5 1} {6 1}]
23:26:46.832349 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.832477 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.832362 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.832345 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.833974 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.833996 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.834127 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:46.834135 [1] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:46.834201 [2] ... log is now: [{5 1} {6 1}]
23:26:46.834211 [1] ... log is now: [{5 1} {6 1}]
23:26:46.834391 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.834391 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.834639 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.834919 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.835115 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:46.835396 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.836113 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:2], matchIndex := map[1:-1 2:1]; commitIndex := 1
23:26:46.836175 [0] leader sets commitIndex := 1
23:26:46.836612 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.836736 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:46.836811 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.836839 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:46.836892 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:46.836894 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.836956 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.838303 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.838386 [1] ... setting commitIndex=1
23:26:46.838387 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.838452 [2] ... setting commitIndex=1
23:26:46.838495 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.838554 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.838604 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.838619 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:46.838680 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:46.838686 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:46.838727 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:46.838756 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:46.838794 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:46.839213 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.839936 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.886969 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.886954 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.888197 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.888316 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.888568 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.888694 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.890216 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.890329 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.937165 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.937203 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.938285 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.938297 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.938679 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.938685 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.942493 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.942570 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.987510 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.987494 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.988825 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.988825 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:46.989239 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.989238 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:46.990161 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:46.990691 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.037878 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.037873 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.038971 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.038970 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.039263 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.039264 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.040231 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.040308 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.083260 [TEST] Disconnect 0
23:26:47.088003 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.088018 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.138408 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.138395 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.174536 [TEST] Reconnect 0
23:26:47.188944 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.188977 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.191486 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.191486 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.191773 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.191773 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.192905 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.193708 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.239241 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.239231 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.240733 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.240734 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.241210 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.241210 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.245432 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.245512 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.289761 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.289755 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.291339 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.291344 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.291736 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.291735 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.293847 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.293932 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.340151 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.340136 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.341647 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.341648 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.342145 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.342145 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.343370 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.343902 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:47.375737 [0] Submit received by LEADER: 7
23:26:47.376142 [0] ... log=[{5 1} {6 1} {7 1}]
23:26:47.376351 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:47.376390 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:47.377627 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:47.377639 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:47.377840 [1] ... inserting entries [Command:7  Term:1] from index 2
23:26:47.377891 [2] ... inserting entries [Command:7  Term:1] from index 2
23:26:47.377947 [1] ... log is now: [{5 1} {6 1} {7 1}]
23:26:47.378003 [2] ... log is now: [{5 1} {6 1} {7 1}]
23:26:47.378275 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.378341 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.380547 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:3], matchIndex := map[1:1 2:2]; commitIndex := 2
23:26:47.380599 [0] leader sets commitIndex := 2
23:26:47.380628 [0] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:47.380664 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
23:26:47.380653 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.380756 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.380700 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:47.381349 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.381405 [2] ... setting commitIndex=2
23:26:47.381352 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:47.381432 [1] ... setting commitIndex=2
23:26:47.381581 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.381605 [2] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:47.381644 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:47.381582 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.381781 [1] commitChanSender entries=[{7 1}], savedLastApplied=1
23:26:47.381815 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
23:26:47.382964 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.384465 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.431289 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.431289 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.432261 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.432278 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.432577 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.432578 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.433625 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.434378 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.482033 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.482042 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.483137 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.483138 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.483526 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.483531 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.484607 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.485172 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.532903 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.532945 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.533941 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.533968 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.534318 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.534357 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.535985 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.536048 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.583905 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.583887 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.585053 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.585053 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:47.585438 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.585447 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.587228 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.587298 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:47.626905 [0] CM.Stop called
23:26:47.626961 [0] becomes Dead
23:26:47.627008 [0] commitChanSender done
23:26:47.627101 [0] Received quit signal. Shutting down...
23:26:47.627269 [0] CraftServer terminated!
23:26:47.627349 [1] CM.Stop called
23:26:47.627395 [1] becomes Dead
23:26:47.627444 [1] commitChanSender done
23:26:47.627509 [1] Received quit signal. Shutting down...
23:26:47.627638 [1] CraftServer terminated!
23:26:47.627696 [2] CM.Stop called
23:26:47.627746 [2] becomes Dead
23:26:47.627797 [2] commitChanSender done
23:26:47.627876 [2] Received quit signal. Shutting down...
23:26:47.627971 [2] CraftServer terminated!
--- PASS: TestDisconnectLeaderBriefly (1.10s)
=== RUN   TestCommitsWithLeaderDisconnects
23:26:47.630374 [0] listening at [::]:55782
23:26:47.630795 [1] listening at [::]:55783
23:26:47.631165 [2] listening at [::]:55784
23:26:47.631492 [3] listening at [::]:55785
23:26:47.631846 [4] listening at [::]:55786
23:26:47.632553 [3] election timer started (228ms), term=0
23:26:47.632587 [0] election timer started (152ms), term=0
23:26:47.632559 [4] election timer started (177ms), term=0
23:26:47.632573 [2] election timer started (169ms), term=0
23:26:47.632618 [1] election timer started (210ms), term=0
23:26:47.634822 [1] in election timer state=DEAD, bailing out
23:26:47.634852 [2] in election timer state=DEAD, bailing out
23:26:47.793296 [0] becomes Candidate (currentTerm=1); log=[]
23:26:47.793386 [0] election timer started (160ms), term=1
23:26:47.793448 [0] sending RequestVote to 3: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:47.793545 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:47.793616 [0] sending RequestVote to 4: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:47.793417 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:47.795252 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:47.795271 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:47.795384 [1] ... term out of date in RequestVote
23:26:47.795398 [2] ... term out of date in RequestVote
23:26:47.795324 [3] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:47.795430 [1] becomes Follower with term=1; log=[]
23:26:47.795452 [3] ... term out of date in RequestVote
23:26:47.795541 [3] becomes Follower with term=1; log=[]
23:26:47.795439 [2] becomes Follower with term=1; log=[]
23:26:47.795780 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:47.795833 [3] ... RequestVote reply: Term:1  VoteGranted:true
23:26:47.795818 [4] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:47.795973 [4] ... term out of date in RequestVote
23:26:47.796017 [4] becomes Follower with term=1; log=[]
23:26:47.796111 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:47.796305 [4] ... RequestVote reply: Term:1  VoteGranted:true
23:26:47.796427 [1] election timer started (218ms), term=1
23:26:47.797015 [2] election timer started (180ms), term=1
23:26:47.797904 [4] election timer started (241ms), term=1
23:26:47.797947 [3] election timer started (236ms), term=1
23:26:47.798114 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:47 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:47.798262 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:47 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:47.798357 [0] wins election with 3 votes
23:26:47.798382 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0 3:0 4:0], matchIndex=map[1:-1 2:-1 3:-1 4:-1]; log=[]
23:26:47.798468 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:47 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:47.798549 [0] while waiting for reply, state = LEADER
23:26:47.798586 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:47 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:47.798676 [0] while waiting for reply, state = LEADER
23:26:47.798746 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.798987 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799032 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799248 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799746 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799796 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799926 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.799992 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.800538 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.799987 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.800977 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.801973 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.802652 [3] in election timer term changed from 0 to 1, bailing out
23:26:47.802705 [1] in election timer term changed from 0 to 1, bailing out
23:26:47.802732 [2] in election timer term changed from 0 to 1, bailing out
23:26:47.802758 [4] in election timer term changed from 0 to 1, bailing out
23:26:47.803293 [0] AppendEntries reply from 3 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.803384 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.803464 [0] in election timer state=LEADER, bailing out
23:26:47.803497 [0] AppendEntries reply from 4 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.804020 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.848952 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.848931 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.849003 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.848962 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.850165 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.850169 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.850301 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.850535 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.850537 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.850167 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.850697 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.851542 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.853676 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.853763 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.853978 [0] AppendEntries reply from 3 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.854390 [0] AppendEntries reply from 4 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.899096 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.899096 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.899170 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.899130 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.900223 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.900322 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.900382 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.900417 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:47.900581 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.900663 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.900769 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.900732 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.903689 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.904139 [0] AppendEntries reply from 4 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.904219 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.904312 [0] AppendEntries reply from 3 success: nextIndex := map[1:0 2:0 3:0 4:0], matchIndex := map[1:-1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.934446 [0] Submit received by LEADER: 5
23:26:47.934821 [0] ... log=[{5 1}]
23:26:47.934901 [0] Submit received by LEADER: 6
23:26:47.935199 [0] ... log=[{5 1} {6 1}]
23:26:47.935347 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.935424 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.935624 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.935355 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.935720 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.936142 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.936352 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.936994 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.937118 [1] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:47.937101 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.937195 [1] ... log is now: [{5 1} {6 1}]
23:26:47.937219 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:47.937286 [2] ... log is now: [{5 1} {6 1}]
23:26:47.937376 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.937449 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.935363 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.938136 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:0 3:0 4:0], matchIndex := map[1:1 2:-1 3:-1 4:-1]; commitIndex := -1
23:26:47.938323 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.937101 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.938606 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.938561 [3] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:47.938641 [3] ... log is now: [{5 1} {6 1}]
23:26:47.938799 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.938920 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:0 4:0], matchIndex := map[1:1 2:1 3:-1 4:-1]; commitIndex := 1
23:26:47.938995 [0] leader sets commitIndex := 1
23:26:47.938936 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.939055 [4] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:47.939048 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.939122 [4] ... log is now: [{5 1} {6 1}]
23:26:47.939195 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.939286 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.940271 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.940633 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:47.940048 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.941011 [0] sending AppendEntries to 3: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:47.941222 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.941264 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:0], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
23:26:47.941399 [0] sending AppendEntries to 4: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:47.941012 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:47.942642 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:47.942610 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.942843 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:0], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
23:26:47.943378 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:47.943653 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.943607 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.944149 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.944166 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.944212 [1] ... setting commitIndex=1
23:26:47.944233 [2] ... setting commitIndex=1
23:26:47.944367 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.944380 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.944471 [3] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:47.944585 [3] ... setting commitIndex=1
23:26:47.944581 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.944716 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.944865 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.945223 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.945371 [3] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:47.945388 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:47.945429 [TEST] collectCommits(3) got {Command:5 Index:0 Term:1}
23:26:47.945470 [TEST] collectCommits(3) got {Command:6 Index:1 Term:1}
23:26:47.945494 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:47.945540 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:47.945653 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:47.945705 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:47.945770 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:47.945702 [4] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:1
23:26:47.945935 [4] ... setting commitIndex=1
23:26:47.946117 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.945907 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.946711 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.946775 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.946883 [4] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:47.946932 [TEST] collectCommits(4) got {Command:5 Index:0 Term:1}
23:26:47.946969 [TEST] collectCommits(4) got {Command:6 Index:1 Term:1}
23:26:47.948066 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.989257 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.989260 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.989297 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.989327 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.990162 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.990183 [4] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.990204 [3] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.990443 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.990442 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.990487 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.990173 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:47.990996 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:47.992468 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.992550 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.992621 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:47.992690 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.039469 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.039478 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.039540 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.039486 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.040408 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.040410 [4] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.040407 [3] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.040595 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.040701 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.040823 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.040853 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.040893 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.041833 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.044197 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.044288 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.044388 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.089666 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.089712 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.089694 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.089789 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.090750 [3] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.090805 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.090755 [4] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.090755 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.091123 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.091193 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.091341 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.091347 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.093175 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.093265 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.093341 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.093413 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.139924 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.139923 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.140008 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.139956 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.141004 [3] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.141134 [4] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.141187 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.141394 [3] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.141489 [4] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.141587 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.141012 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.143036 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:48.145042 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.145347 [0] AppendEntries reply from 4 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.145789 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.146049 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:1]; commitIndex := 1
23:26:48.186272 [TEST] Disconnect 0
23:26:48.190203 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.190192 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.190228 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.190264 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.197533 [0] Submit received by LEADER: 7
23:26:48.197911 [0] ... log=[{5 1} {6 1} {7 1}]
23:26:48.198110 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.198091 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.198076 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.198146 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.248137 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.248167 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.248153 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.248204 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.298170 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.298154 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.298184 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.298224 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.327742 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
23:26:48.327960 [2] election timer started (234ms), term=2
23:26:48.327901 [2] sending RequestVote to 4: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:48.328057 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:48.328078 [2] sending RequestVote to 3: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:48.327900 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1
23:26:48.330066 [1] RequestVote: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1 [currentTerm=1, votedFor=0, log index/term=(1, 1)]
23:26:48.330198 [1] ... term out of date in RequestVote
23:26:48.330147 [3] RequestVote: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1 [currentTerm=1, votedFor=0, log index/term=(1, 1)]
23:26:48.330161 [4] RequestVote: Term:2  CandidateId:2  LastLogIndex:1  LastLogTerm:1 [currentTerm=1, votedFor=0, log index/term=(1, 1)]
23:26:48.330272 [3] ... term out of date in RequestVote
23:26:48.330289 [4] ... term out of date in RequestVote
23:26:48.330243 [1] becomes Follower with term=2; log=[{5 1} {6 1}]
23:26:48.330325 [4] becomes Follower with term=2; log=[{5 1} {6 1}]
23:26:48.330322 [3] becomes Follower with term=2; log=[{5 1} {6 1}]
23:26:48.330665 [1] ... RequestVote reply: Term:2  VoteGranted:true
23:26:48.330702 [4] ... RequestVote reply: Term:2  VoteGranted:true
23:26:48.330751 [3] ... RequestVote reply: Term:2  VoteGranted:true
23:26:48.330847 [4] election timer started (219ms), term=2
23:26:48.330974 [3] election timer started (295ms), term=2
23:26:48.330776 [1] election timer started (209ms), term=2
23:26:48.332875 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:48 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:48.333018 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:48 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:48.333096 [2] wins election with 3 votes
23:26:48.333125 [2] becomes Leader; term=2, nextIndex=map[0:2 1:2 3:2 4:2], matchIndex=map[0:-1 1:-1 3:-1 4:-1]; log=[{5 1} {6 1}]
23:26:48.333234 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:48 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:48.333333 [2] while waiting for reply, state = LEADER
23:26:48.333372 [2] sending AppendEntries to 3: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.333398 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.333409 [2] sending AppendEntries to 1: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.333474 [2] sending AppendEntries to 4: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.334202 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.334215 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.334202 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.334440 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.334461 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.334623 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.335175 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:-1 3:1 4:-1]; commitIndex := 1
23:26:48.335947 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:-1]; commitIndex := 1
23:26:48.336044 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.336816 [1] in election timer term changed from 1 to 2, bailing out
23:26:48.338163 [3] in election timer term changed from 1 to 2, bailing out
23:26:48.338191 [2] in election timer state=LEADER, bailing out
23:26:48.338209 [4] in election timer term changed from 1 to 2, bailing out
23:26:48.349042 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.349069 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.349050 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.349108 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.383573 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.383588 [2] sending AppendEntries to 4: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.383561 [2] sending AppendEntries to 3: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.383565 [2] sending AppendEntries to 1: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.385060 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.385060 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.385060 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.385551 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.385549 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.385552 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.386792 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.387369 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.387448 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.400068 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.400093 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.400063 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.400125 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.433816 [2] sending AppendEntries to 1: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.433830 [2] sending AppendEntries to 3: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.433873 [2] sending AppendEntries to 4: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.433816 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.435056 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.435076 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.435056 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:48.435505 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.435524 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.435500 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.440079 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.440191 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.440288 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 3:2 4:2], matchIndex := map[0:-1 1:1 3:1 4:1]; commitIndex := 1
23:26:48.448718 [2] Submit received by LEADER: 8
23:26:48.448959 [2] ... log=[{5 1} {6 1} {8 2}]
23:26:48.449078 [2] sending AppendEntries to 3: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449089 [2] sending AppendEntries to 4: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449162 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449077 [2] sending AppendEntries to 1: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449838 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449838 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449945 [3] ... inserting entries [Command:8  Term:2] from index 2
23:26:48.449966 [1] ... inserting entries [Command:8  Term:2] from index 2
23:26:48.449838 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:48.449999 [3] ... log is now: [{5 1} {6 1} {8 2}]
23:26:48.450016 [1] ... log is now: [{5 1} {6 1} {8 2}]
23:26:48.450029 [4] ... inserting entries [Command:8  Term:2] from index 2
23:26:48.450092 [4] ... log is now: [{5 1} {6 1} {8 2}]
23:26:48.450183 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.450203 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.450129 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.450266 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.450270 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.450397 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.450510 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.451096 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:2 3:2 4:3], matchIndex := map[0:-1 1:1 3:1 4:2]; commitIndex := 1
23:26:48.451529 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 3:3 4:3], matchIndex := map[0:-1 1:1 3:2 4:2]; commitIndex := 2
23:26:48.451604 [2] leader sets commitIndex := 2
23:26:48.451651 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.451755 [2] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:48.451795 [TEST] collectCommits(2) got {Command:8 Index:2 Term:2}
23:26:48.451763 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.451782 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.451759 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.451837 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.452283 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.452283 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.452353 [3] ... setting commitIndex=2
23:26:48.452330 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.452376 [1] ... setting commitIndex=2
23:26:48.452391 [4] ... setting commitIndex=2
23:26:48.452536 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.452545 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.452556 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.452582 [1] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:48.452620 [TEST] collectCommits(1) got {Command:8 Index:2 Term:2}
23:26:48.452689 [4] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:48.452729 [TEST] collectCommits(4) got {Command:8 Index:2 Term:2}
23:26:48.452667 [3] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:48.452807 [TEST] collectCommits(3) got {Command:8 Index:2 Term:2}
23:26:48.453975 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.454054 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.454128 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.500287 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.500260 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.500256 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.500551 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.501816 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.501845 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.501812 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.501895 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.502897 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.502925 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.502917 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.503346 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.503385 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.503694 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.506322 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.507322 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.507427 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.551362 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.551375 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.551395 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.551622 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.551837 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.552010 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.551956 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.551829 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.553114 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.553114 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.553311 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.553466 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.553493 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.553690 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.554884 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.555539 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.555624 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.602210 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.602164 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.602164 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.602301 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.602500 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.602606 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.603283 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.603685 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.603735 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.603810 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.604093 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.604110 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.604111 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.602181 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.605204 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.605662 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.605749 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.652191 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.652305 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.652192 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.652682 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.652825 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.652607 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.652289 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.654094 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.654181 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.654231 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.654391 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.654406 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.654457 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.652198 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.657277 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.658071 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.658607 [2] AppendEntries reply from 4 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.699948 [TEST] Reconnect 0
23:26:48.702423 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.702486 [0] sending AppendEntries to 3: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.702779 [0] sending AppendEntries to 2: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.703123 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.703267 [2] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.702392 [0] sending AppendEntries to 1: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.702899 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.704387 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.702393 [0] sending AppendEntries to 4: ni=2, args=Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.705011 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.705172 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.705218 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.705273 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:48.705390 [0] ... term out of date in AppendEntries
23:26:48.705412 [0] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
23:26:48.705479 [0] ... inserting entries [Command:8  Term:2] from index 2
23:26:48.705541 [0] ... log is now: [{5 1} {6 1} {8 2}]
23:26:48.705577 [0] ... setting commitIndex=2
23:26:48.705735 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.705680 [4] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.706104 [2] AppendEntries reply from 3 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.706252 [4] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:48.706886 [0] election timer started (186ms), term=2
23:26:48.706956 [0] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:48.706996 [TEST] collectCommits(0) got {Command:8 Index:2 Term:2}
23:26:48.707140 [3] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.707258 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.707386 [3] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:48.707467 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.708436 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3 3:3 4:3], matchIndex := map[0:-1 1:2 3:2 4:2]; commitIndex := 2
23:26:48.709066 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.709498 [2] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.709573 [1] AppendEntries: Term:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:7  Term:1}  LeaderCommit:1
23:26:48.709787 [2] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:48.709816 [1] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:48.711018 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.752520 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.752538 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.752519 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.752519 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.753663 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.753663 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.753664 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.753970 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.753968 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.754172 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.755260 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.756006 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.756142 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.756230 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.756284 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.757715 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.802771 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.802933 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.802789 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.804399 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.804447 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.804526 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.805059 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.805093 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.805091 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.802794 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.806564 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.806861 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.808912 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.809118 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.809296 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.809376 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.853084 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.853039 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.853053 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.853944 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.855612 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.855735 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.856050 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.856034 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.856391 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.856759 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.857203 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.857502 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.858294 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.858486 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.859031 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.859462 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.903280 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.903258 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.903497 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.903261 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.904512 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.904512 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.904612 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.904685 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.904824 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.904821 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.904913 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.904824 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.909615 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.909719 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.909794 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.909869 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.953565 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.953528 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.953499 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.953499 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.955145 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.955145 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.955601 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.955602 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.955603 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.956001 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.956052 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:48.956448 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:48.957063 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.957246 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.957352 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:48.958276 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.003778 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.003803 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.003836 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.003806 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.005130 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.005133 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.005130 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.005577 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.005695 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.005682 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.005581 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.006083 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.007967 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.008059 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.008270 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.008460 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.054126 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.054211 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.054459 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.054170 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.055719 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.055743 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.055855 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.055885 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.056186 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.056190 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.056232 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.056266 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.061158 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.061249 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.061345 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.061427 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.104504 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.104503 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.104620 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.104503 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.106117 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.106115 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.106292 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.106402 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.106118 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.106540 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.106406 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.106745 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.107987 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.108604 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.108688 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.108772 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.154910 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.154925 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.154909 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.154946 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.156362 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.156395 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.156358 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.156811 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.156363 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.156986 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.156817 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.157151 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.158423 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.158891 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.159079 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.159236 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.205456 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.205543 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.205427 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.207656 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.207657 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.208066 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.208123 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.208062 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.208537 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.205433 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.209396 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.209399 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.209490 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.209659 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.210435 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.211148 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.255918 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.255926 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.255924 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.255929 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.257295 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.257419 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.257441 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.257508 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:49.257804 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.257814 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.257824 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.257891 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.259637 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.260050 [2] AppendEntries reply from 3 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.261245 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.261807 [2] AppendEntries reply from 4 success: nextIndex := map[0:3 1:3 3:3 4:3], matchIndex := map[0:2 1:2 3:2 4:2]; commitIndex := 2
23:26:49.301168 [2] Submit received by LEADER: 9
23:26:49.301731 [2] ... log=[{5 1} {6 1} {8 2} {9 2}]
23:26:49.301955 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.301980 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.302066 [2] sending AppendEntries to 3: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.301954 [2] sending AppendEntries to 4: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.303807 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.303938 [0] ... inserting entries [Command:9  Term:2] from index 3
23:26:49.303992 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
23:26:49.304018 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.304112 [3] ... inserting entries [Command:9  Term:2] from index 3
23:26:49.304155 [3] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
23:26:49.304180 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.304148 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.304236 [4] ... inserting entries [Command:9  Term:2] from index 3
23:26:49.304280 [4] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
23:26:49.304308 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.303805 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:49.304815 [1] ... inserting entries [Command:9  Term:2] from index 3
23:26:49.304877 [1] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
23:26:49.304881 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.305110 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.305287 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:3 3:3 4:3], matchIndex := map[0:3 1:2 3:2 4:2]; commitIndex := 2
23:26:49.305951 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:3 3:3 4:4], matchIndex := map[0:3 1:2 3:2 4:3]; commitIndex := 3
23:26:49.306012 [2] leader sets commitIndex := 3
23:26:49.306051 [2] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:49.306080 [TEST] collectCommits(2) got {Command:9 Index:3 Term:2}
23:26:49.306114 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:3 4:4], matchIndex := map[0:3 1:3 3:2 4:3]; commitIndex := 3
23:26:49.306193 [2] sending AppendEntries to 4: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.306268 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.306337 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.306409 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.306492 [2] sending AppendEntries to 3: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.306890 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.306956 [0] ... setting commitIndex=3
23:26:49.306955 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.307007 [3] ... setting commitIndex=3
23:26:49.307027 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.307079 [1] ... setting commitIndex=3
23:26:49.307092 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.307493 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.307493 [0] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:49.307533 [TEST] collectCommits(0) got {Command:9 Index:3 Term:2}
23:26:49.307620 [3] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:49.307669 [TEST] collectCommits(3) got {Command:9 Index:3 Term:2}
23:26:49.307729 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.307809 [4] ... setting commitIndex=3
23:26:49.307824 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.307966 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.308061 [4] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:49.308098 [TEST] collectCommits(4) got {Command:9 Index:3 Term:2}
23:26:49.307469 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.308588 [1] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:49.308628 [TEST] collectCommits(1) got {Command:9 Index:3 Term:2}
23:26:49.308983 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.309064 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.309493 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.356879 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.356863 [2] sending AppendEntries to 3: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.356863 [2] sending AppendEntries to 4: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.356863 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.358362 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.358362 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.358377 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.358565 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.358845 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.358930 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.358956 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.359101 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.360427 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.360859 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.360946 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.361029 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.407613 [2] sending AppendEntries to 4: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.407682 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.407606 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.407627 [2] sending AppendEntries to 3: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.408637 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.408637 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.408762 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.408829 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.408956 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.408976 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.409133 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.408959 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.410218 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.410309 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.410387 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.410908 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.457783 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.457766 [2] sending AppendEntries to 4: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.457761 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.457818 [2] sending AppendEntries to 3: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.458971 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.458992 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.459071 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.459117 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.459398 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.459455 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.459586 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.460130 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.460882 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.461139 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.461500 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.461613 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.507893 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.507892 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.507892 [2] sending AppendEntries to 3: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.507949 [2] sending AppendEntries to 4: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.509551 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.509542 [4] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.509601 [3] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.509684 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:49.510057 [3] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.510085 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.510056 [4] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.510060 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:49.517796 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.518258 [2] AppendEntries reply from 4 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.518349 [2] AppendEntries reply from 3 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.518432 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4 3:4 4:4], matchIndex := map[0:3 1:3 3:3 4:3]; commitIndex := 3
23:26:49.553698 [0] CM.Stop called
23:26:49.553746 [0] becomes Dead
23:26:49.553775 [0] commitChanSender done
23:26:49.553824 [0] Received quit signal. Shutting down...
23:26:49.553959 [0] CraftServer terminated!
23:26:49.554010 [1] CM.Stop called
23:26:49.554039 [1] becomes Dead
23:26:49.554070 [1] commitChanSender done
23:26:49.554109 [1] Received quit signal. Shutting down...
23:26:49.554193 [1] CraftServer terminated!
23:26:49.554224 [2] CM.Stop called
23:26:49.554248 [2] becomes Dead
23:26:49.554277 [2] commitChanSender done
23:26:49.554326 [2] Received quit signal. Shutting down...
23:26:49.554379 [2] CraftServer terminated!
23:26:49.554413 [3] CM.Stop called
23:26:49.554436 [3] becomes Dead
23:26:49.554470 [3] commitChanSender done
23:26:49.554522 [3] Received quit signal. Shutting down...
23:26:49.554583 [3] CraftServer terminated!
23:26:49.554617 [4] CM.Stop called
23:26:49.554643 [4] becomes Dead
23:26:49.554674 [4] commitChanSender done
23:26:49.554712 [4] Received quit signal. Shutting down...
23:26:49.554776 [4] CraftServer terminated!
23:26:49.557454 [0] in election timer state=DEAD, bailing out
23:26:49.561339 [4] in election timer state=DEAD, bailing out
23:26:49.561329 [1] in election timer state=DEAD, bailing out
23:26:49.561357 [3] in election timer state=DEAD, bailing out
--- PASS: TestCommitsWithLeaderDisconnects (1.98s)
=== RUN   TestCrashFollower
23:26:49.608383 [0] listening at [::]:55805
23:26:49.609091 [1] listening at [::]:55806
23:26:49.609731 [2] listening at [::]:55807
23:26:49.610125 [0] election timer started (182ms), term=0
23:26:49.610114 [1] election timer started (221ms), term=0
23:26:49.610135 [2] election timer started (189ms), term=0
23:26:49.801355 [2] becomes Candidate (currentTerm=1); log=[]
23:26:49.801355 [0] becomes Candidate (currentTerm=1); log=[]
23:26:49.801563 [2] election timer started (242ms), term=1
23:26:49.801583 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:49.801699 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:49.801683 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:49.801789 [0] election timer started (210ms), term=1
23:26:49.801561 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:49.803845 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:49.803885 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
23:26:49.804037 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:49.804114 [1] ... term out of date in RequestVote
23:26:49.804110 [2] ... RequestVote reply: Term:1
23:26:49.804111 [0] ... RequestVote reply: Term:1
23:26:49.804133 [1] becomes Follower with term=1; log=[]
23:26:49.804584 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:49.804753 [1] election timer started (274ms), term=1
23:26:49.806089 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:49 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:49.806102 [0] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:49 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:49.806317 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:49.806415 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:49 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:49.806504 [2] wins election with 2 votes
23:26:49.806513 [1] ... RequestVote reply: Term:1
23:26:49.806531 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:49.806619 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.806619 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.807894 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.807970 [0] becomes Follower with term=1; log=[]
23:26:49.808041 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.808138 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.808328 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.808997 [0] election timer started (299ms), term=1
23:26:49.810956 [1] in election timer term changed from 0 to 1, bailing out
23:26:49.811166 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.811211 [0] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:49 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:49.811302 [0] while waiting for reply, state = FOLLOWER
23:26:49.811325 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.811767 [2] in election timer state=LEADER, bailing out
23:26:49.856953 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.856911 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.858110 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.858109 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.858377 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.858379 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.859419 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.859974 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.907171 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.907171 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.908791 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.908791 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:49.909264 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.909266 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.911200 [2] Submit received by LEADER: 5
23:26:49.911401 [2] ... log=[{5 1}]
23:26:49.911492 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:49.911679 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.911743 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:49.911797 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:49.912206 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:49.912343 [1] ... inserting entries [Command:5  Term:1] from index 0
23:26:49.912420 [1] ... log is now: [{5 1}]
23:26:49.912334 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:49.912536 [0] ... inserting entries [Command:5  Term:1] from index 0
23:26:49.912619 [0] ... log is now: [{5 1}]
23:26:49.912589 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.913255 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.914107 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:0], matchIndex := map[0:0 1:-1]; commitIndex := 0
23:26:49.914166 [2] leader sets commitIndex := 0
23:26:49.914197 [2] commitChanSender entries=[{5 1}], savedLastApplied=-1
23:26:49.914251 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:49.914240 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.914306 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}
23:26:49.914787 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:49.914804 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.914877 [0] ... setting commitIndex=0
23:26:49.915002 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.915020 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}
23:26:49.915102 [1] ... setting commitIndex=0
23:26:49.915143 [0] commitChanSender entries=[{5 1}], savedLastApplied=-1
23:26:49.915183 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:49.915217 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.915445 [1] commitChanSender entries=[{5 1}], savedLastApplied=-1
23:26:49.915486 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:49.917661 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:49.917744 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:49.964467 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.964479 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.965308 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.965309 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:49.965538 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.965540 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:49.967015 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:49.967089 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.014859 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.014846 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.016760 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.016728 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.017112 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.017138 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.018165 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.018660 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.065217 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.065213 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.067257 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.067577 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.068317 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.068435 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.069651 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.069817 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.115253 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.115251 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.116674 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.116673 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.117092 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.117091 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.118389 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.119319 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.165284 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.165279 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.166349 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.166360 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.166739 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.166746 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.168050 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.169525 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.215387 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.215398 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.216987 [0] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.216988 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.217466 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.217468 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.218910 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.219502 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.261722 [TEST] Crash 0
23:26:50.261791 [TEST] Disconnect 0
23:26:50.262532 [0] CM.Stop called
23:26:50.262611 [0] becomes Dead
23:26:50.262683 [0] commitChanSender done
23:26:50.262761 [0] Received quit signal. Shutting down...
23:26:50.262970 [0] CraftServer terminated!
23:26:50.265388 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.265372 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.266678 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.267112 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.268040 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.269955 [0] in election timer state=DEAD, bailing out
23:26:50.272453 [0] in election timer state=DEAD, bailing out
23:26:50.315955 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.315959 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.317152 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.317545 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.319977 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.366005 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.366012 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.367144 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.367530 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.370073 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.416171 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.416170 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.417358 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.417746 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.420351 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.466313 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.466304 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.467349 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.467700 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.469858 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.516404 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.516427 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.517501 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.517889 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.519036 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.566524 [2] sending AppendEntries to 0: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.566522 [2] sending AppendEntries to 1: ni=1, args=Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.567602 [1] AppendEntries: Term:1  LeaderId:2  PrevLogTerm:1
23:26:50.568073 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.569304 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
23:26:50.614368 [1] CM.Stop called
23:26:50.614424 [1] becomes Dead
23:26:50.614483 [1] commitChanSender done
23:26:50.614580 [1] Received quit signal. Shutting down...
23:26:50.614737 [1] CraftServer terminated!
23:26:50.614798 [2] CM.Stop called
23:26:50.614841 [2] becomes Dead
23:26:50.614894 [2] commitChanSender done
23:26:50.614928 [1] in election timer state=DEAD, bailing out
23:26:50.614992 [2] Received quit signal. Shutting down...
23:26:50.615060 [2] CraftServer terminated!
--- PASS: TestCrashFollower (1.06s)
=== RUN   TestCrashThenRestartFollower
23:26:50.668985 [0] listening at [::]:55813
23:26:50.669186 [1] listening at [::]:55814
23:26:50.669355 [2] listening at [::]:55815
23:26:50.669491 [0] election timer started (236ms), term=0
23:26:50.669501 [1] election timer started (166ms), term=0
23:26:50.669494 [2] election timer started (283ms), term=0
23:26:50.840616 [1] becomes Candidate (currentTerm=1); log=[]
23:26:50.840759 [1] election timer started (295ms), term=1
23:26:50.840734 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:50.840736 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:50.842697 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:50.843213 [0] ... term out of date in RequestVote
23:26:50.843235 [0] becomes Follower with term=1; log=[]
23:26:50.843134 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:50.843300 [2] ... term out of date in RequestVote
23:26:50.843319 [2] becomes Follower with term=1; log=[]
23:26:50.843431 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:50.843498 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:50.843540 [0] election timer started (250ms), term=1
23:26:50.843592 [2] election timer started (161ms), term=1
23:26:50.844954 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:50 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:50.845067 [1] wins election with 2 votes
23:26:50.845091 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:50.845159 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:50 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:50.845248 [1] while waiting for reply, state = LEADER
23:26:50.845287 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.845312 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.845806 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.845817 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.846714 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.846731 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.848616 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.848677 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.849729 [2] in election timer term changed from 0 to 1, bailing out
23:26:50.849764 [0] in election timer term changed from 0 to 1, bailing out
23:26:50.851044 [1] in election timer state=LEADER, bailing out
23:26:50.895366 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.895352 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.896898 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.896936 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.898028 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.898103 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.899205 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.899750 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.945470 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.945481 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.946603 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.946605 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:50.946968 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.946992 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.948569 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.949605 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:50.971516 [1] Submit received by LEADER: 5
23:26:50.971867 [1] ... log=[{5 1}]
23:26:50.971947 [1] Submit received by LEADER: 6
23:26:50.972236 [1] ... log=[{5 1} {6 1}]
23:26:50.972333 [1] Submit received by LEADER: 7
23:26:50.972633 [1] ... log=[{5 1} {6 1} {7 1}]
23:26:50.972791 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.972813 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.972902 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.972940 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.973410 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.972787 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.974071 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.974080 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.974220 [0] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:50.974235 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:50.974315 [0] ... log is now: [{5 1} {6 1} {7 1}]
23:26:50.974324 [2] ... log is now: [{5 1} {6 1} {7 1}]
23:26:50.974501 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.974656 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.974643 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.974916 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.975423 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:0], matchIndex := map[0:2 2:-1]; commitIndex := 2
23:26:50.975494 [1] leader sets commitIndex := 2
23:26:50.975553 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:50.975704 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:50.976545 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:50.976592 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:50.976630 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
23:26:50.976356 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:50.977951 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:50.978024 [0] ... setting commitIndex=2
23:26:50.978171 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.978165 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:0], matchIndex := map[0:2 2:-1]; commitIndex := 2
23:26:50.978231 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:50.978295 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:50.978334 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:50.978359 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
23:26:50.978245 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.978504 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.978551 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:50.978795 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:50.978711 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.978821 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:50.979015 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.979069 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.979243 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:50.979377 [2] ... setting commitIndex=2
23:26:50.979518 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:50.979612 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:50.979666 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:50.979706 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:50.979730 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:50.979760 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:50.980102 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:50.980159 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:50.980282 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.025860 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.025863 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.026969 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.026970 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.027352 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.027368 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.030751 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.030829 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.076065 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.076050 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.077241 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.077259 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.077643 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.077661 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.078844 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.079442 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.126287 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.126265 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.127409 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.127410 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.127810 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.127842 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.128860 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.129596 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.176502 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.176522 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.177555 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.177554 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.177961 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.177981 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.179017 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.179652 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.226858 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.226874 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.228017 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.227999 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.228323 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.228322 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.231213 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.231315 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.277255 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.277272 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.278691 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.278694 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.279419 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.279429 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.281729 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.281816 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.323958 [TEST] Crash 2
23:26:51.324031 [TEST] Disconnect 2
23:26:51.324577 [2] CM.Stop called
23:26:51.324641 [2] becomes Dead
23:26:51.324689 [2] commitChanSender done
23:26:51.324762 [2] Received quit signal. Shutting down...
23:26:51.324968 [2] CraftServer terminated!
23:26:51.327615 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.327587 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.328958 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.329407 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.330796 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.334039 [2] in election timer state=DEAD, bailing out
23:26:51.378060 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.378023 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.379362 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.379796 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.380619 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.428540 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.428517 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.429634 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.430077 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.432393 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.479047 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.479071 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.480542 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.481025 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.483894 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.529545 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.529555 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.530917 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.531333 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.533114 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.580169 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.580205 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.581385 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.581794 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.583376 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.630896 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.630893 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.632033 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.632445 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.634378 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.675182 [TEST] Restart 2
23:26:51.677183 [2] listening at [::]:55823
23:26:51.677243 [TEST] Reconnect 2
23:26:51.677465 [2] election timer started (203ms), term=1
23:26:51.681638 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.681652 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.682326 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.682555 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.682918 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.682990 [2] ... setting commitIndex=2
23:26:51.683147 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.683226 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.683222 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:51.683312 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:51.683352 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:51.683384 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:51.686241 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.732191 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.732189 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.733578 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.733576 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.734073 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.734070 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.735033 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.735696 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.782275 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.782312 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.783410 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.783402 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.783845 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.783869 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.784780 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.785359 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.832880 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.832851 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.834144 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.834176 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.834567 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.834564 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.835559 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.836123 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.883529 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.883508 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.884575 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.884602 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.884963 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.884996 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.886241 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.887966 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.934353 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.934334 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.935797 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.935802 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.936257 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.936267 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.937670 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.938349 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.984439 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.984444 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.985601 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.985621 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:51.986001 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.986004 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:51.987909 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:51.987963 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.034492 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.034491 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.035581 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.035582 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.035974 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.036007 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.038700 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.038767 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.084544 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.084525 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.085625 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.085650 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.086051 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.086051 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.087119 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.087191 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.134643 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.134652 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.135827 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.135855 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.136230 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.136238 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.136922 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.136992 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.184674 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.184674 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.185338 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.185334 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.185757 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.185765 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.189341 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.189418 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.234916 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.234916 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.236173 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.236216 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.236585 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.236607 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.237791 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.238370 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.284970 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.284970 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.286090 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.286089 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.286493 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.286493 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.287926 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.287998 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.335137 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.335114 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.336230 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.336294 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.336437 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.336447 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.337003 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.337482 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.348484 [0] CM.Stop called
23:26:52.348533 [0] becomes Dead
23:26:52.348578 [0] commitChanSender done
23:26:52.348647 [0] Received quit signal. Shutting down...
23:26:52.348764 [0] CraftServer terminated!
23:26:52.348823 [1] CM.Stop called
23:26:52.348862 [1] becomes Dead
23:26:52.348914 [1] commitChanSender done
23:26:52.348983 [1] Received quit signal. Shutting down...
23:26:52.349070 [1] CraftServer terminated!
23:26:52.349130 [2] CM.Stop called
23:26:52.349167 [2] becomes Dead
23:26:52.349212 [2] commitChanSender done
23:26:52.349293 [2] Received quit signal. Shutting down...
23:26:52.349371 [2] CraftServer terminated!
23:26:52.354250 [0] in election timer state=DEAD, bailing out
23:26:52.357966 [2] in election timer state=DEAD, bailing out
--- PASS: TestCrashThenRestartFollower (1.73s)
=== RUN   TestCrashThenRestartLeader
23:26:52.404384 [0] listening at [::]:55825
23:26:52.405179 [1] listening at [::]:55826
23:26:52.405600 [2] listening at [::]:55827
23:26:52.405905 [2] election timer started (246ms), term=0
23:26:52.405913 [0] election timer started (219ms), term=0
23:26:52.405917 [1] election timer started (171ms), term=0
23:26:52.587090 [1] becomes Candidate (currentTerm=1); log=[]
23:26:52.587266 [1] election timer started (245ms), term=1
23:26:52.587216 [1] sending RequestVote to 2: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:52.587233 [1] sending RequestVote to 0: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1
23:26:52.589166 [2] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:52.589311 [2] ... term out of date in RequestVote
23:26:52.589163 [0] RequestVote: Term:1  CandidateId:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:52.589351 [2] becomes Follower with term=1; log=[]
23:26:52.589405 [0] ... term out of date in RequestVote
23:26:52.589449 [0] becomes Follower with term=1; log=[]
23:26:52.589680 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:52.589740 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:52.589829 [2] election timer started (284ms), term=1
23:26:52.589907 [0] election timer started (299ms), term=1
23:26:52.591165 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:52 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:52.591262 [1] wins election with 2 votes
23:26:52.591285 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
23:26:52.591348 [1] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:52 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:52.591427 [1] while waiting for reply, state = LEADER
23:26:52.591480 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.591495 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.592157 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.592156 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.592358 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.592382 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.594740 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.594814 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.596235 [0] in election timer term changed from 0 to 1, bailing out
23:26:52.596261 [2] in election timer term changed from 0 to 1, bailing out
23:26:52.597549 [1] in election timer state=LEADER, bailing out
23:26:52.641664 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.641653 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.642417 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.642423 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.642632 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.642637 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.644960 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.645078 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.691795 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.691831 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.693060 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.693109 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:52.693432 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.693450 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.694669 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.694780 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
23:26:52.707864 [1] Submit received by LEADER: 5
23:26:52.708220 [1] ... log=[{5 1}]
23:26:52.708313 [1] Submit received by LEADER: 6
23:26:52.708605 [1] ... log=[{5 1} {6 1}]
23:26:52.708687 [1] Submit received by LEADER: 7
23:26:52.708964 [1] ... log=[{5 1} {6 1} {7 1}]
23:26:52.709137 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.709194 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.709283 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.709254 [1] sending AppendEntries to 2: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.710493 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.710493 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.710644 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:52.710733 [2] ... log is now: [{5 1} {6 1} {7 1}]
23:26:52.710695 [0] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:52.710787 [0] ... log is now: [{5 1} {6 1} {7 1}]
23:26:52.710914 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.709114 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.711676 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.711549 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.709137 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.712864 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.713151 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:3], matchIndex := map[0:-1 2:2]; commitIndex := 2
23:26:52.713212 [1] leader sets commitIndex := 2
23:26:52.713385 [1] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:52.713688 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:52.713733 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:52.713869 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:52.713896 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
23:26:52.713826 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.713921 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.714117 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.714253 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.714718 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.714750 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:3], matchIndex := map[0:-1 2:2]; commitIndex := 2
23:26:52.714794 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.714966 [2] ... setting commitIndex=2
23:26:52.714998 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:3], matchIndex := map[0:-1 2:2]; commitIndex := 2
23:26:52.715078 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.715441 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:52.715546 [0] ... setting commitIndex=2
23:26:52.717198 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.718202 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:52.718268 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:52.718305 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:52.718336 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:52.718366 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.718540 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.718685 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.718683 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:52.718775 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:52.718812 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:52.718835 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
23:26:52.718834 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:52.719116 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.719347 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.720087 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.763743 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.763760 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.764894 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.764908 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.765345 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.765385 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.766592 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.767375 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.814127 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.814136 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.814916 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.814916 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.815095 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.815097 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.815870 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.815989 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.864588 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.864595 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.865247 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.865258 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.865440 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.865442 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.866678 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.866978 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.915223 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.915252 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.916396 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.916405 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.916801 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.916804 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.918821 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.918874 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.965844 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.965843 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.966986 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.966993 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:52.967392 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.967422 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:52.969678 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:52.969735 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:53.016518 [1] sending AppendEntries to 0: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.016518 [1] sending AppendEntries to 2: ni=3, args=Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.017092 [0] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.017103 [2] AppendEntries: Term:1  LeaderId:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.017270 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:53.017277 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:53.017886 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:53.018400 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
23:26:53.060272 [TEST] Crash 1
23:26:53.060337 [TEST] Disconnect 1
23:26:53.060826 [1] CM.Stop called
23:26:53.060876 [1] becomes Dead
23:26:53.060921 [1] commitChanSender done
23:26:53.061003 [1] Received quit signal. Shutting down...
23:26:53.061105 [1] CraftServer terminated!
23:26:53.310989 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1} {7 1}]
23:26:53.311174 [2] election timer started (204ms), term=2
23:26:53.311174 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:53.311242 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:53.313028 [0] RequestVote: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1 [currentTerm=1, votedFor=1, log index/term=(2, 1)]
23:26:53.313159 [0] ... term out of date in RequestVote
23:26:53.313199 [0] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
23:26:53.313504 [0] ... RequestVote reply: Term:2  VoteGranted:true
23:26:53.313579 [0] election timer started (164ms), term=2
23:26:53.314546 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:53 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:53.314638 [2] wins election with 2 votes
23:26:53.314664 [2] becomes Leader; term=2, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
23:26:53.314767 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.314772 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.315283 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.315491 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.316697 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:-1]; commitIndex := 2
23:26:53.320503 [0] in election timer term changed from 1 to 2, bailing out
23:26:53.321411 [2] in election timer state=LEADER, bailing out
23:26:53.364980 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.364981 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.366210 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.366620 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.369191 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:-1]; commitIndex := 2
23:26:53.411360 [TEST] Restart 1
23:26:53.412936 [1] listening at [::]:55839
23:26:53.412995 [TEST] Reconnect 1
23:26:53.413284 [1] election timer started (235ms), term=1
23:26:53.415109 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.415111 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.416312 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.416708 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.416865 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.417330 [1] ... term out of date in AppendEntries
23:26:53.417365 [1] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
23:26:53.417466 [1] ... setting commitIndex=2
23:26:53.417740 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.420198 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:-1]; commitIndex := 2
23:26:53.418078 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:53.420285 [TEST] collectCommits(1) got {Command:5 Index:0 Term:2}
23:26:53.420309 [TEST] collectCommits(1) got {Command:6 Index:1 Term:2}
23:26:53.420368 [TEST] collectCommits(1) got {Command:7 Index:2 Term:2}
23:26:53.420706 [1] election timer started (167ms), term=2
23:26:53.421212 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.423707 [1] in election timer term changed from 1 to 2, bailing out
23:26:53.465303 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.465346 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.466440 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.466441 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.466829 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.466834 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.467974 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.468906 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.515529 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.515556 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.516636 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.516639 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.517054 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.517085 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.519106 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.520125 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.565814 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.565801 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.567002 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.567113 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.567540 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.567547 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.568343 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.568674 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.616492 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.616591 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.617924 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.617925 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.618122 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.618163 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.618789 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.619008 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.668972 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.669009 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.669457 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.669607 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.669630 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.669932 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.671108 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.671280 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.719644 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.719642 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.720006 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.720103 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.720101 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.720188 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.720677 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.720792 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.770392 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.770393 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.770882 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.770921 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.771225 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.771049 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.771585 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.771757 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.821238 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.821238 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.821597 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.821597 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.821833 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.822330 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.823683 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.823720 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.871652 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.871653 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.872025 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.872025 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.872124 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.872127 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.872706 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.872800 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.921797 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.921787 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.922777 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.922780 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.923094 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.923131 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.925096 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.925320 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.971878 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.971898 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.973186 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.973198 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:53.973586 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.973617 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:53.975362 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.975820 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
23:26:53.984083 [0] CM.Stop called
23:26:53.984110 [0] becomes Dead
23:26:53.984134 [0] commitChanSender done
23:26:53.984177 [0] Received quit signal. Shutting down...
23:26:53.984291 [0] CraftServer terminated!
23:26:53.984328 [1] CM.Stop called
23:26:53.984351 [1] becomes Dead
23:26:53.984381 [1] commitChanSender done
23:26:53.984454 [1] Received quit signal. Shutting down...
23:26:53.984494 [1] CraftServer terminated!
23:26:53.984524 [2] CM.Stop called
23:26:53.984548 [2] becomes Dead
23:26:53.984571 [2] commitChanSender done
23:26:53.984622 [2] Received quit signal. Shutting down...
23:26:53.984676 [2] CraftServer terminated!
23:26:53.991467 [1] in election timer state=DEAD, bailing out
23:26:53.993893 [0] in election timer state=DEAD, bailing out
--- PASS: TestCrashThenRestartLeader (1.63s)
=== RUN   TestCrashThenRestartAll
23:26:54.038672 [0] listening at [::]:55844
23:26:54.039099 [1] listening at [::]:55845
23:26:54.039509 [2] listening at [::]:55846
23:26:54.039719 [2] election timer started (204ms), term=0
23:26:54.039725 [1] election timer started (248ms), term=0
23:26:54.039724 [0] election timer started (189ms), term=0
23:26:54.230918 [0] becomes Candidate (currentTerm=1); log=[]
23:26:54.231172 [0] election timer started (269ms), term=1
23:26:54.231138 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:54.231144 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:54.233343 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:54.233424 [1] ... term out of date in RequestVote
23:26:54.233391 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:54.233445 [2] ... term out of date in RequestVote
23:26:54.233443 [1] becomes Follower with term=1; log=[]
23:26:54.233462 [2] becomes Follower with term=1; log=[]
23:26:54.233597 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:54.233597 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:54.233668 [1] election timer started (183ms), term=1
23:26:54.233763 [2] election timer started (184ms), term=1
23:26:54.234802 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:54 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:54.235059 [0] wins election with 2 votes
23:26:54.235138 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:54.235539 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:54 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:54.235652 [0] while waiting for reply, state = LEADER
23:26:54.235705 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.235707 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.236338 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.236471 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.236527 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.236656 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.238300 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.238372 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.240080 [1] in election timer term changed from 0 to 1, bailing out
23:26:54.240106 [2] in election timer term changed from 0 to 1, bailing out
23:26:54.241497 [0] in election timer state=LEADER, bailing out
23:26:54.285979 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.285987 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.287264 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.287266 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.287655 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.287691 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.290374 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.290449 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.336148 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.336136 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.336908 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.336908 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:54.337167 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.337166 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.338565 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.339171 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:54.341114 [0] Submit received by LEADER: 5
23:26:54.341318 [0] ... log=[{5 1}]
23:26:54.341362 [0] Submit received by LEADER: 6
23:26:54.341574 [0] ... log=[{5 1} {6 1}]
23:26:54.341630 [0] Submit received by LEADER: 7
23:26:54.341787 [0] ... log=[{5 1} {6 1} {7 1}]
23:26:54.341883 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.341880 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.341951 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.342049 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.342226 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.343099 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.343260 [2] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:54.343371 [2] ... log is now: [{5 1} {6 1} {7 1}]
23:26:54.343226 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.343558 [1] ... inserting entries [Command:5  Term:1 Command:6  Term:1 Command:7  Term:1] from index 0
23:26:54.343637 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.343646 [1] ... log is now: [{5 1} {6 1} {7 1}]
23:26:54.343813 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.343794 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.345828 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.345919 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:3], matchIndex := map[1:-1 2:2]; commitIndex := 2
23:26:54.346000 [0] leader sets commitIndex := 2
23:26:54.346043 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.346117 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.345845 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.347052 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.347940 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:54.348235 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:54.348428 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:54.348473 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:54.348505 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
23:26:54.348497 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.348885 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.348905 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.349181 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.349214 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:-1
23:26:54.349232 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  Entries:{Command:7  Term:1}  LeaderCommit:2
23:26:54.349378 [1] ... setting commitIndex=2
23:26:54.349497 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.349530 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.350012 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:54.350083 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:54.350138 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:54.350102 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.350189 [2] ... setting commitIndex=2
23:26:54.350281 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
23:26:54.349299 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.350545 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.350628 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.350742 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
23:26:54.351421 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.351473 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:54.351512 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:54.351536 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
23:26:54.351849 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.352979 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.396452 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.396461 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.397820 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.397816 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.398262 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.398269 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.401454 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.401539 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.446711 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.446700 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.447990 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.447991 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.448424 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.448437 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.450357 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.450424 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.496989 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.496959 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.498030 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.498031 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.498416 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.498419 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.499404 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.500723 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.547351 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.547340 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.547912 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.547912 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.549399 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.549412 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.551247 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.552489 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.597845 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.597877 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.598989 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.599039 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.599391 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.599420 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.601336 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.601393 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.648314 [0] sending AppendEntries to 2: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.648347 [0] sending AppendEntries to 1: ni=3, args=Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.649351 [2] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.649364 [1] AppendEntries: Term:1  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:2
23:26:54.649727 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.649753 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:54.651324 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.652194 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
23:26:54.693067 [TEST] Crash 0
23:26:54.693128 [TEST] Disconnect 0
23:26:54.693667 [0] CM.Stop called
23:26:54.693711 [0] becomes Dead
23:26:54.693764 [0] commitChanSender done
23:26:54.693836 [0] Received quit signal. Shutting down...
23:26:54.694009 [0] CraftServer terminated!
23:26:54.694057 [TEST] Crash 1
23:26:54.694096 [TEST] Disconnect 1
23:26:54.694249 [1] CM.Stop called
23:26:54.694287 [1] becomes Dead
23:26:54.694330 [1] commitChanSender done
23:26:54.694440 [1] Received quit signal. Shutting down...
23:26:54.694512 [1] CraftServer terminated!
23:26:54.694556 [TEST] Crash 2
23:26:54.694585 [TEST] Disconnect 2
23:26:54.694630 [2] CM.Stop called
23:26:54.694668 [2] becomes Dead
23:26:54.694719 [2] commitChanSender done
23:26:54.694784 [2] Received quit signal. Shutting down...
23:26:54.694890 [2] CraftServer terminated!
23:26:54.704357 [1] in election timer state=DEAD, bailing out
23:26:54.704364 [2] in election timer state=DEAD, bailing out
23:26:55.046037 [TEST] Restart 0
23:26:55.048069 [0] listening at [::]:55854
23:26:55.048147 [TEST] Reconnect 0
23:26:55.048230 [0] election timer started (284ms), term=1
23:26:55.069290 [TEST] Restart 1
23:26:55.070922 [1] listening at [::]:55855
23:26:55.070984 [TEST] Reconnect 1
23:26:55.071265 [1] election timer started (271ms), term=1
23:26:55.091550 [TEST] Restart 2
23:26:55.093068 [2] listening at [::]:55856
23:26:55.093118 [TEST] Reconnect 2
23:26:55.093426 [2] election timer started (187ms), term=1
23:26:55.283817 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1} {7 1}]
23:26:55.284066 [2] election timer started (250ms), term=2
23:26:55.284058 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:55.284153 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1
23:26:55.286631 [1] RequestVote: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1 [currentTerm=1, votedFor=0, log index/term=(2, 1)]
23:26:55.286622 [0] RequestVote: Term:2  CandidateId:2  LastLogIndex:2  LastLogTerm:1 [currentTerm=1, votedFor=0, log index/term=(2, 1)]
23:26:55.286725 [1] ... term out of date in RequestVote
23:26:55.286746 [0] ... term out of date in RequestVote
23:26:55.286759 [1] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
23:26:55.286767 [0] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
23:26:55.287002 [0] ... RequestVote reply: Term:2  VoteGranted:true
23:26:55.287009 [1] ... RequestVote reply: Term:2  VoteGranted:true
23:26:55.287096 [1] election timer started (230ms), term=2
23:26:55.287097 [0] election timer started (208ms), term=2
23:26:55.288375 [0] in election timer term changed from 1 to 2, bailing out
23:26:55.288479 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.288588 [2] wins election with 2 votes
23:26:55.288615 [2] becomes Leader; term=2, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
23:26:55.288709 [2] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.288865 [2] while waiting for reply, state = LEADER
23:26:55.288920 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.289137 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.289596 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.289668 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.289829 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.289879 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.291609 [1] in election timer term changed from 1 to 2, bailing out
23:26:55.292445 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:-1]; commitIndex := -1
23:26:55.292935 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
23:26:55.294355 [2] in election timer state=LEADER, bailing out
23:26:55.338966 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.338940 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.340376 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.340390 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.340815 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.340815 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.343129 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
23:26:55.343209 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
23:26:55.389009 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.389009 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.390023 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.390045 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  LeaderCommit:-1
23:26:55.390337 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.391143 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.394795 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
23:26:55.401594 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
23:26:55.414622 [2] Submit received by LEADER: 8
23:26:55.414935 [2] ... log=[{5 1} {6 1} {7 1} {8 2}]
23:26:55.415051 [2] sending AppendEntries to 1: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:-1
23:26:55.415038 [2] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:-1
23:26:55.415762 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:-1
23:26:55.415764 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:2  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:-1
23:26:55.415874 [0] ... inserting entries [Command:8  Term:2] from index 3
23:26:55.415893 [1] ... inserting entries [Command:8  Term:2] from index 3
23:26:55.415922 [0] ... log is now: [{5 1} {6 1} {7 1} {8 2}]
23:26:55.415943 [1] ... log is now: [{5 1} {6 1} {7 1} {8 2}]
23:26:55.416100 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.416127 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.417333 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:4], matchIndex := map[0:2 1:3]; commitIndex := 3
23:26:55.417393 [2] leader sets commitIndex := 3
23:26:55.417443 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.417438 [2] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
23:26:55.417509 [TEST] collectCommits(2) got {Command:5 Index:0 Term:2}
23:26:55.417505 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.417550 [TEST] collectCommits(2) got {Command:6 Index:1 Term:2}
23:26:55.417548 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.417628 [TEST] collectCommits(2) got {Command:7 Index:2 Term:2}
23:26:55.417665 [TEST] collectCommits(2) got {Command:8 Index:3 Term:2}
23:26:55.418032 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.418043 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.418098 [0] ... setting commitIndex=3
23:26:55.418114 [1] ... setting commitIndex=3
23:26:55.418251 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.418284 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.418301 [0] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
23:26:55.418366 [TEST] collectCommits(0) got {Command:5 Index:0 Term:2}
23:26:55.418397 [TEST] collectCommits(0) got {Command:6 Index:1 Term:2}
23:26:55.418429 [TEST] collectCommits(0) got {Command:7 Index:2 Term:2}
23:26:55.418457 [TEST] collectCommits(0) got {Command:8 Index:3 Term:2}
23:26:55.418512 [1] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
23:26:55.418588 [TEST] collectCommits(1) got {Command:5 Index:0 Term:2}
23:26:55.418621 [TEST] collectCommits(1) got {Command:6 Index:1 Term:2}
23:26:55.418652 [TEST] collectCommits(1) got {Command:7 Index:2 Term:2}
23:26:55.418677 [TEST] collectCommits(1) got {Command:8 Index:3 Term:2}
23:26:55.419440 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.419502 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.467586 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.467542 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.468888 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.469570 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.469453 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.469714 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.470665 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.470730 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.518313 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.518323 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.519205 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.519206 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.519442 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.519467 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.520828 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.520896 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.568419 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.568420 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.569561 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.569584 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.569973 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.569976 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.572459 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.572536 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.618465 [2] sending AppendEntries to 1: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.618483 [2] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.619723 [1] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.619723 [0] AppendEntries: Term:2  LeaderId:2  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:55.620167 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.620194 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:55.621563 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.621638 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
23:26:55.666147 [0] CM.Stop called
23:26:55.666190 [0] becomes Dead
23:26:55.666215 [0] commitChanSender done
23:26:55.666253 [0] Received quit signal. Shutting down...
23:26:55.666350 [0] CraftServer terminated!
23:26:55.666389 [1] CM.Stop called
23:26:55.666412 [1] becomes Dead
23:26:55.666438 [1] commitChanSender done
23:26:55.666480 [1] Received quit signal. Shutting down...
23:26:55.666580 [1] CraftServer terminated!
23:26:55.666619 [2] CM.Stop called
23:26:55.666644 [2] becomes Dead
23:26:55.666670 [2] commitChanSender done
23:26:55.666701 [2] Received quit signal. Shutting down...
23:26:55.666758 [2] CraftServer terminated!
23:26:55.667707 [0] in election timer state=DEAD, bailing out
23:26:55.667730 [1] in election timer state=DEAD, bailing out
--- PASS: TestCrashThenRestartAll (1.68s)
=== RUN   TestReplaceMultipleLogEntries
23:26:55.719556 [0] listening at [::]:55860
23:26:55.719715 [1] listening at [::]:55861
23:26:55.719860 [2] listening at [::]:55862
23:26:55.719967 [1] election timer started (261ms), term=0
23:26:55.719970 [0] election timer started (200ms), term=0
23:26:55.719968 [2] election timer started (201ms), term=0
23:26:55.921130 [0] becomes Candidate (currentTerm=1); log=[]
23:26:55.921171 [2] becomes Candidate (currentTerm=1); log=[]
23:26:55.921266 [0] election timer started (199ms), term=1
23:26:55.921275 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:55.921258 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:55.921775 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:55.921962 [2] election timer started (236ms), term=1
23:26:55.921811 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:55.923649 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:55.923738 [1] ... term out of date in RequestVote
23:26:55.923753 [1] becomes Follower with term=1; log=[]
23:26:55.923939 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:55.923928 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
23:26:55.924097 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:55.924152 [0] ... RequestVote reply: Term:1
23:26:55.924331 [1] ... RequestVote reply: Term:1
23:26:55.926511 [1] election timer started (189ms), term=1
23:26:55.927596 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
23:26:55.927889 [2] ... RequestVote reply: Term:1
23:26:55.927972 [2] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.928053 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.928125 [2] wins election with 2 votes
23:26:55.928101 [0] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.928142 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:55.928206 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.928225 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.928613 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.928697 [0] becomes Follower with term=1; log=[]
23:26:55.928662 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.928879 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:55.928946 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:55.928930 [0] received RequestVoteReply &{Msg:Term:1 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:55 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:55.929286 [0] while waiting for reply, state = FOLLOWER
23:26:55.929358 [0] election timer started (218ms), term=1
23:26:55.930078 [1] in election timer term changed from 0 to 1, bailing out
23:26:55.930705 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:55.931182 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:55.932140 [2] in election timer state=LEADER, bailing out
23:26:55.978411 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.978397 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.979405 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.979405 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:55.979775 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:55.979782 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:55.980966 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:55.981504 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:56.021485 [2] Submit received by LEADER: 5
23:26:56.021673 [2] ... log=[{5 1}]
23:26:56.021708 [2] Submit received by LEADER: 6
23:26:56.021822 [2] ... log=[{5 1} {6 1}]
23:26:56.021892 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.021900 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.021924 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.021893 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.022809 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.023041 [1] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:56.023305 [1] ... log is now: [{5 1} {6 1}]
23:26:56.023455 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.023490 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.023210 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.023649 [0] ... inserting entries [Command:5  Term:1 Command:6  Term:1] from index 0
23:26:56.023702 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.023704 [0] ... log is now: [{5 1} {6 1}]
23:26:56.023878 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.025298 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  Entries:{Command:6  Term:1}  LeaderCommit:-1
23:26:56.026780 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.028180 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]; commitIndex := 1
23:26:56.028252 [2] leader sets commitIndex := 1
23:26:56.028298 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.028620 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.028721 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.028899 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.028953 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:56.028998 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
23:26:56.029033 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
23:26:56.029177 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.029229 [0] ... setting commitIndex=1
23:26:56.029202 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.029241 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.029277 [1] ... setting commitIndex=1
23:26:56.029363 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.029406 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:56.029458 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:56.029541 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.029555 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
23:26:56.029701 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
23:26:56.029804 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
23:26:56.029837 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
23:26:56.030539 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.030784 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.078630 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.078612 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.080537 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.080559 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.080823 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.080857 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.081910 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.081974 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.128826 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.128846 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.129436 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.129445 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.129614 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.129616 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.130230 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.131151 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.179063 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.179077 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.180107 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.180152 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.180506 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.180533 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.183919 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.184018 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.229406 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.229375 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.230586 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.230589 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.231019 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.231061 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:56.232413 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.232466 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:26:56.271981 [TEST] Disconnect 2
23:26:56.279684 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.279680 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.283124 [2] Submit received by LEADER: 21
23:26:56.283467 [2] ... log=[{5 1} {6 1} {21 1}]
23:26:56.283625 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  LeaderCommit:1
23:26:56.283620 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  LeaderCommit:1
23:26:56.288796 [2] Submit received by LEADER: 22
23:26:56.289170 [2] ... log=[{5 1} {6 1} {21 1} {22 1}]
23:26:56.289331 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  LeaderCommit:1
23:26:56.289345 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  LeaderCommit:1
23:26:56.294442 [2] Submit received by LEADER: 23
23:26:56.294617 [2] ... log=[{5 1} {6 1} {21 1} {22 1} {23 1}]
23:26:56.295296 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  LeaderCommit:1
23:26:56.295365 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  LeaderCommit:1
23:26:56.300350 [2] Submit received by LEADER: 24
23:26:56.300758 [2] ... log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
23:26:56.300931 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.300951 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.351141 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.351117 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.401368 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.401390 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.427344 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
23:26:56.427620 [1] election timer started (204ms), term=2
23:26:56.427584 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogIndex:1  LastLogTerm:1
23:26:56.427578 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogIndex:1  LastLogTerm:1
23:26:56.429393 [0] RequestVote: Term:2  CandidateId:1  LastLogIndex:1  LastLogTerm:1 [currentTerm=1, votedFor=-1, log index/term=(1, 1)]
23:26:56.429535 [0] ... term out of date in RequestVote
23:26:56.429580 [0] becomes Follower with term=2; log=[{5 1} {6 1}]
23:26:56.429930 [0] ... RequestVote reply: Term:2  VoteGranted:true
23:26:56.430065 [0] in election timer term changed from 1 to 2, bailing out
23:26:56.430106 [0] election timer started (156ms), term=2
23:26:56.431348 [1] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:56 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:56.431427 [0] in election timer term changed from 1 to 2, bailing out
23:26:56.431443 [1] wins election with 2 votes
23:26:56.431474 [1] becomes Leader; term=2, nextIndex=map[0:2 2:2], matchIndex=map[0:-1 2:-1]; log=[{5 1} {6 1}]
23:26:56.431567 [1] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.431585 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.432084 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  LeaderCommit:1
23:26:56.432278 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.434857 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:-1]; commitIndex := 1
23:26:56.438177 [1] in election timer state=LEADER, bailing out
23:26:56.451550 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.451534 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.456761 [1] Submit received by LEADER: 8
23:26:56.457023 [1] ... log=[{5 1} {6 1} {8 2}]
23:26:56.457190 [1] sending AppendEntries to 0: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:56.457856 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:56.458548 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:1
23:26:56.458629 [0] ... inserting entries [Command:8  Term:2] from index 2
23:26:56.458666 [0] ... log is now: [{5 1} {6 1} {8 2}]
23:26:56.458810 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.459566 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:-1]; commitIndex := 2
23:26:56.459675 [1] leader sets commitIndex := 2
23:26:56.459734 [1] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:56.459793 [TEST] collectCommits(1) got {Command:8 Index:2 Term:2}
23:26:56.459778 [1] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:1  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:56.459827 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  LeaderCommit:2
23:26:56.460523 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:2  PrevLogTerm:2  LeaderCommit:2
23:26:56.460589 [0] ... setting commitIndex=2
23:26:56.460743 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.460799 [0] commitChanSender entries=[{8 2}], savedLastApplied=1
23:26:56.460836 [TEST] collectCommits(0) got {Command:8 Index:2 Term:2}
23:26:56.461873 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:-1]; commitIndex := 2
23:26:56.462183 [1] Submit received by LEADER: 9
23:26:56.462354 [1] ... log=[{5 1} {6 1} {8 2} {9 2}]
23:26:56.462460 [1] sending AppendEntries to 0: ni=3, args=Term:2  LeaderId:1  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:56.462488 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:56.463355 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:2  PrevLogTerm:2  Entries:{Command:9  Term:2}  LeaderCommit:2
23:26:56.463460 [0] ... inserting entries [Command:9  Term:2] from index 3
23:26:56.463508 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
23:26:56.463733 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.465117 [1] AppendEntries reply from 0 success: nextIndex := map[0:4 2:2], matchIndex := map[0:3 2:-1]; commitIndex := 3
23:26:56.465213 [1] leader sets commitIndex := 3
23:26:56.465258 [1] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:56.465299 [TEST] collectCommits(1) got {Command:9 Index:3 Term:2}
23:26:56.465287 [1] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:1  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:56.465298 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  LeaderCommit:3
23:26:56.465911 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:3  PrevLogTerm:2  LeaderCommit:3
23:26:56.465982 [0] ... setting commitIndex=3
23:26:56.466153 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.466201 [0] commitChanSender entries=[{9 2}], savedLastApplied=2
23:26:56.466245 [TEST] collectCommits(0) got {Command:9 Index:3 Term:2}
23:26:56.466769 [1] AppendEntries reply from 0 success: nextIndex := map[0:4 2:2], matchIndex := map[0:3 2:-1]; commitIndex := 3
23:26:56.467562 [1] Submit received by LEADER: 10
23:26:56.467703 [1] ... log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.467799 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:3
23:26:56.467785 [1] sending AppendEntries to 0: ni=4, args=Term:2  LeaderId:1  PrevLogIndex:3  PrevLogTerm:2  Entries:{Command:10  Term:2}  LeaderCommit:3
23:26:56.468601 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:3  PrevLogTerm:2  Entries:{Command:10  Term:2}  LeaderCommit:3
23:26:56.468707 [0] ... inserting entries [Command:10  Term:2] from index 4
23:26:56.468761 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.468950 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.469541 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.469600 [1] leader sets commitIndex := 4
23:26:56.469645 [1] commitChanSender entries=[{10 2}], savedLastApplied=3
23:26:56.469686 [TEST] collectCommits(1) got {Command:10 Index:4 Term:2}
23:26:56.469651 [1] sending AppendEntries to 0: ni=5, args=Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.469669 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.470124 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.470183 [0] ... setting commitIndex=4
23:26:56.470323 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.470374 [0] commitChanSender entries=[{10 2}], savedLastApplied=3
23:26:56.470406 [TEST] collectCommits(0) got {Command:10 Index:4 Term:2}
23:26:56.470880 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.501618 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.501660 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.520822 [1] sending AppendEntries to 0: ni=5, args=Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.520808 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.521955 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.522374 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.524068 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.551812 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.551832 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.570922 [1] sending AppendEntries to 0: ni=5, args=Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.570879 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.572011 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.572420 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.573084 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.604390 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.604219 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.623750 [1] sending AppendEntries to 0: ni=5, args=Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.624165 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.624717 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.624910 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.627554 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.654622 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.654604 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.674167 [1] sending AppendEntries to 0: ni=5, args=Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.674142 [1] sending AppendEntries to 2: ni=2, args=Term:2  LeaderId:1  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.674811 [0] AppendEntries: Term:2  LeaderId:1  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.675001 [0] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:56.676081 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:2], matchIndex := map[0:4 2:-1]; commitIndex := 4
23:26:56.705268 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.705305 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.718050 [TEST] Crash 1
23:26:56.718105 [TEST] Disconnect 1
23:26:56.718377 [1] CM.Stop called
23:26:56.718424 [1] becomes Dead
23:26:56.718465 [1] commitChanSender done
23:26:56.718530 [1] Received quit signal. Shutting down...
23:26:56.718643 [1] CraftServer terminated!
23:26:56.755791 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.755807 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.779137 [TEST] Restart 1
23:26:56.780556 [1] listening at [::]:55876
23:26:56.780612 [TEST] Reconnect 1
23:26:56.780894 [1] election timer started (250ms), term=2
23:26:56.806439 [2] sending AppendEntries to 1: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.806481 [2] sending AppendEntries to 0: ni=2, args=Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.808590 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:21  Term:1}  Entries:{Command:22  Term:1}  Entries:{Command:23  Term:1}  Entries:{Command:24  Term:1}  LeaderCommit:1
23:26:56.808981 [1] AppendEntries reply: Term:2 Success:%!d(bool=false)
23:26:56.810293 [2] term out of date in heartbeat reply
23:26:56.810313 [2] becomes Follower with term=2; log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
23:26:56.810377 [2] election timer started (186ms), term=2
23:26:56.831266 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.831445 [0] sending RequestVote to 2: Term:3  LastLogIndex:4  LastLogTerm:2
23:26:56.831469 [0] sending RequestVote to 1: Term:3  LastLogIndex:4  LastLogTerm:2
23:26:56.831520 [0] election timer started (209ms), term=3
23:26:56.833200 [1] RequestVote: Term:3  LastLogIndex:4  LastLogTerm:2 [currentTerm=2, votedFor=1, log index/term=(4, 2)]
23:26:56.833408 [1] ... term out of date in RequestVote
23:26:56.833424 [1] becomes Follower with term=3; log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.833639 [1] ... RequestVote reply: Term:3  VoteGranted:true
23:26:56.833703 [1] election timer started (294ms), term=3
23:26:56.835714 [0] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:56 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:56.835864 [0] wins election with 2 votes
23:26:56.835905 [0] becomes Leader; term=3, nextIndex=map[1:5 2:5], matchIndex=map[1:-1 2:-1]; log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.836058 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.836058 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.836489 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.836539 [1] ... setting commitIndex=4
23:26:56.836675 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:56.836726 [1] commitChanSender entries=[{5 1} {6 1} {8 2} {9 2} {10 2}], savedLastApplied=-1
23:26:56.837018 [TEST] collectCommits(1) got {Command:5 Index:0 Term:3}
23:26:56.837075 [TEST] collectCommits(1) got {Command:6 Index:1 Term:3}
23:26:56.837097 [TEST] collectCommits(1) got {Command:8 Index:2 Term:3}
23:26:56.837115 [TEST] collectCommits(1) got {Command:9 Index:3 Term:3}
23:26:56.837134 [TEST] collectCommits(1) got {Command:10 Index:4 Term:3}
23:26:56.837774 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:-1]; commitIndex := 4
23:26:56.841057 [1] in election timer term changed from 2 to 3, bailing out
23:26:56.841820 [0] in election timer state=LEADER, bailing out
23:26:56.886410 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.886413 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.887606 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.888016 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:56.889876 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:-1]; commitIndex := 4
23:26:56.901216 [TEST] Reconnect 2
23:26:56.936730 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.936730 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.937881 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.938274 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:56.938479 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.938526 [2] ... term out of date in AppendEntries
23:26:56.938542 [2] becomes Follower with term=3; log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
23:26:56.938717 [2] AppendEntries reply: Term:3 Success:%!d(bool=false)
23:26:56.938760 [2] election timer started (176ms), term=3
23:26:56.940446 [2] in election timer term changed from 2 to 3, bailing out
23:26:56.940581 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:-1]; commitIndex := 4
23:26:56.940649 [0] AppendEntries reply from 2 !success: nextIndex := 4
23:26:56.987141 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.987105 [0] sending AppendEntries to 2: ni=2, args=Term:3  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.988306 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:56.988395 [2] AppendEntries: Term:3  PrevLogIndex:1  PrevLogTerm:1  Entries:{Command:8  Term:2}  Entries:{Command:9  Term:2}  Entries:{Command:10  Term:2}  LeaderCommit:4
23:26:56.988722 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:56.988696 [2] ... inserting entries [Command:8  Term:2 Command:9  Term:2 Command:10  Term:2] from index 2
23:26:56.988881 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2}]
23:26:56.988965 [2] ... setting commitIndex=4
23:26:56.989194 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:56.989261 [2] commitChanSender entries=[{8 2} {9 2} {10 2}], savedLastApplied=1
23:26:56.989334 [TEST] collectCommits(2) got {Command:8 Index:2 Term:3}
23:26:56.989382 [TEST] collectCommits(2) got {Command:9 Index:3 Term:3}
23:26:56.989423 [TEST] collectCommits(2) got {Command:10 Index:4 Term:3}
23:26:56.990499 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:2], matchIndex := map[1:4 2:-1]; commitIndex := 4
23:26:56.990783 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.038966 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.038953 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.039544 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.039544 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.039733 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.039731 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.042122 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.042491 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.089476 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.089494 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.090589 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.090570 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.090786 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.090789 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.092946 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.093080 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.139614 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.139615 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.140865 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.140864 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.141288 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.141305 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.142755 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.142826 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.189672 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.189672 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.191269 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.191284 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.192205 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.192361 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.192991 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.193061 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.239765 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.239744 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.241125 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.241175 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.241603 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.241605 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.243637 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.243716 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.289939 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.289931 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.291462 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.291467 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  LeaderCommit:4
23:26:57.291961 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.291967 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.293251 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.293842 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
23:26:57.301643 [0] Submit received by LEADER: 11
23:26:57.301916 [0] ... log=[{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
23:26:57.302026 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:4
23:26:57.302034 [0] sending AppendEntries to 1: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:4
23:26:57.302847 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:4
23:26:57.302861 [1] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:4
23:26:57.302971 [2] ... inserting entries [Command:11  Term:3] from index 5
23:26:57.302991 [1] ... inserting entries [Command:11  Term:3] from index 5
23:26:57.303047 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
23:26:57.303054 [1] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
23:26:57.303300 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.303299 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.306281 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:5], matchIndex := map[1:5 2:4]; commitIndex := 5
23:26:57.306353 [0] leader sets commitIndex := 5
23:26:57.306397 [0] commitChanSender entries=[{11 3}], savedLastApplied=4
23:26:57.306452 [TEST] collectCommits(0) got {Command:11 Index:5 Term:3}
23:26:57.306407 [0] sending AppendEntries to 1: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.306460 [0] sending AppendEntries to 2: ni=5, args=Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:5
23:26:57.306647 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.307077 [1] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.307189 [1] ... setting commitIndex=5
23:26:57.307392 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.307379 [2] AppendEntries: Term:3  PrevLogIndex:4  PrevLogTerm:2  Entries:{Command:11  Term:3}  LeaderCommit:5
23:26:57.307495 [2] ... setting commitIndex=5
23:26:57.307476 [1] commitChanSender entries=[{11 3}], savedLastApplied=4
23:26:57.307553 [TEST] collectCommits(1) got {Command:11 Index:5 Term:3}
23:26:57.307683 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.307779 [2] commitChanSender entries=[{11 3}], savedLastApplied=4
23:26:57.307839 [TEST] collectCommits(2) got {Command:11 Index:5 Term:3}
23:26:57.308104 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.308965 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.356855 [0] sending AppendEntries to 1: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.356862 [0] sending AppendEntries to 2: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.357981 [2] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.358034 [1] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.358261 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.358262 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.361473 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.361556 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.407206 [0] sending AppendEntries to 1: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.407199 [0] sending AppendEntries to 2: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.408566 [1] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.408565 [2] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.409093 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.409101 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.410850 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.411484 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.457850 [0] sending AppendEntries to 1: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.458007 [0] sending AppendEntries to 2: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.458850 [2] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.458850 [1] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.459154 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.459156 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.460177 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.460315 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.508166 [0] sending AppendEntries to 1: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.508166 [0] sending AppendEntries to 2: ni=6, args=Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.509701 [2] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.509701 [1] AppendEntries: Term:3  PrevLogIndex:5  PrevLogTerm:3  LeaderCommit:5
23:26:57.510167 [2] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.510167 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:57.511309 [0] AppendEntries reply from 2 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.511915 [0] AppendEntries reply from 1 success: nextIndex := map[1:6 2:6], matchIndex := map[1:5 2:5]; commitIndex := 5
23:26:57.553643 [0] CM.Stop called
23:26:57.553819 [0] becomes Dead
23:26:57.553869 [0] commitChanSender done
23:26:57.553983 [0] Received quit signal. Shutting down...
23:26:57.554204 [0] CraftServer terminated!
23:26:57.554285 [1] CM.Stop called
23:26:57.554388 [1] becomes Dead
23:26:57.554437 [1] commitChanSender done
23:26:57.554548 [1] Received quit signal. Shutting down...
23:26:57.554687 [1] CraftServer terminated!
23:26:57.554753 [2] CM.Stop called
23:26:57.554791 [2] becomes Dead
23:26:57.554838 [2] commitChanSender done
23:26:57.554932 [2] Received quit signal. Shutting down...
23:26:57.555031 [2] CraftServer terminated!
--- PASS: TestReplaceMultipleLogEntries (1.84s)
=== RUN   TestCrashAfterSubmit
23:26:57.556044 [0] listening at [::]:55881
23:26:57.556462 [1] listening at [::]:55882
23:26:57.556954 [2] listening at [::]:55883
23:26:57.557244 [0] election timer started (186ms), term=0
23:26:57.557261 [1] election timer started (270ms), term=0
23:26:57.557236 [2] election timer started (158ms), term=0
23:26:57.558848 [2] in election timer state=DEAD, bailing out
23:26:57.564423 [1] in election timer state=DEAD, bailing out
23:26:57.718451 [2] becomes Candidate (currentTerm=1); log=[]
23:26:57.718720 [2] election timer started (281ms), term=1
23:26:57.718687 [2] sending RequestVote to 1: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:57.718672 [2] sending RequestVote to 0: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1
23:26:57.721240 [1] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:57.721254 [0] RequestVote: Term:1  CandidateId:2  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:57.721389 [1] ... term out of date in RequestVote
23:26:57.721430 [0] ... term out of date in RequestVote
23:26:57.721456 [1] becomes Follower with term=1; log=[]
23:26:57.721479 [0] becomes Follower with term=1; log=[]
23:26:57.721799 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:57.721801 [0] ... RequestVote reply: Term:1  VoteGranted:true
23:26:57.721885 [1] election timer started (200ms), term=1
23:26:57.721906 [0] election timer started (164ms), term=1
23:26:57.724895 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:57 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:57.725462 [2] wins election with 2 votes
23:26:57.725489 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
23:26:57.725596 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.725606 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.725736 [2] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:57 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:57.725840 [2] while waiting for reply, state = LEADER
23:26:57.726275 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.726339 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.726507 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.726525 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.727499 [1] in election timer term changed from 0 to 1, bailing out
23:26:57.727539 [0] in election timer term changed from 0 to 1, bailing out
23:26:57.728049 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.728117 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.728988 [2] in election timer state=LEADER, bailing out
23:26:57.776098 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.776098 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.777586 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.777585 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.778040 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.778039 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.779411 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.780042 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.826568 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.826568 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.828247 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.828247 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:57.828637 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.828642 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.829639 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.830165 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
23:26:57.858355 [2] Submit received by LEADER: 5
23:26:57.858855 [2] ... log=[{5 1}]
23:26:57.859075 [2] sending AppendEntries to 1: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:57.859033 [2] sending AppendEntries to 0: ni=0, args=Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:57.860105 [TEST] Crash 2
23:26:57.860152 [TEST] Disconnect 2
23:26:57.860368 [2] CM.Stop called
23:26:57.860436 [2] becomes Dead
23:26:57.860490 [2] commitChanSender done
23:26:57.860580 [2] Received quit signal. Shutting down...
23:26:57.860589 [0] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:57.860635 [1] AppendEntries: Term:1  LeaderId:2  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:57.860843 [2] CraftServer terminated!
23:26:57.860806 [0] ... inserting entries [Command:5  Term:1] from index 0
23:26:57.860841 [1] ... inserting entries [Command:5  Term:1] from index 0
23:26:57.860903 [0] ... log is now: [{5 1}]
23:26:57.860962 [1] ... log is now: [{5 1}]
23:26:57.861129 [0] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:57.861149 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:58.033127 [0] becomes Candidate (currentTerm=2); log=[{5 1}]
23:26:58.033656 [0] sending RequestVote to 2: Term:2  LastLogTerm:1
23:26:58.033606 [0] sending RequestVote to 1: Term:2  LastLogTerm:1
23:26:58.035305 [0] election timer started (286ms), term=2
23:26:58.036993 [1] RequestVote: Term:2  LastLogTerm:1 [currentTerm=1, votedFor=2, log index/term=(0, 1)]
23:26:58.037074 [1] ... term out of date in RequestVote
23:26:58.037093 [1] becomes Follower with term=2; log=[{5 1}]
23:26:58.037395 [1] ... RequestVote reply: Term:2  VoteGranted:true
23:26:58.037498 [1] election timer started (228ms), term=2
23:26:58.041631 [0] received RequestVoteReply &{Msg:Term:2  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:58 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:58.041751 [0] wins election with 2 votes
23:26:58.041776 [0] becomes Leader; term=2, nextIndex=map[1:1 2:1], matchIndex=map[1:-1 2:-1]; log=[{5 1}]
23:26:58.041877 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.041884 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.041982 [1] in election timer term changed from 1 to 2, bailing out
23:26:58.042556 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.042788 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.043622 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.045888 [0] in election timer state=LEADER, bailing out
23:26:58.092315 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.092322 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.095037 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.095582 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.097391 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.142987 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.142918 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.144556 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.145026 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.146594 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.193774 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.193817 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.195653 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.196114 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.197901 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.243934 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.243933 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.245989 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.246270 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.247676 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.294666 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.294712 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.296300 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.296806 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.298095 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.345558 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.345547 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.347273 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.347540 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.348893 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.396496 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.396496 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.398163 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.398546 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.399514 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.447500 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.447497 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.448818 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.449313 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.450422 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.473467 [TEST] Restart 2
23:26:58.475551 [2] listening at [::]:55887
23:26:58.475611 [TEST] Reconnect 2
23:26:58.475887 [2] election timer started (243ms), term=1
23:26:58.497759 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.497758 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.499108 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.499610 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.499854 [2] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.499939 [2] ... term out of date in AppendEntries
23:26:58.499969 [2] becomes Follower with term=2; log=[{5 1}]
23:26:58.500199 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.500349 [2] election timer started (210ms), term=2
23:26:58.500630 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:-1]; commitIndex := -1
23:26:58.501978 [0] AppendEntries reply from 2 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := -1
23:26:58.506560 [2] in election timer term changed from 1 to 2, bailing out
23:26:58.548945 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.548967 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.550580 [2] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.550579 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.551238 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.551327 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.554821 [0] AppendEntries reply from 2 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := -1
23:26:58.556447 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := -1
23:26:58.599028 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.599029 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.600290 [2] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.600290 [1] AppendEntries: Term:2  PrevLogTerm:1  LeaderCommit:-1
23:26:58.600594 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.600596 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.602387 [0] AppendEntries reply from 2 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := -1
23:26:58.602492 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := -1
23:26:58.647346 [0] Submit received by LEADER: 6
23:26:58.647803 [0] ... log=[{5 1} {6 2}]
23:26:58.648002 [0] sending AppendEntries to 1: ni=1, args=Term:2  PrevLogTerm:1  Entries:{Command:6  Term:2}  LeaderCommit:-1
23:26:58.648014 [0] sending AppendEntries to 2: ni=1, args=Term:2  PrevLogTerm:1  Entries:{Command:6  Term:2}  LeaderCommit:-1
23:26:58.649326 [1] AppendEntries: Term:2  PrevLogTerm:1  Entries:{Command:6  Term:2}  LeaderCommit:-1
23:26:58.649329 [2] AppendEntries: Term:2  PrevLogTerm:1  Entries:{Command:6  Term:2}  LeaderCommit:-1
23:26:58.649531 [1] ... inserting entries [Command:6  Term:2] from index 1
23:26:58.649582 [2] ... inserting entries [Command:6  Term:2] from index 1
23:26:58.649624 [1] ... log is now: [{5 1} {6 2}]
23:26:58.649686 [2] ... log is now: [{5 1} {6 2}]
23:26:58.650001 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.649999 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.651929 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:1], matchIndex := map[1:1 2:0]; commitIndex := 1
23:26:58.651994 [0] leader sets commitIndex := 1
23:26:58.652043 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:58.652035 [0] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
23:26:58.652134 [0] sending AppendEntries to 2: ni=2, args=Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.652167 [0] sending AppendEntries to 1: ni=2, args=Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.652118 [TEST] collectCommits(0) got {Command:5 Index:0 Term:2}
23:26:58.652387 [TEST] collectCommits(0) got {Command:6 Index:1 Term:2}
23:26:58.653132 [2] AppendEntries: Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.653178 [1] AppendEntries: Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.653282 [1] ... setting commitIndex=1
23:26:58.653207 [2] ... setting commitIndex=1
23:26:58.653878 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.653887 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.654519 [2] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
23:26:58.654648 [TEST] collectCommits(2) got {Command:5 Index:0 Term:2}
23:26:58.654703 [TEST] collectCommits(2) got {Command:6 Index:1 Term:2}
23:26:58.655211 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:58.655256 [1] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
23:26:58.655344 [TEST] collectCommits(1) got {Command:5 Index:0 Term:2}
23:26:58.655391 [TEST] collectCommits(1) got {Command:6 Index:1 Term:2}
23:26:58.655821 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:58.702403 [0] sending AppendEntries to 2: ni=2, args=Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.702403 [0] sending AppendEntries to 1: ni=2, args=Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.704386 [2] AppendEntries: Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.704385 [1] AppendEntries: Term:2  PrevLogIndex:1  PrevLogTerm:2  LeaderCommit:1
23:26:58.704896 [2] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.705969 [1] AppendEntries reply: Term:2 Success:%!d(bool=true)
23:26:58.707995 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:58.708241 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
23:26:58.749144 [0] CM.Stop called
23:26:58.749222 [0] becomes Dead
23:26:58.749289 [0] commitChanSender done
23:26:58.749366 [0] Received quit signal. Shutting down...
23:26:58.749608 [0] CraftServer terminated!
23:26:58.749685 [1] CM.Stop called
23:26:58.749723 [1] becomes Dead
23:26:58.749781 [1] commitChanSender done
23:26:58.749845 [1] Received quit signal. Shutting down...
23:26:58.749996 [1] CraftServer terminated!
23:26:58.750061 [2] CM.Stop called
23:26:58.750111 [2] becomes Dead
23:26:58.750168 [2] commitChanSender done
23:26:58.750240 [2] Received quit signal. Shutting down...
23:26:58.750345 [2] CraftServer terminated!
--- PASS: TestCrashAfterSubmit (1.20s)
23:26:58.750464 [2] in election timer state=DEAD, bailing out
=== RUN   TestDisconnectAfterSubmit
23:26:58.751735 [0] listening at [::]:55889
23:26:58.752182 [1] listening at [::]:55890
23:26:58.752562 [2] listening at [::]:55891
23:26:58.753146 [2] election timer started (178ms), term=0
23:26:58.753147 [0] election timer started (159ms), term=0
23:26:58.753140 [1] election timer started (197ms), term=0
23:26:58.757773 [1] in election timer state=DEAD, bailing out
23:26:58.914349 [0] becomes Candidate (currentTerm=1); log=[]
23:26:58.914906 [0] election timer started (226ms), term=1
23:26:58.914540 [0] sending RequestVote to 2: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:58.914711 [0] sending RequestVote to 1: Term:1  LastLogIndex:-1  LastLogTerm:-1
23:26:58.916977 [1] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:58.916979 [2] RequestVote: Term:1  LastLogIndex:-1  LastLogTerm:-1 [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
23:26:58.917074 [1] ... term out of date in RequestVote
23:26:58.917090 [2] ... term out of date in RequestVote
23:26:58.917094 [1] becomes Follower with term=1; log=[]
23:26:58.917110 [2] becomes Follower with term=1; log=[]
23:26:58.917295 [1] ... RequestVote reply: Term:1  VoteGranted:true
23:26:58.917298 [2] ... RequestVote reply: Term:1  VoteGranted:true
23:26:58.917379 [1] election timer started (274ms), term=1
23:26:58.917470 [2] election timer started (282ms), term=1
23:26:58.919153 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:58 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:58.919277 [0] wins election with 2 votes
23:26:58.919309 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
23:26:58.919380 [0] received RequestVoteReply &{Msg:Term:1  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:58 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:58.919469 [0] while waiting for reply, state = LEADER
23:26:58.919527 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.919549 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.920368 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.920418 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.920575 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:58.920622 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:58.923307 [2] in election timer term changed from 0 to 1, bailing out
23:26:58.923355 [1] in election timer term changed from 0 to 1, bailing out
23:26:58.923706 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:58.923853 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:58.925277 [0] in election timer state=LEADER, bailing out
23:26:58.969869 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.969851 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.971124 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.971124 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:58.971362 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:58.971365 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:58.972674 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:58.972750 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:59.019990 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:59.020038 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:59.021070 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:59.021074 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  LeaderCommit:-1
23:26:59.021448 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:59.021449 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:59.022680 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:59.023519 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
23:26:59.054496 [0] Submit received by LEADER: 5
23:26:59.054849 [0] ... log=[{5 1}]
23:26:59.055016 [0] sending AppendEntries to 2: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:59.055027 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:59.056011 [TEST] Disconnect 0
23:26:59.056135 [2] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:59.056177 [1] AppendEntries: Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}  LeaderCommit:-1
23:26:59.056325 [2] ... inserting entries [Command:5  Term:1] from index 0
23:26:59.056370 [1] ... inserting entries [Command:5  Term:1] from index 0
23:26:59.056415 [2] ... log is now: [{5 1}]
23:26:59.056466 [1] ... log is now: [{5 1}]
23:26:59.056712 [2] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:59.056753 [1] AppendEntries reply: Term:1 Success:%!d(bool=true)
23:26:59.057921 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:1], matchIndex := map[1:-1 2:0]; commitIndex := 0
23:26:59.058060 [0] leader sets commitIndex := 0
23:26:59.058460 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.058553 [0] commitChanSender entries=[{5 1}], savedLastApplied=-1
23:26:59.058598 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
23:26:59.058465 [0] sending AppendEntries to 1: ni=0, args=Term:1  PrevLogIndex:-1  PrevLogTerm:-1  Entries:{Command:5  Term:1}
23:26:59.059013 [0] AppendEntries reply from 1 success: nextIndex := map[1:1 2:1], matchIndex := map[1:0 2:0]; commitIndex := 0
23:26:59.108202 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.108202 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.158473 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.158480 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.208485 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.208499 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.258531 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.258550 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.308628 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.308628 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.338529 [1] becomes Candidate (currentTerm=2); log=[{5 1}]
23:26:59.338576 [2] becomes Candidate (currentTerm=2); log=[{5 1}]
23:26:59.338729 [1] election timer started (225ms), term=2
23:26:59.338733 [2] election timer started (215ms), term=2
23:26:59.338734 [2] sending RequestVote to 0: Term:2  CandidateId:2  LastLogTerm:1
23:26:59.338797 [1] sending RequestVote to 2: Term:2  CandidateId:1  LastLogTerm:1
23:26:59.338851 [1] sending RequestVote to 0: Term:2  CandidateId:1  LastLogTerm:1
23:26:59.338860 [2] sending RequestVote to 1: Term:2  CandidateId:2  LastLogTerm:1
23:26:59.340946 [2] RequestVote: Term:2  CandidateId:1  LastLogTerm:1 [currentTerm=2, votedFor=2, log index/term=(0, 1)]
23:26:59.340946 [1] RequestVote: Term:2  CandidateId:2  LastLogTerm:1 [currentTerm=2, votedFor=1, log index/term=(0, 1)]
23:26:59.341200 [2] ... RequestVote reply: Term:2
23:26:59.341200 [1] ... RequestVote reply: Term:2
23:26:59.342876 [2] received RequestVoteReply &{Msg:Term:2 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:59 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:59.342876 [1] received RequestVoteReply &{Msg:Term:2 header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:59 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:59.359650 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.359646 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.410107 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.410092 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.460136 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.460136 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.510224 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.510214 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.559272 [2] becomes Candidate (currentTerm=3); log=[{5 1}]
23:26:59.559545 [2] election timer started (175ms), term=3
23:26:59.559513 [2] sending RequestVote to 1: Term:3  CandidateId:2  LastLogTerm:1
23:26:59.559504 [2] sending RequestVote to 0: Term:3  CandidateId:2  LastLogTerm:1
23:26:59.560324 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.560329 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.561039 [1] RequestVote: Term:3  CandidateId:2  LastLogTerm:1 [currentTerm=2, votedFor=1, log index/term=(0, 1)]
23:26:59.561177 [1] ... term out of date in RequestVote
23:26:59.561210 [1] becomes Follower with term=3; log=[{5 1}]
23:26:59.561482 [1] ... RequestVote reply: Term:3  VoteGranted:true
23:26:59.561575 [1] election timer started (252ms), term=3
23:26:59.563408 [2] received RequestVoteReply &{Msg:Term:3  VoteGranted:true header:map[Content-Type:[application/grpc] Date:[Wed, 12 Mar 2025 17:56:59 GMT] Grpc-Accept-Encoding:[gzip] Grpc-Encoding:[gzip]] trailer:map[Grpc-Status:[0]]}
23:26:59.563545 [2] wins election with 2 votes
23:26:59.563573 [2] becomes Leader; term=3, nextIndex=map[0:1 1:1], matchIndex=map[0:-1 1:-1]; log=[{5 1}]
23:26:59.563697 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.563684 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.564343 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.564596 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.565683 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.569367 [1] in election timer term changed from 2 to 3, bailing out
23:26:59.569701 [2] in election timer state=LEADER, bailing out
23:26:59.611390 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.611391 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.614024 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.614009 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.615119 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.616002 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.620144 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.661735 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.661730 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.664323 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.664323 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.665583 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.666111 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.668229 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.713062 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.713024 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.714589 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.714627 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.716218 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.716760 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.717817 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.762784 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.762782 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.764882 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.764903 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.766505 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.767012 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.769086 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.812853 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.812898 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.815246 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.815365 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.816769 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.817056 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.817915 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.862928 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.863110 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.865660 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.865693 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.867135 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.867630 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.870725 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.913599 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.913626 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.915903 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.915901 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.916697 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.916936 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.918357 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:26:59.963474 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.963465 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:26:59.966200 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.966205 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.967892 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:26:59.968280 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:26:59.970622 [TEST] Reconnect 0
23:26:59.970771 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:27:00.013740 [0] sending AppendEntries to 2: ni=1, args=Term:1  PrevLogTerm:1
23:27:00.013757 [0] sending AppendEntries to 1: ni=1, args=Term:1  PrevLogTerm:1
23:27:00.016013 [1] AppendEntries: Term:1  PrevLogTerm:1
23:27:00.016135 [2] AppendEntries: Term:1  PrevLogTerm:1
23:27:00.016259 [1] AppendEntries reply: Term:3 Success:%!d(bool=false)
23:27:00.016407 [2] AppendEntries reply: Term:3 Success:%!d(bool=false)
23:27:00.016826 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.016854 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.017125 [0] term out of date in heartbeat reply
23:27:00.017172 [0] becomes Follower with term=3; log=[{5 1}]
23:27:00.017325 [0] election timer started (223ms), term=3
23:27:00.017467 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.017670 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.017957 [0] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.018150 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.018381 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:-1 1:0]; commitIndex := -1
23:27:00.019531 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
23:27:00.066610 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.066610 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.068438 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.068855 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.068893 [0] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.069207 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.071096 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
23:27:00.073873 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
23:27:00.117232 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.117223 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.118598 [0] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.118685 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  LeaderCommit:-1
23:27:00.119182 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.119185 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.121315 [2] Submit received by LEADER: 6
23:27:00.121526 [2] ... log=[{5 1} {6 3}]
23:27:00.121608 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
23:27:00.121717 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
23:27:00.121599 [2] sending AppendEntries to 0: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:-1
23:27:00.121687 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:-1
23:27:00.122260 [0] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:-1
23:27:00.122278 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:-1
23:27:00.122371 [0] ... inserting entries [Command:6  Term:3] from index 1
23:27:00.122385 [1] ... inserting entries [Command:6  Term:3] from index 1
23:27:00.122420 [0] ... log is now: [{5 1} {6 3}]
23:27:00.122433 [1] ... log is now: [{5 1} {6 3}]
23:27:00.122645 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.122687 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.124037 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:1], matchIndex := map[0:1 1:0]; commitIndex := 1
23:27:00.124528 [2] leader sets commitIndex := 1
23:27:00.124577 [2] sending AppendEntries to 0: ni=2, args=Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.124689 [2] commitChanSender entries=[{5 1} {6 3}], savedLastApplied=-1
23:27:00.124744 [TEST] collectCommits(2) got {Command:5 Index:0 Term:3}
23:27:00.124781 [TEST] collectCommits(2) got {Command:6 Index:1 Term:3}
23:27:00.124794 [2] sending AppendEntries to 1: ni=1, args=Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:1
23:27:00.125082 [0] AppendEntries: Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.125100 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:27:00.125143 [0] ... setting commitIndex=1
23:27:00.125280 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.125241 [1] AppendEntries: Term:3  LeaderId:2  PrevLogTerm:1  Entries:{Command:6  Term:3}  LeaderCommit:1
23:27:00.125324 [1] ... setting commitIndex=1
23:27:00.125321 [0] commitChanSender entries=[{6 3}], savedLastApplied=0
23:27:00.125376 [TEST] collectCommits(0) got {Command:6 Index:1 Term:3}
23:27:00.125449 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.125501 [1] commitChanSender entries=[{5 1} {6 3}], savedLastApplied=-1
23:27:00.125555 [TEST] collectCommits(1) got {Command:5 Index:0 Term:3}
23:27:00.125593 [TEST] collectCommits(1) got {Command:6 Index:1 Term:3}
23:27:00.126724 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:27:00.126832 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:27:00.175263 [2] sending AppendEntries to 0: ni=2, args=Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.175277 [2] sending AppendEntries to 1: ni=2, args=Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.176483 [1] AppendEntries: Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.176578 [0] AppendEntries: Term:3  LeaderId:2  PrevLogIndex:1  PrevLogTerm:3  LeaderCommit:1
23:27:00.176838 [1] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.176837 [0] AppendEntries reply: Term:3 Success:%!d(bool=true)
23:27:00.179260 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:27:00.179915 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
23:27:00.222868 [0] CM.Stop called
23:27:00.222943 [0] becomes Dead
23:27:00.222986 [0] commitChanSender done
23:27:00.223117 [0] Received quit signal. Shutting down...
23:27:00.223261 [0] CraftServer terminated!
23:27:00.223336 [1] CM.Stop called
23:27:00.223382 [1] becomes Dead
23:27:00.223429 [1] commitChanSender done
23:27:00.223489 [1] Received quit signal. Shutting down...
23:27:00.223610 [1] CraftServer terminated!
23:27:00.223666 [2] CM.Stop called
23:27:00.223703 [2] becomes Dead
23:27:00.223765 [2] commitChanSender done
23:27:00.223865 [2] Received quit signal. Shutting down...
23:27:00.223964 [2] CraftServer terminated!
--- PASS: TestDisconnectAfterSubmit (1.47s)
PASS
23:27:00.227708 [0] in election timer state=DEAD, bailing out
23:27:00.232205 [1] in election timer state=DEAD, bailing out
ok  	github.com/codeharik/craft	29.205s
